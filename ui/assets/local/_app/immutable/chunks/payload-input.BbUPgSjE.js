import{s as D,h as S,b as L,j,k as V,f as T,d as q,m as d,i as A,p as G,t as K,l as M,H as N,n as I,v as Q,q as W,P as X}from"./scheduler.D6mQsyhd.js";import{S as O,i as z,c as y,a as E,m as P,t as b,b as k,d as C,g as H,e as R}from"./index.CDeUyeTp.js";import{C as Y}from"./code-block.B_-nOpZ8.js";import{I as Z}from"./icon.BhEsg1_g.js";import{t as U}from"./translate.BBe5dcco.js";import{t as x,v as $}from"./toaster.D6uOCleh.js";import{L as ee}from"./label.BalHcG1M.js";import{T as te}from"./tooltip.CGh2n__f.js";function le(a){let e,l,t,n,r,p,c;return l=new Z({props:{name:"upload"}}),{c(){e=S("label"),y(l.$$.fragment),t=L(),n=S("input"),this.h()},l(i){e=j(i,"LABEL",{for:!0,class:!0});var f=V(e);E(l.$$.fragment,f),f.forEach(T),t=q(i),n=j(i,"INPUT",{id:!0,class:!0,type:!0,accept:!0}),this.h()},h(){d(e,"for",a[0]),d(e,"class","file-upload-label svelte-nqh6y4"),d(n,"id",a[0]),d(n,"class","hidden"),d(n,"type","file"),d(n,"accept",a[1])},m(i,f){A(i,e,f),P(l,e,null),A(i,t,f),A(i,n,f),r=!0,p||(c=G(n,"change",a[2]),p=!0)},p(i,[f]){(!r||f&1)&&d(e,"for",i[0]),(!r||f&1)&&d(n,"id",i[0]),(!r||f&2)&&d(n,"accept",i[1])},i(i){r||(b(l.$$.fragment,i),r=!0)},o(i){k(l.$$.fragment,i),r=!1},d(i){i&&(T(e),T(t),T(n)),C(l),p=!1,c()}}}function ne(a,e,l){let{id:t}=e,{accept:n=".json"}=e,{onUpload:r}=e;const p=c=>{var i;const f=c.target,v=(i=f==null?void 0:f.files)===null||i===void 0?void 0:i[0],_=new FileReader;v&&(_.readAsText(v),_.onload=()=>{var h,g;try{const o=(g=(h=_==null?void 0:_.result)===null||h===void 0?void 0:h.toString())!==null&&g!==void 0?g:"";r(o)}catch{x.push({variant:"error",message:U("common.upload-error")})}})};return a.$$set=c=>{"id"in c&&l(0,t=c.id),"accept"in c&&l(1,n=c.accept),"onUpload"in c&&l(3,r=c.onUpload)},[t,n,p,r]}class ae extends O{constructor(e){super(),z(this,e,ne,le,D,{id:0,accept:1,onUpload:3})}}function B(a){let e,l;return e=new Y({props:{id:a[3],maxHeight:320,content:a[0],editable:a[6],copyable:!1}}),e.$on("change",a[7]),{c(){y(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,n){P(e,t,n),l=!0},p(t,n){const r={};n&8&&(r.id=t[3]),n&1&&(r.content=t[0]),n&64&&(r.editable=t[6]),e.$set(r)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){C(e,t)}}}function J(a){let e,l;return e=new te({props:{text:U("common.upload-json"),topRight:!0,$$slots:{default:[ie]},$$scope:{ctx:a}}}),{c(){y(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,n){P(e,t,n),l=!0},p(t,n){const r={};n&2056&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){C(e,t)}}}function ie(a){let e,l;return e=new ae({props:{id:a[3]+"-input-file-upload",onUpload:a[8]}}),{c(){y(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,n){P(e,t,n),l=!0},p(t,n){const r={};n&8&&(r.id=t[3]+"-input-file-upload"),e.$set(r)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){C(e,t)}}}function oe(a){let e,l,t,n,r=[a[2],a[6]],p,c,i,f=(a[1]?U("common.input-valid-json"):a[5])+"",v,_,h,g;l=new ee({props:{for:a[3],label:a[4]}});let o=B(a),u=a[6]&&J(a);return{c(){e=S("div"),y(l.$$.fragment),t=L(),n=S("div"),o.c(),p=L(),u&&u.c(),c=L(),i=S("span"),v=K(f),this.h()},l(s){e=j(s,"DIV",{class:!0});var m=V(e);E(l.$$.fragment,m),t=q(m),n=j(m,"DIV",{class:!0});var w=V(n);o.l(w),p=q(w),u&&u.l(w),w.forEach(T),c=q(m),i=j(m,"SPAN",{class:!0,role:!0});var F=V(i);v=M(F,f),F.forEach(T),m.forEach(T),this.h()},h(){d(n,"class","flex gap-2"),d(i,"class",_="text-xs "+(a[1]?"text-danger":"text-primary")+" inline-block"),d(i,"role",h=a[1]?"alert":null),N(i,"hidden",!a[5]&&!a[1]),d(e,"class","flex flex-col gap-2")},m(s,m){A(s,e,m),P(l,e,null),I(e,t),I(e,n),o.m(n,null),I(n,p),u&&u.m(n,null),I(e,c),I(e,i),I(i,v),g=!0},p(s,[m]){const w={};m&8&&(w.for=s[3]),m&16&&(w.label=s[4]),l.$set(w),m&68&&D(r,r=[s[2],s[6]])?(H(),k(o,1,1,Q),R(),o=B(s),o.c(),b(o,1),o.m(n,p)):o.p(s,m),s[6]?u?(u.p(s,m),m&64&&b(u,1)):(u=J(s),u.c(),b(u,1),u.m(n,null)):u&&(H(),k(u,1,1,()=>{u=null}),R()),(!g||m&34)&&f!==(f=(s[1]?U("common.input-valid-json"):s[5])+"")&&W(v,f),(!g||m&2&&_!==(_="text-xs "+(s[1]?"text-danger":"text-primary")+" inline-block"))&&d(i,"class",_),(!g||m&2&&h!==(h=s[1]?"alert":null))&&d(i,"role",h),(!g||m&34)&&N(i,"hidden",!s[5]&&!s[1])},i(s){g||(b(l.$$.fragment,s),b(o),b(u),g=!0)},o(s){k(l.$$.fragment,s),k(o),k(u),g=!1},d(s){s&&T(e),C(l),o.d(s),u&&u.d()}}}function re(a,e,l){let{id:t=$()}=e,{error:n=!1}=e,{input:r}=e,{label:p=U("workflows.signal-payload-input-label")}=e,{loading:c=!1}=e,{hintText:i=U("workflows.signal-payload-input-label-hint")}=e,{editing:f=!0}=e;const v=o=>{if(!r)return!0;try{return JSON.parse(o),!0}catch{return!1}},_=o=>{l(0,r=o.detail)},h=()=>{l(0,r=""),l(2,c=!1)},g=o=>{l(0,r=o)};return X(h),a.$$set=o=>{"id"in o&&l(3,t=o.id),"error"in o&&l(1,n=o.error),"input"in o&&l(0,r=o.input),"label"in o&&l(4,p=o.label),"loading"in o&&l(2,c=o.loading),"hintText"in o&&l(5,i=o.hintText),"editing"in o&&l(6,f=o.editing)},a.$$.update=()=>{a.$$.dirty&1&&l(1,n=!v(r))},[r,n,c,t,p,i,f,_,g]}class _e extends O{constructor(e){super(),z(this,e,re,oe,D,{id:3,error:1,input:0,label:4,loading:2,hintText:5,editing:6})}}export{_e as P};
