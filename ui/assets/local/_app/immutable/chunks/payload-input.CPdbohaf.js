import{s as D,h as S,b as P,j,k as V,f as T,d as q,m,i as A,p as W,t as z,l as K,G as N,n as I,v as M,q as Q,W as X}from"./scheduler.CnYDgCRb.js";import{S as J,i as O,c as y,a as E,m as C,t as b,b as k,d as L,g as R,e as B}from"./index.DW7Zsqzm.js";import{C as Y}from"./code-block._sMObblb.js";import{I as Z}from"./icon.BLtYHMSM.js";import{t as U}from"./translate.BBe5dcco.js";import{t as x}from"./toaster.CRekXPtX.js";import{L as $}from"./label.DRY4v8k1.js";import{T as ee}from"./tooltip.BL0FZrnU.js";import{v as te}from"./v4.BOvFkHkt.js";function ne(a){let e,n,t,l,r,g,c;return n=new Z({props:{name:"upload"}}),{c(){e=S("label"),y(n.$$.fragment),t=P(),l=S("input"),this.h()},l(i){e=j(i,"LABEL",{for:!0,class:!0});var f=V(e);E(n.$$.fragment,f),f.forEach(T),t=q(i),l=j(i,"INPUT",{id:!0,class:!0,type:!0,accept:!0}),this.h()},h(){m(e,"for",a[0]),m(e,"class","file-upload-label svelte-quefyv"),m(l,"id",a[0]),m(l,"class","hidden"),m(l,"type","file"),m(l,"accept",a[1])},m(i,f){A(i,e,f),C(n,e,null),A(i,t,f),A(i,l,f),r=!0,g||(c=W(l,"change",a[2]),g=!0)},p(i,[f]){(!r||f&1)&&m(e,"for",i[0]),(!r||f&1)&&m(l,"id",i[0]),(!r||f&2)&&m(l,"accept",i[1])},i(i){r||(b(n.$$.fragment,i),r=!0)},o(i){k(n.$$.fragment,i),r=!1},d(i){i&&(T(e),T(t),T(l)),L(n),g=!1,c()}}}function le(a,e,n){let{id:t}=e,{accept:l=".json"}=e,{onUpload:r}=e;const g=c=>{var i;const f=c.target,v=(i=f==null?void 0:f.files)===null||i===void 0?void 0:i[0],_=new FileReader;v&&(_.readAsText(v),_.onload=()=>{var h,p;try{const o=(p=(h=_==null?void 0:_.result)===null||h===void 0?void 0:h.toString())!==null&&p!==void 0?p:"";r(o)}catch{x.push({variant:"error",message:U("common.upload-error")})}})};return a.$$set=c=>{"id"in c&&n(0,t=c.id),"accept"in c&&n(1,l=c.accept),"onUpload"in c&&n(3,r=c.onUpload)},[t,l,g,r]}class ae extends J{constructor(e){super(),O(this,e,le,ne,D,{id:0,accept:1,onUpload:3})}}function G(a){let e,n;return e=new Y({props:{id:a[3],maxHeight:320,content:a[0],editable:a[6],copyable:!1}}),e.$on("change",a[7]),{c(){y(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,l){C(e,t,l),n=!0},p(t,l){const r={};l&8&&(r.id=t[3]),l&1&&(r.content=t[0]),l&64&&(r.editable=t[6]),e.$set(r)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){k(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function H(a){let e,n;return e=new ee({props:{text:U("common.upload-json"),topRight:!0,$$slots:{default:[ie]},$$scope:{ctx:a}}}),{c(){y(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,l){C(e,t,l),n=!0},p(t,l){const r={};l&2056&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){k(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function ie(a){let e,n;return e=new ae({props:{id:a[3]+"-input-file-upload",onUpload:a[8]}}),{c(){y(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,l){C(e,t,l),n=!0},p(t,l){const r={};l&8&&(r.id=t[3]+"-input-file-upload"),e.$set(r)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){k(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function oe(a){let e,n,t,l,r=[a[2],a[6]],g,c,i,f=(a[1]?U("common.input-valid-json"):a[5])+"",v,_,h,p;n=new $({props:{for:a[3],label:a[4]}});let o=G(a),u=a[6]&&H(a);return{c(){e=S("div"),y(n.$$.fragment),t=P(),l=S("div"),o.c(),g=P(),u&&u.c(),c=P(),i=S("span"),v=z(f),this.h()},l(s){e=j(s,"DIV",{class:!0});var d=V(e);E(n.$$.fragment,d),t=q(d),l=j(d,"DIV",{class:!0});var w=V(l);o.l(w),g=q(w),u&&u.l(w),w.forEach(T),c=q(d),i=j(d,"SPAN",{class:!0,role:!0});var F=V(i);v=K(F,f),F.forEach(T),d.forEach(T),this.h()},h(){m(l,"class","flex gap-2"),m(i,"class",_="text-xs "+(a[1]?"text-danger":"text-primary")+" inline-block"),m(i,"role",h=a[1]?"alert":null),N(i,"hidden",!a[5]&&!a[1]),m(e,"class","flex flex-col gap-2")},m(s,d){A(s,e,d),C(n,e,null),I(e,t),I(e,l),o.m(l,null),I(l,g),u&&u.m(l,null),I(e,c),I(e,i),I(i,v),p=!0},p(s,[d]){const w={};d&8&&(w.for=s[3]),d&16&&(w.label=s[4]),n.$set(w),d&68&&D(r,r=[s[2],s[6]])?(R(),k(o,1,1,M),B(),o=G(s),o.c(),b(o,1),o.m(l,g)):o.p(s,d),s[6]?u?(u.p(s,d),d&64&&b(u,1)):(u=H(s),u.c(),b(u,1),u.m(l,null)):u&&(R(),k(u,1,1,()=>{u=null}),B()),(!p||d&34)&&f!==(f=(s[1]?U("common.input-valid-json"):s[5])+"")&&Q(v,f),(!p||d&2&&_!==(_="text-xs "+(s[1]?"text-danger":"text-primary")+" inline-block"))&&m(i,"class",_),(!p||d&2&&h!==(h=s[1]?"alert":null))&&m(i,"role",h),(!p||d&34)&&N(i,"hidden",!s[5]&&!s[1])},i(s){p||(b(n.$$.fragment,s),b(o),b(u),p=!0)},o(s){k(n.$$.fragment,s),k(o),k(u),p=!1},d(s){s&&T(e),L(n),o.d(s),u&&u.d()}}}function re(a,e,n){let{id:t=te()}=e,{error:l=!1}=e,{input:r}=e,{label:g=U("workflows.signal-payload-input-label")}=e,{loading:c=!1}=e,{hintText:i=U("workflows.signal-payload-input-label-hint")}=e,{editing:f=!0}=e;const v=o=>{if(!r)return!0;try{return JSON.parse(o),!0}catch{return!1}},_=o=>{n(0,r=o.detail)},h=()=>{n(0,r=""),n(2,c=!1)},p=o=>{n(0,r=o)};return X(h),a.$$set=o=>{"id"in o&&n(3,t=o.id),"error"in o&&n(1,l=o.error),"input"in o&&n(0,r=o.input),"label"in o&&n(4,g=o.label),"loading"in o&&n(2,c=o.loading),"hintText"in o&&n(5,i=o.hintText),"editing"in o&&n(6,f=o.editing)},a.$$.update=()=>{a.$$.dirty&1&&n(1,l=!v(r))},[r,l,c,t,g,i,f,_,p]}class he extends J{constructor(e){super(),O(this,e,re,oe,D,{id:3,error:1,input:0,label:4,loading:2,hintText:5,editing:6})}}export{he as P};
