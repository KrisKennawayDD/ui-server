import{s as F,d as T,j as d,i as L,p as z,k as S,l as P,e as A,n as j,f as D,v as K,o as M,G as q,h as I,m as Q,t as W,V as X}from"./scheduler.gES7FyoG.js";import{S as J,i as O,d as y,t as k,a as b,m as E,c as V,b as C,g as R,e as B}from"./index.DpnGbpCk.js";import{C as Y}from"./code-block.Cl72Ogt-.js";import{I as Z}from"./icon.iMHg4y68.js";import{t as U}from"./translate.DzDeFYDI.js";import{t as x}from"./toaster.C7zbq-QU.js";import{L as $}from"./label.B6iMAtLr.js";import{T as ee}from"./tooltip.BwIPcgk-.js";import{v as te}from"./v4.BOvFkHkt.js";function le(a){let e,l,t,n,r,g,c;return l=new Z({props:{name:"upload"}}),{c(){e=j("label"),C(l.$$.fragment),t=D(),n=j("input"),this.h()},l(i){e=S(i,"LABEL",{for:!0,class:!0});var f=P(e);V(l.$$.fragment,f),f.forEach(T),t=A(i),n=S(i,"INPUT",{id:!0,class:!0,type:!0,accept:!0}),this.h()},h(){d(e,"for",a[0]),d(e,"class","file-upload-label svelte-quefyv"),d(n,"id",a[0]),d(n,"class","hidden"),d(n,"type","file"),d(n,"accept",a[1])},m(i,f){L(i,e,f),E(l,e,null),L(i,t,f),L(i,n,f),r=!0,g||(c=z(n,"change",a[2]),g=!0)},p(i,[f]){(!r||f&1)&&d(e,"for",i[0]),(!r||f&1)&&d(n,"id",i[0]),(!r||f&2)&&d(n,"accept",i[1])},i(i){r||(b(l.$$.fragment,i),r=!0)},o(i){k(l.$$.fragment,i),r=!1},d(i){i&&(T(e),T(t),T(n)),y(l),g=!1,c()}}}function ne(a,e,l){let{id:t}=e,{accept:n=".json"}=e,{onUpload:r}=e;const g=c=>{var i;const f=c.target,v=(i=f==null?void 0:f.files)===null||i===void 0?void 0:i[0],_=new FileReader;v&&(_.readAsText(v),_.onload=()=>{var h,p;try{const o=(p=(h=_==null?void 0:_.result)===null||h===void 0?void 0:h.toString())!==null&&p!==void 0?p:"";r(o)}catch{x.push({variant:"error",message:U("common.upload-error")})}})};return a.$$set=c=>{"id"in c&&l(0,t=c.id),"accept"in c&&l(1,n=c.accept),"onUpload"in c&&l(3,r=c.onUpload)},[t,n,g,r]}class ae extends J{constructor(e){super(),O(this,e,ne,le,F,{id:0,accept:1,onUpload:3})}}function G(a){let e,l;return e=new Y({props:{id:a[3],maxHeight:320,content:a[0],editable:a[6],copyable:!1}}),e.$on("change",a[7]),{c(){C(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,n){E(e,t,n),l=!0},p(t,n){const r={};n&8&&(r.id=t[3]),n&1&&(r.content=t[0]),n&64&&(r.editable=t[6]),e.$set(r)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){y(e,t)}}}function H(a){let e,l;return e=new ee({props:{text:U("common.upload-json"),topRight:!0,$$slots:{default:[ie]},$$scope:{ctx:a}}}),{c(){C(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,n){E(e,t,n),l=!0},p(t,n){const r={};n&2056&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){y(e,t)}}}function ie(a){let e,l;return e=new ae({props:{id:a[3]+"-input-file-upload",onUpload:a[8]}}),{c(){C(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,n){E(e,t,n),l=!0},p(t,n){const r={};n&8&&(r.id=t[3]+"-input-file-upload"),e.$set(r)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){y(e,t)}}}function oe(a){let e,l,t,n,r=[a[2],a[6]],g,c,i,f=(a[1]?U("common.input-valid-json"):a[5])+"",v,_,h,p;l=new $({props:{for:a[3],label:a[4]}});let o=G(a),u=a[6]&&H(a);return{c(){e=j("div"),C(l.$$.fragment),t=D(),n=j("div"),o.c(),g=D(),u&&u.c(),c=D(),i=j("span"),v=W(f),this.h()},l(s){e=S(s,"DIV",{class:!0});var m=P(e);V(l.$$.fragment,m),t=A(m),n=S(m,"DIV",{class:!0});var w=P(n);o.l(w),g=A(w),u&&u.l(w),w.forEach(T),c=A(m),i=S(m,"SPAN",{class:!0,role:!0});var N=P(i);v=Q(N,f),N.forEach(T),m.forEach(T),this.h()},h(){d(n,"class","flex gap-2"),d(i,"class",_="text-xs "+(a[1]?"text-danger":"text-primary")+" inline-block"),d(i,"role",h=a[1]?"alert":null),q(i,"hidden",!a[5]&&!a[1]),d(e,"class","flex flex-col gap-2")},m(s,m){L(s,e,m),E(l,e,null),I(e,t),I(e,n),o.m(n,null),I(n,g),u&&u.m(n,null),I(e,c),I(e,i),I(i,v),p=!0},p(s,[m]){const w={};m&8&&(w.for=s[3]),m&16&&(w.label=s[4]),l.$set(w),m&68&&F(r,r=[s[2],s[6]])?(R(),k(o,1,1,K),B(),o=G(s),o.c(),b(o,1),o.m(n,g)):o.p(s,m),s[6]?u?(u.p(s,m),m&64&&b(u,1)):(u=H(s),u.c(),b(u,1),u.m(n,null)):u&&(R(),k(u,1,1,()=>{u=null}),B()),(!p||m&34)&&f!==(f=(s[1]?U("common.input-valid-json"):s[5])+"")&&M(v,f),(!p||m&2&&_!==(_="text-xs "+(s[1]?"text-danger":"text-primary")+" inline-block"))&&d(i,"class",_),(!p||m&2&&h!==(h=s[1]?"alert":null))&&d(i,"role",h),(!p||m&34)&&q(i,"hidden",!s[5]&&!s[1])},i(s){p||(b(l.$$.fragment,s),b(o),b(u),p=!0)},o(s){k(l.$$.fragment,s),k(o),k(u),p=!1},d(s){s&&T(e),y(l),o.d(s),u&&u.d()}}}function re(a,e,l){let{id:t=te()}=e,{error:n=!1}=e,{input:r}=e,{label:g=U("workflows.signal-payload-input-label")}=e,{loading:c=!1}=e,{hintText:i=U("workflows.signal-payload-input-label-hint")}=e,{editing:f=!0}=e;const v=o=>{if(!r)return!0;try{return JSON.parse(o),!0}catch{return!1}},_=o=>{l(0,r=o.detail)},h=()=>{l(0,r=""),l(2,c=!1)},p=o=>{l(0,r=o)};return X(h),a.$$set=o=>{"id"in o&&l(3,t=o.id),"error"in o&&l(1,n=o.error),"input"in o&&l(0,r=o.input),"label"in o&&l(4,g=o.label),"loading"in o&&l(2,c=o.loading),"hintText"in o&&l(5,i=o.hintText),"editing"in o&&l(6,f=o.editing)},a.$$.update=()=>{a.$$.dirty&1&&l(1,n=!v(r))},[r,n,c,t,g,i,f,_,p]}class he extends J{constructor(e){super(),O(this,e,re,oe,F,{id:3,error:1,input:0,label:4,loading:2,hintText:5,editing:6})}}export{he as P};
