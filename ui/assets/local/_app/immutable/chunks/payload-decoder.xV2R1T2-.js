import{s as V,a as T,u as E,g as I,e as S,c as h}from"./scheduler.CnYDgCRb.js";import{S as U,i as W,t as q,b as w}from"./index.DW7Zsqzm.js";import{p as B}from"./stores.WX_QxltC.js";import{a as j}from"./auth-user.BeY95IZX.js";import{c as z,d as F}from"./decode-payload.C6Tmj9H5.js";import{g as G,a as H,b as J}from"./data-encoder.COB4ArcW.js";import{s as m}from"./parse-with-big-int.DJQKqIvA.js";const K=e=>({decodedValue:e&1}),C=e=>({decodedValue:e[0]});function L(e){let a;const s=e[10].default,o=T(s,e,e[9],C);return{c(){o&&o.c()},l(t){o&&o.l(t)},m(t,d){o&&o.m(t,d),a=!0},p(t,[d]){o&&o.p&&(!a||d&513)&&E(o,s,t,t[9],a?S(s,t[9],d,K):I(t[9]),C)},i(t){a||(q(o,t),a=!0)},o(t){w(o,t),a=!1},d(t){o&&o.d(t)}}}function M(e,a,s){let o,t,d,g,y,c;h(e,j,n=>s(12,y=n)),h(e,B,n=>s(8,c=n));let{$$slots:P={},$$scope:k}=a;var r;let{value:i}=a,{key:l=""}=a,{onDecode:u=void 0}=a,A=l&&(i!=null&&i[l])?i[l]:i,f=m(A);const D=async n=>{try{const p=await z(n,c.params.namespace,g,y.accessToken),_=F(p),b=l&&(_==null?void 0:_[l]);b?s(0,f=m(b)):s(0,f=m(_)),u&&u(f)}catch{console.error("Could not decode payloads")}};return e.$$set=n=>{"value"in n&&s(1,i=n.value),"key"in n&&s(2,l=n.key),"onDecode"in n&&s(3,u=n.onDecode),"$$scope"in n&&s(9,k=n.$$scope)},e.$$.update=()=>{e.$$.dirty&256&&s(7,o=G(c.data.settings)),e.$$.dirty&256&&s(6,t=H(c.data.settings)),e.$$.dirty&256&&s(5,d=J(c.data.settings)),e.$$.dirty&496&&(g={...c.data.settings,codec:{...s(4,r=c.data.settings)===null||r===void 0?void 0:r.codec,endpoint:o,passAccessToken:t,includeCredentials:d}}),e.$$.dirty&2&&D(i)},[f,i,l,u,r,d,t,o,c,k,P]}class x extends U{constructor(a){super(),W(this,a,M,L,V,{value:1,key:2,onDecode:3})}}export{x as P};
