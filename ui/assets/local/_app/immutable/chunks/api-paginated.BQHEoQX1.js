import{s as ze,a as M,b as W,d as C,i as Y,p as De,u as F,g as H,e as U,f as E,C as ae,c as ye,V as xe,y as ie,z as Le,w as se,h as J,t as V,j as G,k as Q,l as q,m as R,n as y,q as ee}from"./scheduler.CnYDgCRb.js";import{S as Ne,i as Ee,c as A,a as K,m as B,t as S,b as P,d as T,g as Ae,e as Ke}from"./index.DW7Zsqzm.js";import{A as Be}from"./alert.BmiNYDVZ.js";import{E as Se}from"./empty-state.LMdRD7f9.js";import{I as oe}from"./icon-button.DzzBiA7u.js";import{L as Te}from"./loading.U4sbptnk.js";import{F as Me}from"./filter-select.Crmwj-pA.js";import{d as re,w as Fe}from"./entry.CSEXpcL8.js";import{p as He}from"./stores.E7ifrCEl.js";import{p as Pe,b as Ue,o as Ie,d as X}from"./pagination.CRezhjJV.js";import{m as Oe}from"./has.HNIa2swf.js";import{P as Re}from"./index.Bc3UY8e3.js";const le={key:Pe,loading:!0,updating:!1,hasNext:!1,hasPrevious:!1,index:0,previousPageSize:X,pageSize:X,indexData:{},visibleItems:[],hasNextIndexData:!1,indexStart:0,indexEnd:0,activeIndex:0},fe=s=>{const e=s[0];if(!e)return X;const i=parseInt(e.toString());return isNaN(i)?X:i},We=(s,e=void 0)=>{if(e){const i=parseInt(e.toString());return isNaN(i)?fe(s):i}else return fe(s)};function Ce(s=Ie,e=void 0){const i=We(s,e),t=Fe({...le,previousPageSize:i,pageSize:i}),{set:n,update:a}=t,o=re([He],([r])=>{const f=r.url.searchParams.get(Pe);return f?Ue(f):void 0}),{subscribe:m}=re([t,o],([r,f])=>{var p,v,k;const b=((p=r.indexData[r.index])==null?void 0:p.items)??[],_=((v=r.indexData[r.index])==null?void 0:v.start)??0,u=((k=r.indexData[r.index])==null?void 0:k.end)??0,d=!!r.indexData[r.index+1];return{...r,visibleItems:b,indexStart:_,indexEnd:u,hasNextIndexData:d,pageSize:f??r.pageSize}}),l=(r,f,b)=>{const _=b.index,u={...b,indexData:{...b.indexData},hasNext:!!r,updating:!1,loading:!1};return f.length?(u.indexData[_]?(u.index=_+1,u.indexData[u.index]={nextToken:r,start:u.indexData[_].end+1,end:u.indexData[_].end+f.length,items:f},u.hasPrevious=!0):(u.indexData[_]={nextToken:r,start:1,end:f.length,items:f},u.hasPrevious=!1),u):{...u,hasNext:!1}},g=r=>{var b;const f={...r,index:r.index+1,hasPrevious:!0,loading:!1,updating:!1};return(b=f.indexData[f.index])!=null&&b.nextToken||(f.hasNext=!1),f},h=r=>{const f={...r,hasNext:!0,updating:!1,loading:!1,index:r.index>0?r.index-1:0};return f.index===0&&(f.hasPrevious=!1),f},z=r=>{var _,u;const f={...r},b=((u=(_=f.indexData[f.index])==null?void 0:_.items)==null?void 0:u.length)??0;return f.activeIndex<b-1&&(f.activeIndex=f.activeIndex+1),f},x=r=>{const f={...r},b=f.activeIndex>=1?f.activeIndex-1:0;return f.activeIndex=b,f},L=(r,f)=>({...r,activeIndex:f}),I=(r,f)=>({...r,pageSize:f,previousPageSize:f,index:0,indexData:{},loading:!0,updating:!1});return{subscribe:m,nextPageWithItems:(r,f)=>a(b=>l(r,f,b)),nextPage:()=>a(r=>g(r)),previousPage:()=>a(r=>h(r)),setUpdating:()=>a(r=>({...r,updating:!0})),reset:()=>n(le),resetPageSize:r=>a(f=>I(f,r)),nextRow:()=>a(r=>z(r)),previousRow:()=>a(r=>x(r)),setActiveIndex:r=>a(f=>L(f,r))}}const Ve=s=>({visibleItems:s&2048}),ce=s=>({visibleItems:s[11].visibleItems}),qe=s=>({}),ue=s=>({slot:"caption"}),we=s=>({visibleItems:s&2048}),de=s=>({slot:"headers",visibleItems:s[11].visibleItems}),je=s=>({}),me=s=>({}),Je=s=>({}),ge=s=>({}),Ge=s=>({}),_e=s=>({}),Qe=s=>({}),pe=s=>({}),Xe=s=>({visibleItems:s&2048}),he=s=>({visibleItems:s[11].visibleItems});function Ye(s){let e;const i=s[24].default,t=M(i,s,s[25],ce);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,a){t&&t.m(n,a),e=!0},p(n,a){t&&t.p&&(!e||a&33556480)&&F(t,i,n,n[25],e?U(i,n[25],a,Ve):H(n[25]),ce)},i(n){e||(S(t,n),e=!0)},o(n){P(t,n),e=!1},d(n){t&&t.d(n)}}}function Ze(s){let e;const i=s[24].caption,t=M(i,s,s[25],ue);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,a){t&&t.m(n,a),e=!0},p(n,a){t&&t.p&&(!e||a&33554432)&&F(t,i,n,n[25],e?U(i,n[25],a,qe):H(n[25]),ue)},i(n){e||(S(t,n),e=!0)},o(n){P(t,n),e=!1},d(n){t&&t.d(n)}}}function $e(s){let e;const i=s[24].headers,t=M(i,s,s[25],de);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,a){t&&t.m(n,a),e=!0},p(n,a){t&&t.p&&(!e||a&33556480)&&F(t,i,n,n[25],e?U(i,n[25],a,we):H(n[25]),de)},i(n){e||(S(t,n),e=!0)},o(n){P(t,n),e=!1},d(n){t&&t.d(n)}}}function et(s){let e;const i=s[24].empty,t=M(i,s,s[25],me),n=t||at(s);return{c(){n.c()},l(a){n.l(a)},m(a,o){n.m(a,o),e=!0},p(a,o){t?t.p&&(!e||o&33554432)&&F(t,i,a,a[25],e?U(i,a[25],o,je):H(a[25]),me):n.p&&(!e||o&48)&&n.p(a,e?o:-1)},i(a){e||(S(n,a),e=!0)},o(a){P(n,a),e=!1},d(a){n.d(a)}}}function tt(s){let e;const i=s[24].error,t=M(i,s,s[25],ge),n=t||st(s);return{c(){n.c()},l(a){n.l(a)},m(a,o){n.m(a,o),e=!0},p(a,o){t?t.p&&(!e||o&33554432)&&F(t,i,a,a[25],e?U(i,a[25],o,Je):H(a[25]),ge):n.p&&(!e||o&4288)&&n.p(a,e?o:-1)},i(a){e||(S(n,a),e=!0)},o(a){P(n,a),e=!1},d(a){n.d(a)}}}function nt(s){let e;const i=s[24].loading,t=M(i,s,s[25],_e),n=t||ot();return{c(){n.c()},l(a){n.l(a)},m(a,o){n.m(a,o),e=!0},p(a,o){t&&t.p&&(!e||o&33554432)&&F(t,i,a,a[25],e?U(i,a[25],o,Ge):H(a[25]),_e)},i(a){e||(S(n,a),e=!0)},o(a){P(n,a),e=!1},d(a){n.d(a)}}}function at(s){let e,i;return e=new Se({props:{title:s[4],content:s[5]}}),{c(){A(e.$$.fragment)},l(t){K(e.$$.fragment,t)},m(t,n){B(e,t,n),i=!0},p(t,n){const a={};n&16&&(a.title=t[4]),n&32&&(a.content=t[5]),e.$set(a)},i(t){i||(S(e.$$.fragment,t),i=!0)},o(t){P(e.$$.fragment,t),i=!1},d(t){T(e,t)}}}function it(s){var t;let e,i;return e=new Be({props:{intent:"error",title:((t=s[12])==null?void 0:t.message)??s[7]}}),{c(){A(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,a){B(e,n,a),i=!0},p(n,a){var m;const o={};a&4224&&(o.title=((m=n[12])==null?void 0:m.message)??n[7]),e.$set(o)},i(n){i||(S(e.$$.fragment,n),i=!0)},o(n){P(e.$$.fragment,n),i=!1},d(n){T(e,n)}}}function st(s){let e,i;return e=new Se({props:{title:s[6],$$slots:{default:[it]},$$scope:{ctx:s}}}),{c(){A(e.$$.fragment)},l(t){K(e.$$.fragment,t)},m(t,n){B(e,t,n),i=!0},p(t,n){const a={};n&64&&(a.title=t[6]),n&33558656&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){i||(S(e.$$.fragment,t),i=!0)},o(t){P(e.$$.fragment,t),i=!1},d(t){T(e,t)}}}function ot(s){let e,i;return e=new Te({}),{c(){A(e.$$.fragment)},l(t){K(e.$$.fragment,t)},m(t,n){B(e,t,n),i=!0},i(t){i||(S(e.$$.fragment,t),i=!0)},o(t){P(e.$$.fragment,t),i=!1},d(t){T(e,t)}}}function rt(s){let e,i,t,n;const a=[nt,tt,et],o=[];function m(l,g){return l[11].loading?0:l[12]?1:2}return e=m(s),i=o[e]=a[e](s),{c(){i.c(),t=se()},l(l){i.l(l),t=se()},m(l,g){o[e].m(l,g),Y(l,t,g),n=!0},p(l,g){let h=e;e=m(l),e===h?o[e].p(l,g):(Ae(),P(o[h],1,1,()=>{o[h]=null}),Ke(),i=o[e],i?i.p(l,g):(i=o[e]=a[e](l),i.c()),S(i,1),i.m(t.parentNode,t))},i(l){n||(S(i),n=!0)},o(l){P(i),n=!1},d(l){l&&E(t),o[e].d(l)}}}function lt(s){let e,i;return e=new Me({props:{label:s[3],parameter:s[11].key,value:String(s[11].pageSize),options:s[10]}}),{c(){A(e.$$.fragment)},l(t){K(e.$$.fragment,t)},m(t,n){B(e,t,n),i=!0},p(t,n){const a={};n&8&&(a.label=t[3]),n&2048&&(a.parameter=t[11].key),n&2048&&(a.value=String(t[11].pageSize)),n&1024&&(a.options=t[10]),e.$set(a)},i(t){i||(S(e.$$.fragment,t),i=!0)},o(t){P(e.$$.fragment,t),i=!1},d(t){T(e,t)}}}function be(s){let e,i,t;return{c(){e=J("p"),i=V("of "),t=V(s[2])},l(n){e=G(n,"P",{});var a=Q(e);i=q(a,"of "),t=q(a,s[2]),a.forEach(E)},m(n,a){Y(n,e,a),y(e,i),y(e,t)},p(n,a){a&4&&ee(t,n[2])},d(n){n&&E(e)}}}function ft(s){let e,i,t,n,a,o,m=s[11].indexStart+"",l,g,h=s[11].indexEnd+"",z,x,L,I,r,f;const b=s[24]["actions-end-additional"],_=M(b,s,s[25],pe);t=new oe({props:{label:s[8],disabled:!s[11].hasPrevious,icon:"arrow-left"}}),t.$on("click",s[13].previousPage);let u=s[2]&&be(s);return I=new oe({props:{label:s[9],disabled:!s[11].hasNext,icon:"arrow-right"}}),I.$on("click",s[14]),{c(){e=J("nav"),_&&_.c(),i=W(),A(t.$$.fragment),n=W(),a=J("div"),o=J("p"),l=V(m),g=V("–"),z=V(h),x=W(),u&&u.c(),L=W(),A(I.$$.fragment),this.h()},l(d){e=G(d,"NAV",{class:!0,"aria-label":!0,slot:!0});var p=Q(e);_&&_.l(p),i=C(p),K(t.$$.fragment,p),n=C(p),a=G(p,"DIV",{class:!0});var v=Q(a);o=G(v,"P",{});var k=Q(o);l=q(k,m),g=q(k,"–"),z=q(k,h),k.forEach(E),x=C(v),u&&u.l(v),v.forEach(E),L=C(p),K(I.$$.fragment,p),p.forEach(E),this.h()},h(){R(a,"class","flex gap-1"),R(e,"class","flex shrink-0 items-center gap-2"),R(e,"aria-label",r=s[16]["aria-label"]),R(e,"slot","actions-end")},m(d,p){Y(d,e,p),_&&_.m(e,null),y(e,i),B(t,e,null),y(e,n),y(e,a),y(a,o),y(o,l),y(o,g),y(o,z),y(a,x),u&&u.m(a,null),y(e,L),B(I,e,null),f=!0},p(d,p){_&&_.p&&(!f||p&33554432)&&F(_,b,d,d[25],f?U(b,d[25],p,Qe):H(d[25]),pe);const v={};p&256&&(v.label=d[8]),p&2048&&(v.disabled=!d[11].hasPrevious),t.$set(v),(!f||p&2048)&&m!==(m=d[11].indexStart+"")&&ee(l,m),(!f||p&2048)&&h!==(h=d[11].indexEnd+"")&&ee(z,h),d[2]?u?u.p(d,p):(u=be(d),u.c(),u.m(a,null)):u&&(u.d(1),u=null);const k={};p&512&&(k.label=d[9]),p&2048&&(k.disabled=!d[11].hasNext),I.$set(k),(!f||p&65536&&r!==(r=d[16]["aria-label"]))&&R(e,"aria-label",r)},i(d){f||(S(_,d),S(t.$$.fragment,d),S(I.$$.fragment,d),f=!0)},o(d){P(_,d),P(t.$$.fragment,d),P(I.$$.fragment,d),f=!1},d(d){d&&E(e),_&&_.d(d),T(t),u&&u.d(),T(I)}}}function ct(s){let e,i,t,n,a;const o=s[24].header,m=M(o,s,s[25],he);return i=new Re({props:{updating:s[11].updating,visibleItems:s[11].visibleItems,maxHeight:s[1],id:s[0],$$slots:{"actions-end":[ft],"actions-start":[lt],empty:[rt],headers:[$e],caption:[Ze],default:[Ye]},$$scope:{ctx:s}}}),{c(){m&&m.c(),e=W(),A(i.$$.fragment)},l(l){m&&m.l(l),e=C(l),K(i.$$.fragment,l)},m(l,g){m&&m.m(l,g),Y(l,e,g),B(i,l,g),t=!0,n||(a=De(window,"keydown",s[15]),n=!0)},p(l,[g]){m&&m.p&&(!t||g&33556480)&&F(m,o,l,l[25],t?U(o,l[25],g,Xe):H(l[25]),he);const h={};g&2048&&(h.updating=l[11].updating),g&2048&&(h.visibleItems=l[11].visibleItems),g&2&&(h.maxHeight=l[1]),g&1&&(h.id=l[0]),g&33628156&&(h.$$scope={dirty:g,ctx:l}),i.$set(h)},i(l){t||(S(m,l),S(i.$$.fragment,l),t=!0)},o(l){P(m,l),P(i.$$.fragment,l),t=!1},d(l){l&&E(e),m&&m.d(l),T(i,l),n=!1,a()}}}function ut(s,e,i){let t;const n=["id","maxHeight","onError","onFetch","onShiftUp","onShiftDown","onSpace","total","pageSizeSelectLabel","emptyStateTitle","emptyStateMessage","errorTitle","errorMessage","itemsKeyname","previousButtonLabel","nextButtonLabel","pageSizeOptions"];let a=ae(e,n),o,{$$slots:m={},$$scope:l}=e,{id:g=null}=e,{maxHeight:h=""}=e,{onError:z=void 0}=e,{onFetch:x}=e,{onShiftUp:L=void 0}=e,{onShiftDown:I=void 0}=e,{onSpace:r=void 0}=e,{total:f=""}=e,{pageSizeSelectLabel:b}=e,{emptyStateTitle:_=""}=e,{emptyStateMessage:u=""}=e,{errorTitle:d=""}=e,{errorMessage:p=""}=e,{itemsKeyname:v="items"}=e,{previousButtonLabel:k}=e,{nextButtonLabel:te}=e,{pageSizeOptions:w=Ie}=e,D=Ce(w,w[0]);ye(s,D,c=>i(11,o=c));let O;function ve(){O&&i(12,O=void 0)}xe(()=>{j()});async function j(){const c=await x();try{const N=await c(o.pageSize,""),{nextPageToken:Z}=N,$=N[v]||[];D.nextPageWithItems(Z,$)}catch(N){i(12,O=N),z&&z(O)}}async function ne(){if(ve(),D.setUpdating(),o.hasNextIndexData)D.nextPage();else try{const N=await(await x())(o.pageSize,o.indexData[o.index].nextToken),{nextPageToken:Z}=N,$=N[v]||[];D.nextPageWithItems(Z,$)}catch(c){Oe(c)&&z&&z(c)}}async function ke(c){const N=c.shiftKey;switch(c.code){case"ArrowRight":case"KeyL":o.hasNext&&!o.updating&&ne();break;case"ArrowLeft":case"KeyH":o.hasPrevious&&!o.updating&&D.previousPage();break;case"ArrowUp":case"KeyK":N&&L?(L(c),D.reset(),j()):D.previousRow();break;case"ArrowDown":case"KeyJ":N&&I?(I(c),D.reset(),j()):D.nextRow();break;case"Space":r&&r(c);break}}return s.$$set=c=>{e=ie(ie({},e),Le(c)),i(16,a=ae(e,n)),"id"in c&&i(0,g=c.id),"maxHeight"in c&&i(1,h=c.maxHeight),"onError"in c&&i(17,z=c.onError),"onFetch"in c&&i(18,x=c.onFetch),"onShiftUp"in c&&i(19,L=c.onShiftUp),"onShiftDown"in c&&i(20,I=c.onShiftDown),"onSpace"in c&&i(21,r=c.onSpace),"total"in c&&i(2,f=c.total),"pageSizeSelectLabel"in c&&i(3,b=c.pageSizeSelectLabel),"emptyStateTitle"in c&&i(4,_=c.emptyStateTitle),"emptyStateMessage"in c&&i(5,u=c.emptyStateMessage),"errorTitle"in c&&i(6,d=c.errorTitle),"errorMessage"in c&&i(7,p=c.errorMessage),"itemsKeyname"in c&&i(22,v=c.itemsKeyname),"previousButtonLabel"in c&&i(8,k=c.previousButtonLabel),"nextButtonLabel"in c&&i(9,te=c.nextButtonLabel),"pageSizeOptions"in c&&i(10,w=c.pageSizeOptions),"$$scope"in c&&i(25,l=c.$$scope)},s.$$.update=()=>{s.$$.dirty&2048&&i(23,t=!o.loading&&o.pageSize!==o.previousPageSize),s.$$.dirty&8390656&&t&&(D.resetPageSize(o.pageSize),j())},[g,h,f,b,_,u,d,p,k,te,w,o,O,D,ne,ke,a,z,x,L,I,r,v,t,m,l]}class zt extends Ne{constructor(e){super(),Ee(this,e,ut,ct,ze,{id:0,maxHeight:1,onError:17,onFetch:18,onShiftUp:19,onShiftDown:20,onSpace:21,total:2,pageSizeSelectLabel:3,emptyStateTitle:4,emptyStateMessage:5,errorTitle:6,errorMessage:7,itemsKeyname:22,previousButtonLabel:8,nextButtonLabel:9,pageSizeOptions:10})}}export{zt as A};
