import{s as ze,a as M,d as E,u as F,g as U,b as H,i as Y,p as De,e as W,f as C,C as ne,c as ye,U as xe,y as ie,z as Le,w as se,o as ee,j as R,h as y,k as J,l as G,m as w,n as Q,t as V}from"./scheduler.gES7FyoG.js";import{S as Ne,i as Ee,d as A,t as S,a as v,m as K,c as B,b as T,g as Ae,e as Ke}from"./index.DpnGbpCk.js";import{A as Be}from"./alert.B7mQa_SE.js";import{E as Se}from"./empty-state.D2QxL8QK.js";import{I as oe}from"./icon-button.Co-eQ-rB.js";import{L as Te}from"./loading.DF-snJ6W.js";import{F as Me}from"./filter-select.D137J4uW.js";import{w as Fe,d as re}from"./entry.C48IJOmv.js";import{p as Ue}from"./stores.BcCtUVTJ.js";import{o as ve,d as X,p as Pe,b as He}from"./pagination.BBB5JJ28.js";import{m as Oe}from"./has.BqNaQ_Wm.js";import{P as Re}from"./index.6MSjamtI.js";const le={key:Pe,loading:!0,updating:!1,hasNext:!1,hasPrevious:!1,index:0,previousPageSize:X,pageSize:X,indexData:{},visibleItems:[],hasNextIndexData:!1,indexStart:0,indexEnd:0,activeIndex:0},fe=s=>{const e=s[0];if(!e)return X;const i=parseInt(e.toString());return isNaN(i)?X:i},We=(s,e=void 0)=>{if(e){const i=parseInt(e.toString());return isNaN(i)?fe(s):i}else return fe(s)};function Ce(s=ve,e=void 0){const i=We(s,e),t=Fe({...le,previousPageSize:i,pageSize:i}),{set:a,update:n}=t,o=re([Ue],([r])=>{const f=r.url.searchParams.get(Pe);return f?He(f):void 0}),{subscribe:d}=re([t,o],([r,f])=>{var p,I,k;const b=((p=r.indexData[r.index])==null?void 0:p.items)??[],_=((I=r.indexData[r.index])==null?void 0:I.start)??0,u=((k=r.indexData[r.index])==null?void 0:k.end)??0,m=!!r.indexData[r.index+1];return{...r,visibleItems:b,indexStart:_,indexEnd:u,hasNextIndexData:m,pageSize:f??r.pageSize}}),l=(r,f,b)=>{const _=b.index,u={...b,indexData:{...b.indexData},hasNext:!!r,updating:!1,loading:!1};return f.length?(u.indexData[_]?(u.index=_+1,u.indexData[u.index]={nextToken:r,start:u.indexData[_].end+1,end:u.indexData[_].end+f.length,items:f},u.hasPrevious=!0):(u.indexData[_]={nextToken:r,start:1,end:f.length,items:f},u.hasPrevious=!1),u):{...u,hasNext:!1}},g=r=>{var b;const f={...r,index:r.index+1,hasPrevious:!0,loading:!1,updating:!1};return(b=f.indexData[f.index])!=null&&b.nextToken||(f.hasNext=!1),f},h=r=>{const f={...r,hasNext:!0,updating:!1,loading:!1,index:r.index>0?r.index-1:0};return f.index===0&&(f.hasPrevious=!1),f},z=r=>{var _,u;const f={...r},b=((u=(_=f.indexData[f.index])==null?void 0:_.items)==null?void 0:u.length)??0;return f.activeIndex<b-1&&(f.activeIndex=f.activeIndex+1),f},x=r=>{const f={...r},b=f.activeIndex>=1?f.activeIndex-1:0;return f.activeIndex=b,f},L=(r,f)=>({...r,activeIndex:f}),P=(r,f)=>({...r,pageSize:f,previousPageSize:f,index:0,indexData:{},loading:!0,updating:!1});return{subscribe:d,nextPageWithItems:(r,f)=>n(b=>l(r,f,b)),nextPage:()=>n(r=>g(r)),previousPage:()=>n(r=>h(r)),setUpdating:()=>n(r=>({...r,updating:!0})),reset:()=>a(le),resetPageSize:r=>n(f=>P(f,r)),nextRow:()=>n(r=>z(r)),previousRow:()=>n(r=>x(r)),setActiveIndex:r=>n(f=>L(f,r))}}const we=s=>({visibleItems:s&2048}),ce=s=>({visibleItems:s[11].visibleItems}),Ve=s=>({}),ue=s=>({slot:"caption"}),je=s=>({visibleItems:s&2048}),me=s=>({slot:"headers",visibleItems:s[11].visibleItems}),qe=s=>({}),de=s=>({}),Je=s=>({}),ge=s=>({}),Ge=s=>({}),_e=s=>({}),Qe=s=>({}),pe=s=>({}),Xe=s=>({visibleItems:s&2048}),he=s=>({visibleItems:s[11].visibleItems});function Ye(s){let e;const i=s[24].default,t=M(i,s,s[25],ce);return{c(){t&&t.c()},l(a){t&&t.l(a)},m(a,n){t&&t.m(a,n),e=!0},p(a,n){t&&t.p&&(!e||n&33556480)&&F(t,i,a,a[25],e?H(i,a[25],n,we):U(a[25]),ce)},i(a){e||(v(t,a),e=!0)},o(a){S(t,a),e=!1},d(a){t&&t.d(a)}}}function Ze(s){let e;const i=s[24].caption,t=M(i,s,s[25],ue);return{c(){t&&t.c()},l(a){t&&t.l(a)},m(a,n){t&&t.m(a,n),e=!0},p(a,n){t&&t.p&&(!e||n&33554432)&&F(t,i,a,a[25],e?H(i,a[25],n,Ve):U(a[25]),ue)},i(a){e||(v(t,a),e=!0)},o(a){S(t,a),e=!1},d(a){t&&t.d(a)}}}function $e(s){let e;const i=s[24].headers,t=M(i,s,s[25],me);return{c(){t&&t.c()},l(a){t&&t.l(a)},m(a,n){t&&t.m(a,n),e=!0},p(a,n){t&&t.p&&(!e||n&33556480)&&F(t,i,a,a[25],e?H(i,a[25],n,je):U(a[25]),me)},i(a){e||(v(t,a),e=!0)},o(a){S(t,a),e=!1},d(a){t&&t.d(a)}}}function et(s){let e;const i=s[24].empty,t=M(i,s,s[25],de),a=t||nt(s);return{c(){a&&a.c()},l(n){a&&a.l(n)},m(n,o){a&&a.m(n,o),e=!0},p(n,o){t?t.p&&(!e||o&33554432)&&F(t,i,n,n[25],e?H(i,n[25],o,qe):U(n[25]),de):a&&a.p&&(!e||o&48)&&a.p(n,e?o:-1)},i(n){e||(v(a,n),e=!0)},o(n){S(a,n),e=!1},d(n){a&&a.d(n)}}}function tt(s){let e;const i=s[24].error,t=M(i,s,s[25],ge),a=t||st(s);return{c(){a&&a.c()},l(n){a&&a.l(n)},m(n,o){a&&a.m(n,o),e=!0},p(n,o){t?t.p&&(!e||o&33554432)&&F(t,i,n,n[25],e?H(i,n[25],o,Je):U(n[25]),ge):a&&a.p&&(!e||o&4288)&&a.p(n,e?o:-1)},i(n){e||(v(a,n),e=!0)},o(n){S(a,n),e=!1},d(n){a&&a.d(n)}}}function at(s){let e;const i=s[24].loading,t=M(i,s,s[25],_e),a=t||ot();return{c(){a&&a.c()},l(n){a&&a.l(n)},m(n,o){a&&a.m(n,o),e=!0},p(n,o){t&&t.p&&(!e||o&33554432)&&F(t,i,n,n[25],e?H(i,n[25],o,Ge):U(n[25]),_e)},i(n){e||(v(a,n),e=!0)},o(n){S(a,n),e=!1},d(n){a&&a.d(n)}}}function nt(s){let e,i;return e=new Se({props:{title:s[4],content:s[5]}}),{c(){T(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,a){K(e,t,a),i=!0},p(t,a){const n={};a&16&&(n.title=t[4]),a&32&&(n.content=t[5]),e.$set(n)},i(t){i||(v(e.$$.fragment,t),i=!0)},o(t){S(e.$$.fragment,t),i=!1},d(t){A(e,t)}}}function it(s){var t;let e,i;return e=new Be({props:{intent:"error",title:((t=s[12])==null?void 0:t.message)??s[7]}}),{c(){T(e.$$.fragment)},l(a){B(e.$$.fragment,a)},m(a,n){K(e,a,n),i=!0},p(a,n){var d;const o={};n&4224&&(o.title=((d=a[12])==null?void 0:d.message)??a[7]),e.$set(o)},i(a){i||(v(e.$$.fragment,a),i=!0)},o(a){S(e.$$.fragment,a),i=!1},d(a){A(e,a)}}}function st(s){let e,i;return e=new Se({props:{title:s[6],$$slots:{default:[it]},$$scope:{ctx:s}}}),{c(){T(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,a){K(e,t,a),i=!0},p(t,a){const n={};a&64&&(n.title=t[6]),a&33558656&&(n.$$scope={dirty:a,ctx:t}),e.$set(n)},i(t){i||(v(e.$$.fragment,t),i=!0)},o(t){S(e.$$.fragment,t),i=!1},d(t){A(e,t)}}}function ot(s){let e,i;return e=new Te({}),{c(){T(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,a){K(e,t,a),i=!0},i(t){i||(v(e.$$.fragment,t),i=!0)},o(t){S(e.$$.fragment,t),i=!1},d(t){A(e,t)}}}function rt(s){let e,i,t,a;const n=[at,tt,et],o=[];function d(l,g){return l[11].loading?0:l[12]?1:2}return e=d(s),i=o[e]=n[e](s),{c(){i.c(),t=se()},l(l){i.l(l),t=se()},m(l,g){o[e].m(l,g),Y(l,t,g),a=!0},p(l,g){let h=e;e=d(l),e===h?o[e].p(l,g):(Ae(),S(o[h],1,1,()=>{o[h]=null}),Ke(),i=o[e],i?i.p(l,g):(i=o[e]=n[e](l),i.c()),v(i,1),i.m(t.parentNode,t))},i(l){a||(v(i),a=!0)},o(l){S(i),a=!1},d(l){l&&E(t),o[e].d(l)}}}function lt(s){let e,i;return e=new Me({props:{label:s[3],parameter:s[11].key,value:String(s[11].pageSize),options:s[10]}}),{c(){T(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,a){K(e,t,a),i=!0},p(t,a){const n={};a&8&&(n.label=t[3]),a&2048&&(n.parameter=t[11].key),a&2048&&(n.value=String(t[11].pageSize)),a&1024&&(n.options=t[10]),e.$set(n)},i(t){i||(v(e.$$.fragment,t),i=!0)},o(t){S(e.$$.fragment,t),i=!1},d(t){A(e,t)}}}function be(s){let e,i,t;return{c(){e=Q("p"),i=V("of "),t=V(s[2])},l(a){e=J(a,"P",{});var n=G(e);i=w(n,"of "),t=w(n,s[2]),n.forEach(E)},m(a,n){Y(a,e,n),y(e,i),y(e,t)},p(a,n){n&4&&ee(t,a[2])},d(a){a&&E(e)}}}function ft(s){let e,i,t,a,n,o,d=s[11].indexStart+"",l,g,h=s[11].indexEnd+"",z,x,L,P,r,f;const b=s[24]["actions-end-additional"],_=M(b,s,s[25],pe);t=new oe({props:{label:s[8],disabled:!s[11].hasPrevious,icon:"arrow-left"}}),t.$on("click",s[13].previousPage);let u=s[2]&&be(s);return P=new oe({props:{label:s[9],disabled:!s[11].hasNext,icon:"arrow-right"}}),P.$on("click",s[14]),{c(){e=Q("nav"),_&&_.c(),i=C(),T(t.$$.fragment),a=C(),n=Q("div"),o=Q("p"),l=V(d),g=V("–"),z=V(h),x=C(),u&&u.c(),L=C(),T(P.$$.fragment),this.h()},l(m){e=J(m,"NAV",{class:!0,"aria-label":!0,slot:!0});var p=G(e);_&&_.l(p),i=W(p),B(t.$$.fragment,p),a=W(p),n=J(p,"DIV",{class:!0});var I=G(n);o=J(I,"P",{});var k=G(o);l=w(k,d),g=w(k,"–"),z=w(k,h),k.forEach(E),x=W(I),u&&u.l(I),I.forEach(E),L=W(p),B(P.$$.fragment,p),p.forEach(E),this.h()},h(){R(n,"class","flex gap-1"),R(e,"class","flex shrink-0 items-center gap-2"),R(e,"aria-label",r=s[16]["aria-label"]),R(e,"slot","actions-end")},m(m,p){Y(m,e,p),_&&_.m(e,null),y(e,i),K(t,e,null),y(e,a),y(e,n),y(n,o),y(o,l),y(o,g),y(o,z),y(n,x),u&&u.m(n,null),y(e,L),K(P,e,null),f=!0},p(m,p){_&&_.p&&(!f||p&33554432)&&F(_,b,m,m[25],f?H(b,m[25],p,Qe):U(m[25]),pe);const I={};p&256&&(I.label=m[8]),p&2048&&(I.disabled=!m[11].hasPrevious),t.$set(I),(!f||p&2048)&&d!==(d=m[11].indexStart+"")&&ee(l,d),(!f||p&2048)&&h!==(h=m[11].indexEnd+"")&&ee(z,h),m[2]?u?u.p(m,p):(u=be(m),u.c(),u.m(n,null)):u&&(u.d(1),u=null);const k={};p&512&&(k.label=m[9]),p&2048&&(k.disabled=!m[11].hasNext),P.$set(k),(!f||p&65536&&r!==(r=m[16]["aria-label"]))&&R(e,"aria-label",r)},i(m){f||(v(_,m),v(t.$$.fragment,m),v(P.$$.fragment,m),f=!0)},o(m){S(_,m),S(t.$$.fragment,m),S(P.$$.fragment,m),f=!1},d(m){m&&E(e),_&&_.d(m),A(t),u&&u.d(),A(P)}}}function ct(s){let e,i,t,a,n;const o=s[24].header,d=M(o,s,s[25],he);return i=new Re({props:{updating:s[11].updating,visibleItems:s[11].visibleItems,maxHeight:s[1],id:s[0],$$slots:{"actions-end":[ft],"actions-start":[lt],empty:[rt],headers:[$e],caption:[Ze],default:[Ye]},$$scope:{ctx:s}}}),{c(){d&&d.c(),e=C(),T(i.$$.fragment)},l(l){d&&d.l(l),e=W(l),B(i.$$.fragment,l)},m(l,g){d&&d.m(l,g),Y(l,e,g),K(i,l,g),t=!0,a||(n=De(window,"keydown",s[15]),a=!0)},p(l,[g]){d&&d.p&&(!t||g&33556480)&&F(d,o,l,l[25],t?H(o,l[25],g,Xe):U(l[25]),he);const h={};g&2048&&(h.updating=l[11].updating),g&2048&&(h.visibleItems=l[11].visibleItems),g&2&&(h.maxHeight=l[1]),g&1&&(h.id=l[0]),g&33628156&&(h.$$scope={dirty:g,ctx:l}),i.$set(h)},i(l){t||(v(d,l),v(i.$$.fragment,l),t=!0)},o(l){S(d,l),S(i.$$.fragment,l),t=!1},d(l){l&&E(e),d&&d.d(l),A(i,l),a=!1,n()}}}function ut(s,e,i){let t;const a=["id","maxHeight","onError","onFetch","onShiftUp","onShiftDown","onSpace","total","pageSizeSelectLabel","emptyStateTitle","emptyStateMessage","errorTitle","errorMessage","itemsKeyname","previousButtonLabel","nextButtonLabel","pageSizeOptions"];let n=ne(e,a),o,{$$slots:d={},$$scope:l}=e,{id:g=null}=e,{maxHeight:h=""}=e,{onError:z=void 0}=e,{onFetch:x}=e,{onShiftUp:L=void 0}=e,{onShiftDown:P=void 0}=e,{onSpace:r=void 0}=e,{total:f=""}=e,{pageSizeSelectLabel:b}=e,{emptyStateTitle:_=""}=e,{emptyStateMessage:u=""}=e,{errorTitle:m=""}=e,{errorMessage:p=""}=e,{itemsKeyname:I="items"}=e,{previousButtonLabel:k}=e,{nextButtonLabel:te}=e,{pageSizeOptions:j=ve}=e,D=Ce(j,j[0]);ye(s,D,c=>i(11,o=c));let O;function Ie(){O&&i(12,O=void 0)}xe(()=>{q()});async function q(){const c=await x();try{const N=await c(o.pageSize,""),{nextPageToken:Z}=N,$=N[I]||[];D.nextPageWithItems(Z,$)}catch(N){i(12,O=N),z&&z(O)}}async function ae(){if(Ie(),D.setUpdating(),o.hasNextIndexData)D.nextPage();else try{const N=await(await x())(o.pageSize,o.indexData[o.index].nextToken),{nextPageToken:Z}=N,$=N[I]||[];D.nextPageWithItems(Z,$)}catch(c){Oe(c)&&z&&z(c)}}async function ke(c){const N=c.shiftKey;switch(c.code){case"ArrowRight":case"KeyL":o.hasNext&&!o.updating&&ae();break;case"ArrowLeft":case"KeyH":o.hasPrevious&&!o.updating&&D.previousPage();break;case"ArrowUp":case"KeyK":N&&L?(L(c),D.reset(),q()):D.previousRow();break;case"ArrowDown":case"KeyJ":N&&P?(P(c),D.reset(),q()):D.nextRow();break;case"Space":r&&r(c);break}}return s.$$set=c=>{e=ie(ie({},e),Le(c)),i(16,n=ne(e,a)),"id"in c&&i(0,g=c.id),"maxHeight"in c&&i(1,h=c.maxHeight),"onError"in c&&i(17,z=c.onError),"onFetch"in c&&i(18,x=c.onFetch),"onShiftUp"in c&&i(19,L=c.onShiftUp),"onShiftDown"in c&&i(20,P=c.onShiftDown),"onSpace"in c&&i(21,r=c.onSpace),"total"in c&&i(2,f=c.total),"pageSizeSelectLabel"in c&&i(3,b=c.pageSizeSelectLabel),"emptyStateTitle"in c&&i(4,_=c.emptyStateTitle),"emptyStateMessage"in c&&i(5,u=c.emptyStateMessage),"errorTitle"in c&&i(6,m=c.errorTitle),"errorMessage"in c&&i(7,p=c.errorMessage),"itemsKeyname"in c&&i(22,I=c.itemsKeyname),"previousButtonLabel"in c&&i(8,k=c.previousButtonLabel),"nextButtonLabel"in c&&i(9,te=c.nextButtonLabel),"pageSizeOptions"in c&&i(10,j=c.pageSizeOptions),"$$scope"in c&&i(25,l=c.$$scope)},s.$$.update=()=>{s.$$.dirty&2048&&i(23,t=!o.loading&&o.pageSize!==o.previousPageSize),s.$$.dirty&8390656&&t&&(D.resetPageSize(o.pageSize),q())},[g,h,f,b,_,u,m,p,k,te,j,o,O,D,ae,ke,n,z,x,L,P,r,I,t,d,l]}class zt extends Ne{constructor(e){super(),Ee(this,e,ut,ct,ze,{id:0,maxHeight:1,onError:17,onFetch:18,onShiftUp:19,onShiftDown:20,onSpace:21,total:2,pageSizeSelectLabel:3,emptyStateTitle:4,emptyStateMessage:5,errorTitle:6,errorMessage:7,itemsKeyname:22,previousButtonLabel:8,nextButtonLabel:9,pageSizeOptions:10})}}export{zt as A};
