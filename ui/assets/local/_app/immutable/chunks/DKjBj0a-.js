import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{p as I,m as o,l as i,s as d,g as t,az as g,ah as W,a as w,f as z,b as B}from"./DYX0w8bX.js";import{c as j,a as q}from"./Bz76f8pg.js";import{s as F}from"./CFGOF_JX.js";import{i as G}from"./CZRFLhJG.js";import{p as y}from"./D9WZReL3.js";import{a as C,s as H}from"./CgU0heln.js";import{p as J}from"./-fLnKJF7.js";import{a as K}from"./Bij_J0Ni.js";import{c as L,d as M}from"./DWKVU1Kw.js";import{g as N,a as O,b as Q}from"./DqUmD4eR.js";import{s as P}from"./CTBtQUu0.js";function ce(b,n){I(n,!1);const[_,T]=H(),e=()=>C(J,"$page",_),V=()=>C(K,"$authUser",_),p=o(),m=o(),u=o(),v=o();var l=o();let s=y(n,"value",8),a=y(n,"key",8,""),h=y(n,"onDecode",8,void 0),x=a()&&(!(s()===null||s()===void 0)&&s()[a()])?s()[a()]:s(),f=o(P(x));const E=async D=>{try{const A=await L(D,e().params.namespace,t(v),V().accessToken),r=M(A);let c=a()&&(r==null?void 0:r[a()])?r[a()]:r;Array.isArray(c)&&c.length===1&&(c=c[0]),d(f,P(c)),h()&&h()(t(f))}catch{console.error("Could not decode payloads")}};i(()=>e(),()=>{d(p,N(e().data.settings))}),i(()=>e(),()=>{d(m,O(e().data.settings))}),i(()=>e(),()=>{d(u,Q(e().data.settings))}),i(()=>(e(),g(l),t(p),t(m),t(u)),()=>{d(v,{...e().data.settings,codec:{...d(l,e().data.settings)===null||g(l)===void 0?void 0:g(l).codec,endpoint:t(p),passAccessToken:t(m),includeCredentials:t(u)}})}),i(()=>W(s()),()=>{E(s())}),w(),G();var k=j(),U=z(k);F(U,n,"default",{get decodedValue(){return t(f)}},null),q(b,k),B(),T()}export{ce as P};
