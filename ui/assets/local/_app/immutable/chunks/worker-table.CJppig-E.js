import{s as _e,h as k,t as P,b as Q,j as T,k as v,l as H,d as I,f as i,m as h,i as d,n as b,c as X,q as U,x as ae,y as we,v as ee}from"./scheduler.YDRWenqQ.js";import{S as he,i as $e,c as Y,a as j,m as x,t as A,b as R,d as z,g as re,e as oe}from"./index.BSjRBCtK.js";import{e as ne}from"./each.CXxL8H8R.js";import{B as ke}from"./badge.5rRciWky.js";import{E as Te}from"./empty-state.xhj7_FZS.js";import{T as ve,a as be,b as ge}from"./table.gYySBsWS.js";import{t as N}from"./translate.BBe5dcco.js";import"./auth-user.4uyd5wgJ.js";import"./toaster.D9vd2-on.js";import"./paths.Bobab3j_.js";import"./entry.DAX3sD12.js";import{i as ye}from"./advanced-visibility.CboZtr5e.js";import{t as Ee,r as Qe,f as ie}from"./time-format.DduGkqzH.js";import{I as Ie}from"./icon.yxhl5ZRc.js";function Ce(f){let e,s;return e=new Ie({props:{name:f[0]?"checkmark":"close",class:"m-auto "+(f[0]?"text-blue-700":"text-primary"),title:f[0]?N("common.yes"):N("common.no")}}),{c(){Y(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,l){x(e,t,l),s=!0},p(t,[l]){const a={};l&1&&(a.name=t[0]?"checkmark":"close"),l&1&&(a.class="m-auto "+(t[0]?"text-blue-700":"text-primary")),l&1&&(a.title=t[0]?N("common.yes"):N("common.no")),e.$set(a)},i(t){s||(A(e.$$.fragment,t),s=!0)},o(t){R(e.$$.fragment,t),s=!1},d(t){z(e,t)}}}function De(f,e,s){let{includesTaskQueueType:t}=e;return f.$$set=l=>{"includesTaskQueueType"in l&&s(0,t=l.includesTaskQueueType)},[t]}class ce extends he{constructor(e){super(),$e(this,e,De,Ce,_e,{includesTaskQueueType:0})}}function ue(f,e,s){const t=f.slice();return t[5]=e[s],t}function Z(f){const e=f.slice(),s=e[4](e[5]);return e[8]=s,e}function Pe(f){var t,l;let e=(((l=(t=f[0])==null?void 0:t.pollers)==null?void 0:l.length)||0)+"",s;return{c(){s=P(e)},l(a){s=H(a,e)},m(a,o){d(a,s,o)},p(a,o){var p,r;o&1&&e!==(e=(((r=(p=a[0])==null?void 0:p.pollers)==null?void 0:r.length)||0)+"")&&U(s,e)},d(a){a&&i(s)}}}function fe(f){let e,s,t,l,a;return t=new Te({props:{title:N("workflows.workers-empty-state")}}),{c(){e=k("tr"),s=k("td"),Y(t.$$.fragment),l=Q(),this.h()},l(o){e=T(o,"TR",{class:!0});var p=v(e);s=T(p,"TD",{colspan:!0});var r=v(s);j(t.$$.fragment,r),r.forEach(i),l=I(p),p.forEach(i),this.h()},h(){h(s,"colspan","5"),h(e,"class","w-full")},m(o,p){d(o,e,p),b(e,s),x(t,s,null),b(e,l),a=!0},p:ee,i(o){a||(A(t.$$.fragment,o),a=!0)},o(o){R(t.$$.fragment,o),a=!1},d(o){o&&i(e),z(t)}}}function me(f){let e,s,t=(f[8]??"")+"",l;return{c(){e=k("td"),s=k("p"),l=P(t),this.h()},l(a){e=T(a,"TD",{class:!0,"data-testid":!0});var o=v(e);s=T(o,"P",{class:!0});var p=v(s);l=H(p,t),p.forEach(i),o.forEach(i),this.h()},h(){h(s,"class","select-all break-all"),h(e,"class","text-left"),h(e,"data-testid","worker-build-id")},m(a,o){d(a,e,o),b(e,s),b(s,l)},p(a,o){o&1&&t!==(t=(a[8]??"")+"")&&U(l,t)},d(a){a&&i(e)}}}function He(f){var g,J;let e,s,t=f[5].identity+"",l,a,o,p,r=(((J=(g=f[5])==null?void 0:g.workerVersionCapabilities)==null?void 0:J.buildId)??"")+"",n,m,_,y,O,C=ie(f[5].lastAccessTime,f[2],{relative:f[3]})+"",V,G,F,D,W,E,B,S,w,u=!f[1]&&me(Z(f));return D=new ce({props:{includesTaskQueueType:f[5].taskQueueTypes.includes("WORKFLOW")}}),B=new ce({props:{includesTaskQueueType:f[5].taskQueueTypes.includes("ACTIVITY")}}),{c(){e=k("td"),s=k("p"),l=P(t),a=Q(),o=k("td"),p=k("p"),n=P(r),m=Q(),u&&u.c(),_=Q(),y=k("td"),O=k("p"),V=P(C),G=Q(),F=k("td"),Y(D.$$.fragment),W=Q(),E=k("td"),Y(B.$$.fragment),S=Q(),this.h()},l(c){e=T(c,"TD",{class:!0,"data-testid":!0});var $=v(e);s=T($,"P",{class:!0});var q=v(s);l=H(q,t),q.forEach(i),$.forEach(i),a=I(c),o=T(c,"TD",{class:!0,"data-testid":!0});var K=v(o);p=T(K,"P",{class:!0});var L=v(p);n=H(L,r),L.forEach(i),K.forEach(i),m=I(c),u&&u.l(c),_=I(c),y=T(c,"TD",{class:!0,"data-testid":!0});var M=v(y);O=T(M,"P",{class:!0});var te=v(O);V=H(te,C),te.forEach(i),M.forEach(i),G=I(c),F=T(c,"TD",{"data-testid":!0});var le=v(F);j(D.$$.fragment,le),le.forEach(i),W=I(c),E=T(c,"TD",{"data-testid":!0});var se=v(E);j(B.$$.fragment,se),se.forEach(i),S=I(c),this.h()},h(){h(s,"class","select-all"),h(e,"class","text-left"),h(e,"data-testid","worker-identity"),h(p,"class","select-all break-all"),h(o,"class","text-left"),h(o,"data-testid","worker-build-id"),h(O,"class","select-all"),h(y,"class","text-left"),h(y,"data-testid","worker-last-access-time"),h(F,"data-testid","workflow-poller"),h(E,"data-testid","activity-poller")},m(c,$){d(c,e,$),b(e,s),b(s,l),d(c,a,$),d(c,o,$),b(o,p),b(p,n),d(c,m,$),u&&u.m(c,$),d(c,_,$),d(c,y,$),b(y,O),b(O,V),d(c,G,$),d(c,F,$),x(D,F,null),d(c,W,$),d(c,E,$),x(B,E,null),d(c,S,$),w=!0},p(c,$){var L,M;(!w||$&1)&&t!==(t=c[5].identity+"")&&U(l,t),(!w||$&1)&&r!==(r=(((M=(L=c[5])==null?void 0:L.workerVersionCapabilities)==null?void 0:M.buildId)??"")+"")&&U(n,r),c[1]?u&&(u.d(1),u=null):u?u.p(Z(c),$):(u=me(Z(c)),u.c(),u.m(_.parentNode,_)),(!w||$&13)&&C!==(C=ie(c[5].lastAccessTime,c[2],{relative:c[3]})+"")&&U(V,C);const q={};$&1&&(q.includesTaskQueueType=c[5].taskQueueTypes.includes("WORKFLOW")),D.$set(q);const K={};$&1&&(K.includesTaskQueueType=c[5].taskQueueTypes.includes("ACTIVITY")),B.$set(K)},i(c){w||(A(D.$$.fragment,c),A(B.$$.fragment,c),w=!0)},o(c){R(D.$$.fragment,c),R(B.$$.fragment,c),w=!1},d(c){c&&(i(e),i(a),i(o),i(m),i(_),i(y),i(G),i(F),i(W),i(E),i(S)),u&&u.d(c),z(D),z(B)}}}function pe(f){let e,s;return e=new ge({props:{"data-testid":"worker-row",$$slots:{default:[He]},$$scope:{ctx:f}}}),{c(){Y(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,l){x(e,t,l),s=!0},p(t,l){const a={};l&527&&(a.$$scope={dirty:l,ctx:t}),e.$set(a)},i(t){s||(A(e.$$.fragment,t),s=!0)},o(t){R(e.$$.fragment,t),s=!1},d(t){z(e,t)}}}function Ne(f){var p;let e,s,t=ne((p=f[0])==null?void 0:p.pollers),l=[];for(let r=0;r<t.length;r+=1)l[r]=pe(ue(f,t,r));const a=r=>R(l[r],1,1,()=>{l[r]=null});let o=null;return t.length||(o=fe()),{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=ae(),o&&o.c()},l(r){for(let n=0;n<l.length;n+=1)l[n].l(r);e=ae(),o&&o.l(r)},m(r,n){for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(r,n);d(r,e,n),o&&o.m(r,n),s=!0},p(r,n){var m;if(n&31){t=ne((m=r[0])==null?void 0:m.pollers);let _;for(_=0;_<t.length;_+=1){const y=ue(r,t,_);l[_]?(l[_].p(y,n),A(l[_],1)):(l[_]=pe(y),l[_].c(),A(l[_],1),l[_].m(e.parentNode,e))}for(re(),_=t.length;_<l.length;_+=1)a(_);oe(),!t.length&&o?o.p(r,n):t.length?o&&(re(),R(o,1,1,()=>{o=null}),oe()):(o=fe(),o.c(),A(o,1),o.m(e.parentNode,e))}},i(r){if(!s){for(let n=0;n<t.length;n+=1)A(l[n]);s=!0}},o(r){l=l.filter(Boolean);for(let n=0;n<l.length;n+=1)R(l[n]);s=!1},d(r){r&&i(e),we(l,r),o&&o.d(r)}}}function We(f){let e,s=N("workflows.workers-tab")+"",t;return{c(){e=k("caption"),t=P(s),this.h()},l(l){e=T(l,"CAPTION",{class:!0,slot:!0});var a=v(e);t=H(a,s),a.forEach(i),this.h()},h(){h(e,"class","sr-only"),h(e,"slot","caption")},m(l,a){d(l,e,a),b(e,t)},p:ee,d(l){l&&i(e)}}}function de(f){let e,s=N("deployments.deployment")+"",t;return{c(){e=k("th"),t=P(s),this.h()},l(l){e=T(l,"TH",{class:!0});var a=v(e);t=H(a,s),a.forEach(i),this.h()},h(){h(e,"class","w-3/12")},m(l,a){d(l,e,a),b(e,t)},p:ee,d(l){l&&i(e)}}}function Ae(f){let e,s=N("common.id")+"",t,l,a,o=N("workers.buildId")+"",p,r,n,m,_=N("workflows.last-accessed")+"",y,O,C,V,G=N("workflows.workflow-task-handler")+"",F,D,W,E,B=N("workflows.activity-handler")+"",S,w=!f[1]&&de();return{c(){e=k("th"),t=P(s),l=Q(),a=k("th"),p=P(o),r=Q(),w&&w.c(),n=Q(),m=k("th"),y=P(_),O=Q(),C=k("th"),V=k("p"),F=P(G),D=Q(),W=k("th"),E=k("p"),S=P(B),this.h()},l(u){e=T(u,"TH",{class:!0});var g=v(e);t=H(g,s),g.forEach(i),l=I(u),a=T(u,"TH",{class:!0});var J=v(a);p=H(J,o),J.forEach(i),r=I(u),w&&w.l(u),n=I(u),m=T(u,"TH",{class:!0});var c=v(m);y=H(c,_),c.forEach(i),O=I(u),C=T(u,"TH",{class:!0});var $=v(C);V=T($,"P",{class:!0});var q=v(V);F=H(q,G),q.forEach(i),$.forEach(i),D=I(u),W=T(u,"TH",{class:!0});var K=v(W);E=T(K,"P",{class:!0});var L=v(E);S=H(L,B),L.forEach(i),K.forEach(i),this.h()},h(){h(e,"class","w-4/12"),h(a,"class","w-3/12"),h(m,"class","w-2/12"),h(V,"class","text-center"),h(C,"class","w-2/12"),h(E,"class","text-center"),h(W,"class","w-2/12 text-center")},m(u,g){d(u,e,g),b(e,t),d(u,l,g),d(u,a,g),b(a,p),d(u,r,g),w&&w.m(u,g),d(u,n,g),d(u,m,g),b(m,y),d(u,O,g),d(u,C,g),b(C,V),b(V,F),d(u,D,g),d(u,W,g),b(W,E),b(E,S)},p(u,g){u[1]?w&&(w.d(1),w=null):w?w.p(u,g):(w=de(),w.c(),w.m(n.parentNode,n))},d(u){u&&(i(e),i(l),i(a),i(r),i(n),i(m),i(O),i(C),i(D),i(W)),w&&w.d(u)}}}function Oe(f){let e,s;return e=new be({props:{slot:"headers",$$slots:{default:[Ae]},$$scope:{ctx:f}}}),{c(){Y(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,l){x(e,t,l),s=!0},p(t,l){const a={};l&514&&(a.$$scope={dirty:l,ctx:t}),e.$set(a)},i(t){s||(A(e.$$.fragment,t),s=!0)},o(t){R(e.$$.fragment,t),s=!1},d(t){z(e,t)}}}function Ve(f){let e,s=N("workers.workers")+"",t,l,a,o,p,r;return a=new ke({props:{type:"count",$$slots:{default:[Pe]},$$scope:{ctx:f}}}),p=new ve({props:{class:"mb-6 w-full min-w-[600px] table-fixed",$$slots:{headers:[Oe],caption:[We],default:[Ne]},$$scope:{ctx:f}}}),{c(){e=k("h2"),t=P(s),l=Q(),Y(a.$$.fragment),o=Q(),Y(p.$$.fragment),this.h()},l(n){e=T(n,"H2",{class:!0,"data-testid":!0});var m=v(e);t=H(m,s),l=I(m),j(a.$$.fragment,m),m.forEach(i),o=I(n),j(p.$$.fragment,n),this.h()},h(){h(e,"class","flex items-center gap-2"),h(e,"data-testid","workers")},m(n,m){d(n,e,m),b(e,t),b(e,l),x(a,e,null),d(n,o,m),x(p,n,m),r=!0},p(n,[m]){const _={};m&513&&(_.$$scope={dirty:m,ctx:n}),a.$set(_);const y={};m&527&&(y.$$scope={dirty:m,ctx:n}),p.$set(y)},i(n){r||(A(a.$$.fragment,n),A(p.$$.fragment,n),r=!0)},o(n){R(a.$$.fragment,n),R(p.$$.fragment,n),r=!1},d(n){n&&(i(e),i(o)),z(a),z(p,n)}}}function Fe(f,e,s){let t,l,a;X(f,ye,r=>s(1,t=r)),X(f,Ee,r=>s(2,l=r)),X(f,Qe,r=>s(3,a=r));let{workers:o}=e;const p=r=>{var n;const m=(n=r==null?void 0:r.workerVersionCapabilities)===null||n===void 0?void 0:n.deploymentSeriesName;return m??""};return f.$$set=r=>{"workers"in r&&s(0,o=r.workers)},[o,t,l,a,p]}class Xe extends he{constructor(e){super(),$e(this,e,Fe,Ve,_e,{workers:0})}}export{ce as P,Xe as W};
