import{s as ce,h as S,j as N,k as z,f as w,a3 as W,ab as se,M as pe,i as A,n as H,a9 as de,p as ue,W as ge,a as be,b as F,d as q,u as ve,g as we,e as ke,a6 as ee,O as le,t as J,l as K,m as M,Q as ye,c as te,w as Ee,H as G,q as Te}from"../chunks/scheduler.D6mQsyhd.js";import{S as fe,i as _e,g as me,e as he,t as O,b as R,h as Ie,c as X,a as Y,m as Z,d as x}from"../chunks/index.CDeUyeTp.js";import{e as ae,u as He,o as Le}from"../chunks/each.5YhwczXz.js";import{g as Ve}from"../chunks/entry.CZFwsISn.js";import{p as Se}from"../chunks/stores.BtOxQZr6.js";import{P as Ne}from"../chunks/page-title.h9prjCqF.js";import{E as ze}from"../chunks/empty-state.B38A5At1.js";import{I as Me}from"../chunks/input.D33ENZOp.js";import{t as L}from"../chunks/translate.BBe5dcco.js";import{a as Oe}from"../chunks/workflows.D2cQSCvK.js";import{n as Re,l as ne}from"../chunks/namespaces.BgehxuDT.js";import{t as Ue}from"../chunks/toaster.BKjgU7Df.js";import{e as Pe}from"../chunks/route-for.C92q9UNu.js";function re(l,e,s){const t=l.slice();return t[23]=e[s],t}const We=l=>({item:l&16}),oe=l=>({item:l[23].data});function Ae(l){let e;return{c(){e=J("Missing template")},l(s){e=K(s,"Missing template")},m(s,t){A(s,e,t)},d(s){s&&w(e)}}}function ie(l,e){let s,t,i;const u=e[14].default,m=be(u,e,e[13],oe),c=m||Ae();return{key:l,first:null,c(){s=S("svelte-virtual-list-row"),c&&c.c(),t=F(),this.h()},l(r){s=N(r,"SVELTE-VIRTUAL-LIST-ROW",{class:!0});var f=z(s);c&&c.l(f),t=q(f),f.forEach(w),this.h()},h(){se(s,"class","svelte-1kdxoed"),this.first=s},m(r,f){A(r,s,f),c&&c.m(s,null),H(s,t),i=!0},p(r,f){e=r,m&&m.p&&(!i||f&8208)&&ve(m,u,e,e[13],i?ke(u,e[13],f,We):we(e[13]),oe)},i(r){i||(O(c,r),i=!0)},o(r){R(c,r),i=!1},d(r){r&&w(s),c&&c.d(r)}}}function Ce(l){let e,s,t=[],i=new Map,u,m,c,r,f=ae(l[4]);const b=o=>o[23].index;for(let o=0;o<f.length;o+=1){let a=re(l,f,o),_=b(a);i.set(_,t[o]=ie(_,a))}return{c(){e=S("svelte-virtual-list-viewport"),s=S("svelte-virtual-list-contents");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=N(o,"SVELTE-VIRTUAL-LIST-VIEWPORT",{style:!0,class:!0});var a=z(e);s=N(a,"SVELTE-VIRTUAL-LIST-CONTENTS",{style:!0,class:!0});var _=z(s);for(let y=0;y<t.length;y+=1)t[y].l(_);_.forEach(w),a.forEach(w),this.h()},h(){W(s,"padding-top",l[5]+"px"),W(s,"padding-bottom",l[6]+"px"),se(s,"class","svelte-1kdxoed"),W(e,"height",l[0]),se(e,"class","svelte-1kdxoed"),pe(()=>l[17].call(e))},m(o,a){A(o,e,a),H(e,s);for(let _=0;_<t.length;_+=1)t[_]&&t[_].m(s,null);l[15](s),l[16](e),u=de(e,l[17].bind(e)),m=!0,c||(r=ue(e,"scroll",l[7]),c=!0)},p(o,[a]){a&8208&&(f=ae(o[4]),me(),t=He(t,a,b,1,o,f,i,s,Le,ie,null,re),he()),(!m||a&32)&&W(s,"padding-top",o[5]+"px"),(!m||a&64)&&W(s,"padding-bottom",o[6]+"px"),(!m||a&1)&&W(e,"height",o[0])},i(o){if(!m){for(let a=0;a<f.length;a+=1)O(t[a]);m=!0}},o(o){for(let a=0;a<t.length;a+=1)R(t[a]);m=!1},d(o){o&&w(e);for(let a=0;a<t.length;a+=1)t[a].d();l[15](null),l[16](null),u(),c=!1,r()}}}function Fe(l,e,s){let{$$slots:t={},$$scope:i}=e,{items:u}=e,{height:m="100%"}=e,{itemHeight:c=void 0}=e,{start:r=0}=e,{end:f=0}=e,b=[],o,a,_,y=0,P,E,g=0,v=0,T;async function $(n,h,d){const{scrollTop:k}=a;await ee();let I=g-k,p=r;for(;I<h&&p<n.length;){let C=o[p-r];C||(s(9,f=p+1),await ee(),C=o[p-r]);const U=b[p]=d||C.offsetHeight;I+=U,p+=1}s(9,f=p);const Q=n.length-f;T=(g+I)/f,s(6,v=Q*T),b.length=n.length}async function B(){const{scrollTop:n}=a,h=r;for(let p=0;p<o.length;p+=1)b[r+p]=c||o[p].offsetHeight;let d=0,k=0;for(;d<u.length;){const p=b[d]||T;if(k+p>n){s(8,r=d),s(5,g=k);break}k+=p,d+=1}for(;d<u.length&&(k+=b[d]||T,d+=1,!(k>n+y)););s(9,f=d);const I=u.length-f;for(T=k/f;d<u.length;)b[d++]=T;if(s(6,v=I*T),r<h){await ee();let p=0,Q=0;for(let U=r;U<h;U+=1)o[U-r]&&(p+=b[U],Q+=c||o[U-r].offsetHeight);const C=Q-p;a.scrollTo(0,n+C)}}ge(()=>{o=_.getElementsByTagName("svelte-virtual-list-row"),s(12,E=!0)});function D(n){le[n?"unshift":"push"](()=>{_=n,s(3,_)})}function V(n){le[n?"unshift":"push"](()=>{a=n,s(2,a)})}function j(){y=this.offsetHeight,s(1,y)}return l.$$set=n=>{"items"in n&&s(10,u=n.items),"height"in n&&s(0,m=n.height),"itemHeight"in n&&s(11,c=n.itemHeight),"start"in n&&s(8,r=n.start),"end"in n&&s(9,f=n.end),"$$scope"in n&&s(13,i=n.$$scope)},l.$$.update=()=>{l.$$.dirty&1792&&s(4,P=u.slice(r,f).map((n,h)=>({index:h+r,data:n}))),l.$$.dirty&7170&&E&&$(u,y,c)},[m,y,a,_,P,g,v,B,r,f,u,c,E,i,t,D,V,j]}class qe extends fe{constructor(e){super(),_e(this,e,Fe,Ce,ce,{items:10,height:0,itemHeight:11,start:8,end:9})}}function Be(l){let e,s;return e=new ze({props:{title:l[1].length?L("common.no-results"):L("namespaces.select-namespace-empty-state")}}),{c(){X(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){Z(e,t,i),s=!0},p(t,i){const u={};i&2&&(u.title=t[1].length?L("common.no-results"):L("namespaces.select-namespace-empty-state")),e.$set(u)},i(t){s||(O(e.$$.fragment,t),s=!0)},o(t){R(e.$$.fragment,t),s=!1},d(t){x(e,t)}}}function De(l){let e,s;return e=new qe({props:{items:l[2],itemHeight:50,$$slots:{default:[je,({item:t})=>({9:t}),({item:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){X(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){Z(e,t,i),s=!0},p(t,i){const u={};i&4&&(u.items=t[2]),i&1540&&(u.$$scope={dirty:i,ctx:t}),e.$set(u)},i(t){s||(O(e.$$.fragment,t),s=!0)},o(t){R(e.$$.fragment,t),s=!1},d(t){x(e,t)}}}function je(l){let e,s=l[9].namespace+"",t,i,u;function m(){return l[7](l[9])}return{c(){e=S("button"),t=J(s),this.h()},l(c){e=N(c,"BUTTON",{class:!0});var r=z(e);t=K(r,s),r.forEach(w),this.h()},h(){M(e,"class","surface-primary flex w-full cursor-pointer gap-2 truncate border-b from-blue-100 to-purple-100 p-3 text-left hover:bg-gradient-to-br"),G(e,"rounded-t-md",l[9].index===0),G(e,"rounded-b-md",l[9].index===l[2].length-1)},m(c,r){A(c,e,r),H(e,t),i||(u=ue(e,"click",m),i=!0)},p(c,r){l=c,r&512&&s!==(s=l[9].namespace+"")&&Te(t,s),r&512&&G(e,"rounded-t-md",l[9].index===0),r&516&&G(e,"rounded-b-md",l[9].index===l[2].length-1)},d(c){c&&w(e),i=!1,u()}}}function Qe(l){let e,s,t,i,u=L("namespaces.select-namespace-welcome")+"",m,c,r,f=L("namespaces.select-namespace")+"",b,o,a,_,y,P,E,g,v,T;e=new Ne({props:{title:L("namespaces.namespace-select-header"),url:l[3].url.href}});function $(n){l[6](n)}let B={id:"search-namespaces",type:"search",label:L("common.search"),labelHidden:!0,placeholder:L("common.search"),icon:"search"};l[0]!==void 0&&(B.value=l[0]),_=new Me({props:B}),le.push(()=>Ie(_,"value",$));const D=[De,Be],V=[];function j(n,h){return n[2].length?0:1}return g=j(l),v=V[g]=D[g](l),{c(){X(e.$$.fragment),s=F(),t=S("div"),i=S("h1"),m=J(u),c=F(),r=S("p"),b=J(f),o=F(),a=S("form"),X(_.$$.fragment),P=F(),E=S("div"),v.c(),this.h()},l(n){Y(e.$$.fragment,n),s=q(n),t=N(n,"DIV",{class:!0});var h=z(t);i=N(h,"H1",{class:!0});var d=z(i);m=K(d,u),d.forEach(w),c=q(h),r=N(h,"P",{class:!0});var k=z(r);b=K(k,f),k.forEach(w),o=q(h),a=N(h,"FORM",{class:!0,role:!0});var I=z(a);Y(_.$$.fragment,I),I.forEach(w),P=q(h),E=N(h,"DIV",{class:!0,"aria-label":!0});var p=z(E);v.l(p),p.forEach(w),h.forEach(w),this.h()},h(){M(i,"class","my-4"),M(r,"class","mb-8"),M(a,"class","mb-5"),M(a,"role","search"),M(E,"class","h-96 w-full overflow-hidden rounded-md border"),M(E,"aria-label",L("common.namespaces")),M(t,"class","w-full p-8 xl:w-1/2")},m(n,h){Z(e,n,h),A(n,s,h),A(n,t,h),H(t,i),H(i,m),H(t,c),H(t,r),H(r,b),H(t,o),H(t,a),Z(_,a,null),H(t,P),H(t,E),V[g].m(E,null),T=!0},p(n,[h]){const d={};h&8&&(d.url=n[3].url.href),e.$set(d);const k={};!y&&h&1&&(y=!0,k.value=n[0],ye(()=>y=!1)),_.$set(k);let I=g;g=j(n),g===I?V[g].p(n,h):(me(),R(V[I],1,1,()=>{V[I]=null}),he(),v=V[g],v?v.p(n,h):(v=V[g]=D[g](n),v.c()),O(v,1),v.m(E,null))},i(n){T||(O(e.$$.fragment,n),O(_.$$.fragment,n),O(v),T=!0)},o(n){R(e.$$.fragment,n),R(_.$$.fragment,n),R(v),T=!1},d(n){n&&(w(s),w(t)),x(e,n),x(_),V[g].d()}}}function Ge(l,e,s){let t,i,u,m,c;te(l,Re,a=>s(1,u=a)),te(l,ne,a=>s(8,m=a)),te(l,Se,a=>s(3,c=a));let r="";const f=async a=>{const{authorized:_}=await Oe(a);_?(Ee(ne,m=a,m),Ve(Pe({namespace:a}))):Ue.push({variant:"error",message:L("namespaces.unauthorized-namespace-error")})};function b(a){r=a,s(0,r)}const o=a=>f(a.namespace);return l.$$.update=()=>{l.$$.dirty&3&&s(5,t=u.filter(a=>a.namespaceInfo.name.toLowerCase().includes(r.toLowerCase()))),l.$$.dirty&32&&s(2,i=t.map((a,_)=>({namespace:a.namespaceInfo.name,index:_})))},[r,u,i,c,f,t,b,o]}class rt extends fe{constructor(e){super(),_e(this,e,Ge,Qe,ce,{})}}export{rt as component};
