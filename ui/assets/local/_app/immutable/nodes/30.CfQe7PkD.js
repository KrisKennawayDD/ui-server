import{s as M,h as $,j as y,k,f as u,i as _,c as S,w as L,b as W,d as I,m as v,n as g,t as P,l as F,q as H,v as q,x as ae}from"../chunks/scheduler.CnYDgCRb.js";import{S as z,i as O,g as B,e as R,t as m,b as p,c as D,a as C,m as T,d as V}from"../chunks/index.DW7Zsqzm.js";import{p as Q}from"../chunks/stores.L-vqsOWF.js";import{P as ie}from"../chunks/page-title.DEkRIe-Y.js";import{e as A,u as fe,o as ce}from"../chunks/each.rY6XwTBs.js";import{L as G}from"../chunks/link.CepbpAPX.js";import{t as h}from"../chunks/translate.BBe5dcco.js";import{t as ue,r as me,f as N}from"../chunks/time-format.B7_usxHp.js";import{n as K,o as U}from"../chunks/route-for.C96wtlev.js";import{D as se,f as pe}from"../chunks/deployments-service.C2ThDPfO.js";import{A as _e}from"../chunks/alert.BmiNYDVZ.js";import{B as he}from"../chunks/badge.Bwh1WhIm.js";import{E as ge}from"../chunks/empty-state.LMdRD7f9.js";import{A as de}from"../chunks/api-paginated.CYhRoLVX.js";function X(i,e,n){const t=i.slice();return t[5]=e[n].label,t}function $e(i){let e,n,t,l,o;return t=new G({props:{icon:"external-link",href:K({namespace:i[2].params.namespace,query:`TemporalWorkerDeployment="${i[0].name}"`})}}),{c(){e=$("td"),n=$("p"),D(t.$$.fragment),l=W(),this.h()},l(s){e=y(s,"TD",{class:!0});var a=k(e);n=y(a,"P",{});var r=k(n);C(t.$$.fragment,r),l=I(r),r.forEach(u),a.forEach(u),this.h()},h(){v(e,"class","truncate p-2 text-center")},m(s,a){_(s,e,a),g(e,n),T(t,n,null),g(n,l),o=!0},p(s,a){const r={};a&5&&(r.href=K({namespace:s[2].params.namespace,query:`TemporalWorkerDeployment="${s[0].name}"`})),t.$set(r)},i(s){o||(m(t.$$.fragment,s),o=!0)},o(s){p(t.$$.fragment,s),o=!1},d(s){s&&u(e),V(t)}}}function ye(i){let e,n,t,l,o=N(i[0].createTime,i[3],{relative:i[4]})+"",s,a,r=i[0].routingConfig.rampingVersionChangedTime&&Y(i);return{c(){e=$("td"),n=$("div"),r&&r.c(),t=W(),l=$("p"),s=P(o),a=W(),this.h()},l(f){e=y(f,"TD",{class:!0});var c=k(e);n=y(c,"DIV",{class:!0});var d=k(n);r&&r.l(d),t=I(d),l=y(d,"P",{});var w=k(l);s=F(w,o),w.forEach(u),d.forEach(u),a=I(c),c.forEach(u),this.h()},h(){v(n,"class","flex flex-col gap-1"),v(e,"class","truncate p-2 text-left")},m(f,c){_(f,e,c),g(e,n),r&&r.m(n,null),g(n,t),g(n,l),g(l,s),g(e,a)},p(f,c){f[0].routingConfig.rampingVersionChangedTime?r?r.p(f,c):(r=Y(f),r.c(),r.m(n,t)):r&&(r.d(1),r=null),c&25&&o!==(o=N(f[0].createTime,f[3],{relative:f[4]})+"")&&H(s,o)},i:q,o:q,d(f){f&&u(e),r&&r.d()}}}function ke(i){let e,n,t,l,o,s,a=i[0].routingConfig.rampingVersion&&Z(i);return l=new se({props:{status:"Current",version:i[0].routingConfig.currentVersion,label:h("deployments.current")}}),{c(){e=$("td"),n=$("div"),a&&a.c(),t=W(),D(l.$$.fragment),o=W(),this.h()},l(r){e=y(r,"TD",{class:!0});var f=k(e);n=y(f,"DIV",{class:!0});var c=k(n);a&&a.l(c),t=I(c),C(l.$$.fragment,c),c.forEach(u),o=I(f),f.forEach(u),this.h()},h(){v(n,"class","flex flex-col gap-1"),v(e,"class","whitespace-pre-line break-words p-2 text-left")},m(r,f){_(r,e,f),g(e,n),a&&a.m(n,null),g(n,t),T(l,n,null),g(e,o),s=!0},p(r,f){r[0].routingConfig.rampingVersion?a?(a.p(r,f),f&1&&m(a,1)):(a=Z(r),a.c(),m(a,1),a.m(n,t)):a&&(B(),p(a,1,1,()=>{a=null}),R());const c={};f&1&&(c.version=r[0].routingConfig.currentVersion),l.$set(c)},i(r){s||(m(a),m(l.$$.fragment,r),s=!0)},o(r){p(a),p(l.$$.fragment,r),s=!1},d(r){r&&u(e),a&&a.d(),V(l)}}}function be(i){let e,n,t;return n=new G({props:{href:U({namespace:i[2].params.namespace,deployment:i[0].name}),$$slots:{default:[ve]},$$scope:{ctx:i}}}),{c(){e=$("td"),D(n.$$.fragment),this.h()},l(l){e=y(l,"TD",{class:!0});var o=k(e);C(n.$$.fragment,o),o.forEach(u),this.h()},h(){v(e,"class","p-2 text-left")},m(l,o){_(l,e,o),T(n,e,null),t=!0},p(l,o){const s={};o&5&&(s.href=U({namespace:l[2].params.namespace,deployment:l[0].name})),o&257&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){p(n.$$.fragment,l),t=!1},d(l){l&&u(e),V(n)}}}function Y(i){let e,n=N(i[0].routingConfig.rampingVersionChangedTime,i[3],{relative:i[4]})+"",t;return{c(){e=$("p"),t=P(n)},l(l){e=y(l,"P",{});var o=k(e);t=F(o,n),o.forEach(u)},m(l,o){_(l,e,o),g(e,t)},p(l,o){o&25&&n!==(n=N(l[0].routingConfig.rampingVersionChangedTime,l[3],{relative:l[4]})+"")&&H(t,n)},d(l){l&&u(e)}}}function Z(i){let e,n;return e=new se({props:{status:"Ramping",version:i[0].routingConfig.rampingVersion,label:h("deployments.ramping-percentage",{percentage:i[0].routingConfig.rampingVersionPercentage})}}),{c(){D(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,l){T(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.version=t[0].routingConfig.rampingVersion),l&1&&(o.label=h("deployments.ramping-percentage",{percentage:t[0].routingConfig.rampingVersionPercentage})),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function ve(i){let e=i[0].name+"",n;return{c(){n=P(e)},l(t){n=F(t,e)},m(t,l){_(t,n,l)},p(t,l){l&1&&e!==(e=t[0].name+"")&&H(n,e)},d(t){t&&u(n)}}}function x(i,e){let n,t,l,o,s,a,r,f,c;const d=[be,ke,ye,$e],w=[];function J(b,E){return E&2&&(t=null),E&2&&(l=null),E&2&&(o=null),E&2&&(s=null),t==null&&(t=b[5]===h("deployments.name")),t?0:(l==null&&(l=b[5]===h("deployments.deployment-version")),l?1:(o==null&&(o=b[5]===h("deployments.deployed")),o?2:(s==null&&(s=b[5]===h("deployments.workflows")),s?3:-1)))}return~(a=J(e,-1))&&(r=w[a]=d[a](e)),{key:i,first:null,c(){n=L(),r&&r.c(),f=L(),this.h()},l(b){n=L(),r&&r.l(b),f=L(),this.h()},h(){this.first=n},m(b,E){_(b,n,E),~a&&w[a].m(b,E),_(b,f,E),c=!0},p(b,E){e=b;let j=a;a=J(e,E),a===j?~a&&w[a].p(e,E):(r&&(B(),p(w[j],1,1,()=>{w[j]=null}),R()),~a?(r=w[a],r?r.p(e,E):(r=w[a]=d[a](e),r.c()),m(r,1),r.m(f.parentNode,f)):r=null)},i(b){c||(m(r),c=!0)},o(b){p(r),c=!1},d(b){b&&(u(n),u(f)),~a&&w[a].d(b)}}}function we(i){let e,n=[],t=new Map,l,o=A(i[1]);const s=a=>a[5];for(let a=0;a<o.length;a+=1){let r=X(i,o,a),f=s(r);t.set(f,n[a]=x(f,r))}return{c(){e=$("tr");for(let a=0;a<n.length;a+=1)n[a].c()},l(a){e=y(a,"TR",{});var r=k(e);for(let f=0;f<n.length;f+=1)n[f].l(r);r.forEach(u)},m(a,r){_(a,e,r);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);l=!0},p(a,[r]){r&31&&(o=A(a[1]),B(),n=fe(n,r,s,1,a,o,t,e,ce,x,null,X),R())},i(a){if(!l){for(let r=0;r<o.length;r+=1)m(n[r]);l=!0}},o(a){for(let r=0;r<n.length;r+=1)p(n[r]);l=!1},d(a){a&&u(e);for(let r=0;r<n.length;r+=1)n[r].d()}}}function Ee(i,e,n){let t,l,o;S(i,Q,r=>n(2,t=r)),S(i,ue,r=>n(3,l=r)),S(i,me,r=>n(4,o=r));let{deployment:s}=e,{columns:a}=e;return i.$$set=r=>{"deployment"in r&&n(0,s=r.deployment),"columns"in r&&n(1,a=r.columns)},[s,a,t,l,o]}class De extends z{constructor(e){super(),O(this,e,Ee,we,M,{deployment:0,columns:1})}}function ee(i,e,n){const t=i.slice();return t[10]=e[n],t}function te(i,e,n){const t=i.slice();return t[6]=e[n].label,t[8]=n,t}function ne(i){let e,n;return e=new De({props:{deployment:i[10],columns:i[4]}}),{c(){D(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,l){T(e,t,l),n=!0},p(t,l){const o={};l&512&&(o.deployment=t[10]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Ce(i){let e,n,t=A(i[9]),l=[];for(let s=0;s<t.length;s+=1)l[s]=ne(ee(i,t,s));const o=s=>p(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=L()},l(s){for(let a=0;a<l.length;a+=1)l[a].l(s);e=L()},m(s,a){for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(s,a);_(s,e,a),n=!0},p(s,a){if(a&528){t=A(s[9]);let r;for(r=0;r<t.length;r+=1){const f=ee(s,t,r);l[r]?(l[r].p(f,a),m(l[r],1)):(l[r]=ne(f),l[r].c(),m(l[r],1),l[r].m(e.parentNode,e))}for(B(),r=t.length;r<l.length;r+=1)o(r);R()}},i(s){if(!n){for(let a=0;a<t.length;a+=1)m(l[a]);n=!0}},o(s){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)p(l[a]);n=!1},d(s){s&&u(e),ae(l,s)}}}function Te(i){let e,n=h("deployments.deployments")+"",t;return{c(){e=$("caption"),t=P(n),this.h()},l(l){e=y(l,"CAPTION",{class:!0,slot:!0});var o=k(e);t=F(o,n),o.forEach(u),this.h()},h(){v(e,"class","sr-only"),v(e,"slot","caption")},m(l,o){_(l,e,o),g(e,t)},p:q,d(l){l&&u(e)}}}function Ve(i){let e;return{c(){e=P("Pre-Release")},l(n){e=F(n,"Pre-Release")},m(n,t){_(n,e,t)},d(n){n&&u(e)}}}function Pe(i){let e,n,t,l=h("deployments.worker-deployments")+"",o,s,a,r;return a=new he({props:{class:"shrink-0",$$slots:{default:[Ve]},$$scope:{ctx:i}}}),{c(){e=$("div"),n=$("div"),t=$("h1"),o=P(l),s=W(),D(a.$$.fragment),this.h()},l(f){e=y(f,"DIV",{class:!0,slot:!0});var c=k(e);n=y(c,"DIV",{class:!0});var d=k(n);t=y(d,"H1",{});var w=k(t);o=F(w,l),w.forEach(u),s=I(d),C(a.$$.fragment,d),d.forEach(u),c.forEach(u),this.h()},h(){v(n,"class","flex flex-wrap items-center gap-2"),v(e,"class","flex flex-col gap-4"),v(e,"slot","header")},m(f,c){_(f,e,c),g(e,n),g(n,t),g(t,o),g(n,s),T(a,n,null),r=!0},p(f,c){const d={};c&8192&&(d.$$scope={dirty:c,ctx:f}),a.$set(d)},i(f){r||(m(a.$$.fragment,f),r=!0)},o(f){p(a.$$.fragment,f),r=!1},d(f){f&&u(e),V(a)}}}function le(i){let e,n=i[6]+"",t;return{c(){e=$("th"),t=P(n),this.h()},l(l){e=y(l,"TH",{class:!0});var o=k(e);t=F(o,n),o.forEach(u),this.h()},h(){v(e,"class",i[8]===0&&"w-full")},m(l,o){_(l,e,o),g(e,t)},p:q,d(l){l&&u(e)}}}function Fe(i){let e,n=A(i[4]),t=[];for(let l=0;l<n.length;l+=1)t[l]=le(te(i,n,l));return{c(){e=$("tr");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=y(l,"TR",{slot:!0,class:!0});var o=k(e);for(let s=0;s<t.length;s+=1)t[s].l(o);o.forEach(u),this.h()},h(){v(e,"slot","headers"),v(e,"class","text-left")},m(l,o){_(l,e,o);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p(l,o){if(o&16){n=A(l[4]);let s;for(s=0;s<n.length;s+=1){const a=te(l,n,s);t[s]?t[s].p(a,o):(t[s]=le(a),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=n.length}},d(l){l&&u(e),ae(t,l)}}}function Le(i){let e;return{c(){e=P("Learn more")},l(n){e=F(n,"Learn more")},m(n,t){_(n,e,t)},d(n){n&&u(e)}}}function re(i){let e,n;return e=new _e({props:{intent:"warning",icon:"warning",class:"px-12",$$slots:{default:[We]},$$scope:{ctx:i}}}),{c(){D(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,l){T(e,t,l),n=!0},p(t,l){const o={};l&8194&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function We(i){let e;return{c(){e=P(i[1])},l(n){e=F(n,i[1])},m(n,t){_(n,e,t)},p(n,t){t&2&&H(e,n[1])},d(n){n&&u(e)}}}function Ie(i){let e,n,t,l,o,s,a;t=new G({props:{href:"https://docs.temporal.io/worker-deployments",newTab:!0,$$slots:{default:[Le]},$$scope:{ctx:i}}});let r=i[1]&&re(i);return{c(){e=$("p"),n=P("Enable Worker Deployments to manage your workers more effectively. "),D(t.$$.fragment),l=P("."),o=W(),r&&r.c(),s=L(),this.h()},l(f){e=y(f,"P",{class:!0});var c=k(e);n=F(c,"Enable Worker Deployments to manage your workers more effectively. "),C(t.$$.fragment,c),l=F(c,"."),c.forEach(u),o=I(f),r&&r.l(f),s=L(),this.h()},h(){v(e,"class","text-center")},m(f,c){_(f,e,c),g(e,n),T(t,e,null),g(e,l),_(f,o,c),r&&r.m(f,c),_(f,s,c),a=!0},p(f,c){const d={};c&8192&&(d.$$scope={dirty:c,ctx:f}),t.$set(d),f[1]?r?(r.p(f,c),c&2&&m(r,1)):(r=re(f),r.c(),m(r,1),r.m(s.parentNode,s)):r&&(B(),p(r,1,1,()=>{r=null}),R())},i(f){a||(m(t.$$.fragment,f),m(r),a=!0)},o(f){p(t.$$.fragment,f),p(r),a=!1},d(f){f&&(u(e),u(o),u(s)),V(t),r&&r.d(f)}}}function Ae(i){let e,n;return e=new ge({props:{title:h("deployments.empty-state-title"),class:"px-4",$$slots:{default:[Ie]},$$scope:{ctx:i}}}),{c(){D(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,l){T(e,t,l),n=!0},p(t,l){const o={};l&8194&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function oe(i){let e,n;return e=new de({props:{onFetch:i[2],onError:i[3],"aria-label":h("deployments.deployments"),pageSizeSelectLabel:h("common.per-page"),nextButtonLabel:h("common.next"),previousButtonLabel:h("common.previous"),emptyStateMessage:h("deployments.empty-state-title"),errorMessage:h("deployments.error-message-fetching"),$$slots:{empty:[Ae],headers:[Fe],header:[Pe],caption:[Te],default:[Ce,({visibleItems:t})=>({9:t}),({visibleItems:t})=>t?512:0]},$$scope:{ctx:i}}}),{c(){D(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,l){T(e,t,l),n=!0},p(t,l){const o={};l&4&&(o.onFetch=t[2]),l&8706&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Be(i){let e,n=[i[0]],t,l=oe(i);return{c(){e=$("div"),l.c(),this.h()},l(o){e=y(o,"DIV",{class:!0});var s=k(e);l.l(s),s.forEach(u),this.h()},h(){v(e,"class","flex flex-col gap-4")},m(o,s){_(o,e,s),l.m(e,null),t=!0},p(o,[s]){s&1&&M(n,n=[o[0]])?(B(),p(l,1,1,q),R(),l=oe(o),l.c(),m(l,1),l.m(e,null)):l.p(o,s)},i(o){t||(m(l),t=!0)},o(o){p(l),t=!1},d(o){o&&u(e),l.d(o)}}}function Re(i,e,n){let t,l,o;S(i,Q,f=>n(5,o=f));let s="";const a=f=>{var c;n(1,s=((c=f==null?void 0:f.body)===null||c===void 0?void 0:c.message)||h("deployments.error-message-fetching"))},r=[{label:h("deployments.name"),pinned:!0},{label:h("deployments.deployment-version"),pinned:!0},{label:h("deployments.deployed"),pinned:!0},{label:h("deployments.workflows"),pinned:!0}];return i.$$.update=()=>{i.$$.dirty&32&&n(0,t=o.params.namespace),i.$$.dirty&1&&n(2,l=()=>(n(1,s=""),pe(t,"",a)))},[t,s,l,a,r,o]}class Se extends z{constructor(e){super(),O(this,e,Re,Be,M,{})}}function qe(i){let e,n,t,l;return e=new ie({props:{title:"Deployments",url:i[0].url.href}}),t=new Se({}),{c(){D(e.$$.fragment),n=W(),D(t.$$.fragment)},l(o){C(e.$$.fragment,o),n=I(o),C(t.$$.fragment,o)},m(o,s){T(e,o,s),_(o,n,s),T(t,o,s),l=!0},p(o,[s]){const a={};s&1&&(a.url=o[0].url.href),e.$set(a)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){p(e.$$.fragment,o),p(t.$$.fragment,o),l=!1},d(o){o&&u(n),V(e,o),V(t,o)}}}function Ne(i,e,n){let t;return S(i,Q,l=>n(0,t=l)),[t]}class et extends z{constructor(e){super(),O(this,e,Ne,qe,M,{})}}export{et as component};
