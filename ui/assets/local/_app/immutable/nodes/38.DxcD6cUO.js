import{s as K,d as b,x as nt,i as j,h as S,j as q,k as D,l as F,e as L,n as O,f as R,c as A,m as M,t as Q,L as G}from"../chunks/scheduler.gES7FyoG.js";import{S as U,i as X,d as B,t as I,a as k,g as st,e as at,m as N,c as T,b as H}from"../chunks/index.DpnGbpCk.js";import{p as Z}from"../chunks/stores.DNIlqTA7.js";import{P as lt}from"../chunks/page-title.ClCB4mI7.js";import{t as it}from"../chunks/translate.DzDeFYDI.js";import{e as V}from"../chunks/each.CDwUSmAp.js";import{E as ft}from"../chunks/event-summary-row.CUoXqVHo.js";import{B as W}from"../chunks/button.8dBRSgFy.js";import{g as ut}from"../chunks/index.BjcepZxU.js";import{i as mt}from"../chunks/index.BhTyvDLq.js";import{f as ct}from"../chunks/events-service.DmRLJr_h.js";import{f as C,a as pt}from"../chunks/events.DwbEmCRG.js";import{w as dt}from"../chunks/workflow-run.BYy1uAkl.js";function Y(e,r,t){const a=e.slice();return a[23]=r[t],a[25]=t,a}function gt(e){let r;return{c(){r=Q("Show Previous 10")},l(t){r=M(t,"Show Previous 10")},m(t,a){j(t,r,a)},d(t){t&&b(r)}}}function J(e){let r,t;function a(...s){return e[20](e[23],...s)}return r=new ft({props:{event:e[23],index:e[25],group:e[5].find(a),initialItem:e[2][0]}}),{c(){H(r.$$.fragment)},l(s){T(r.$$.fragment,s)},m(s,n){N(r,s,n),t=!0},p(s,n){e=s;const m={};n&2&&(m.event=e[23]),n&34&&(m.group=e[5].find(a)),n&4&&(m.initialItem=e[2][0]),r.$set(m)},i(s){t||(k(r.$$.fragment,s),t=!0)},o(s){I(r.$$.fragment,s),t=!1},d(s){B(r,s)}}}function ht(e){let r;return{c(){r=Q("Show Next 10")},l(t){r=M(t,"Show Next 10")},m(t,a){j(t,r,a)},d(t){t&&b(r)}}}function _t(e){let r,t,a,s,n,m,c,d,g,$;t=new W({props:{variant:"secondary",size:"xs",leadingIcon:"arrow-up",disabled:e[0][0]==="1"||e[4],"data-testid":"load-previous",$$slots:{default:[gt]},$$scope:{ctx:e}}}),t.$on("click",e[6]);let h=V(e[1]),i=[];for(let o=0;o<h.length;o+=1)i[o]=J(Y(e,h,o));const P=o=>I(i[o],1,1,()=>{i[o]=null});return g=new W({props:{variant:"secondary",size:"xs",leadingIcon:"arrow-down",disabled:e[0][e[0].length-1]===e[3]||e[4],"data-testid":"load-next",$$slots:{default:[ht]},$$scope:{ctx:e}}}),g.$on("click",e[7]),{c(){r=O("div"),H(t.$$.fragment),a=R(),s=O("table"),n=O("thead"),m=R(),c=O("tbody");for(let o=0;o<i.length;o+=1)i[o].c();d=R(),H(g.$$.fragment),this.h()},l(o){r=D(o,"DIV",{class:!0,"data-testid":!0});var l=F(r);T(t.$$.fragment,l),a=L(l),s=D(l,"TABLE",{});var f=F(s);n=D(f,"THEAD",{}),F(n).forEach(b),m=L(f),c=D(f,"TBODY",{class:!0});var _=F(c);for(let u=0;u<i.length;u+=1)i[u].l(_);_.forEach(b),f.forEach(b),d=L(l),T(g.$$.fragment,l),l.forEach(b),this.h()},h(){q(c,"class","svelte-4cez6d"),q(r,"class","flex flex-col gap-2 px-8 pb-24 pt-2"),q(r,"data-testid","event-summary-log")},m(o,l){j(o,r,l),N(t,r,null),S(r,a),S(r,s),S(s,n),S(s,m),S(s,c);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(c,null);S(r,d),N(g,r,null),$=!0},p(o,[l]){const f={};if(l&17&&(f.disabled=o[0][0]==="1"||o[4]),l&67108864&&(f.$$scope={dirty:l,ctx:o}),t.$set(f),l&38){h=V(o[1]);let u;for(u=0;u<h.length;u+=1){const w=Y(o,h,u);i[u]?(i[u].p(w,l),k(i[u],1)):(i[u]=J(w),i[u].c(),k(i[u],1),i[u].m(c,null))}for(st(),u=h.length;u<i.length;u+=1)P(u);at()}const _={};l&25&&(_.disabled=o[0][o[0].length-1]===o[3]||o[4]),l&67108864&&(_.$$scope={dirty:l,ctx:o}),g.$set(_)},i(o){if(!$){k(t.$$.fragment,o);for(let l=0;l<h.length;l+=1)k(i[l]);k(g.$$.fragment,o),$=!0}},o(o){I(t.$$.fragment,o),i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)I(i[l]);I(g.$$.fragment,o),$=!1},d(o){o&&b(r),B(t),nt(i,o),B(g)}}}function wt(e,r,t){let a,s,n,m,c,d,g,$,h,i,P,o,l,f,_,u,w;A(e,C,p=>t(2,f=p)),A(e,pt,p=>t(17,_=p)),A(e,dt,p=>t(18,u=p)),A(e,Z,p=>t(19,w=p));var z;const x=()=>{G(C,f=[],f)},tt=async(p,v,E)=>{f.length||(x(),G(C,f=await ct({namespace:p,workflowId:v,runId:E}),f))},et=()=>{const p=parseInt(c[0]),v=[],E=p-10;for(let y=0;y<10;y++)E+y>0&&v.push((E+y).toString());t(0,c=[...v,...c])},rt=()=>{const p=parseInt(c[c.length-1]),v=[],E=p+1;for(let y=0;y<10;y++)E+y<=f.length&&v.push((E+y).toString());t(0,c=[...c,...v])},ot=(p,v)=>mt(p)&&v.eventIds.has(p.id);return e.$$.update=()=>{e.$$.dirty&524288&&t(16,{id:a,namespace:s,workflow:n,run:m}=w.params,a,(t(15,s),t(19,w)),(t(14,n),t(19,w)),(t(13,m),t(19,w))),e.$$.dirty&65536&&t(0,c=[a]),e.$$.dirty&57344&&tt(s,n,m),e.$$.dirty&262144&&t(12,{workflow:d}=u,d),e.$$.dirty&4096&&t(11,g=d==null?void 0:d.pendingActivities),e.$$.dirty&4096&&t(10,$=d==null?void 0:d.pendingNexusOperations),e.$$.dirty&3076&&t(9,h=ut(f,"ascending",g,$)),e.$$.dirty&131584&&t(5,i=_==="ascending"?h:[...h].reverse()),e.$$.dirty&5&&t(1,P=f.filter(p=>c.includes(p.id))),e.$$.dirty&2&&t(4,o=!P.length),e.$$.dirty&260&&t(3,l=t(8,z=f[f.length-1])===null||z===void 0?void 0:z.id)},[c,P,f,l,o,i,et,rt,z,h,$,g,d,m,n,s,a,_,u,w,ot]}class vt extends U{constructor(r){super(),X(this,r,wt,_t,K,{})}}function yt(e){let r,t,a,s;return r=new lt({props:{title:`${it("workflows.workflow-history")} | ${e[1]} | Event ${e[2]}`,url:e[0].url.href}}),a=new vt({}),{c(){H(r.$$.fragment),t=R(),H(a.$$.fragment)},l(n){T(r.$$.fragment,n),t=L(n),T(a.$$.fragment,n)},m(n,m){N(r,n,m),j(n,t,m),N(a,n,m),s=!0},p(n,[m]){const c={};m&1&&(c.url=n[0].url.href),r.$set(c)},i(n){s||(k(r.$$.fragment,n),k(a.$$.fragment,n),s=!0)},o(n){I(r.$$.fragment,n),I(a.$$.fragment,n),s=!1},d(n){n&&b(t),B(r,n),B(a,n)}}}function $t(e,r,t){let a;A(e,Z,m=>t(0,a=m));const s=a.params.workflow,n=a.params.id;return[a,s,n]}class Ft extends U{constructor(r){super(),X(this,r,$t,yt,K,{})}}export{Ft as component};
