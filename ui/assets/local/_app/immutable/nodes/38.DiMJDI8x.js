import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as L,l as c,a as it,b as M,g as t,d as w,e as j,c as k,m as r,s,az as R,n as C,r as B,f as lt}from"../chunks/BZ1i_Yzi.js";import{t as Q,a as I,b as D}from"../chunks/B11KKQxI.js";import{i as U}from"../chunks/EXou6kTq.js";import{s as V,a as $,b as J}from"../chunks/nHCSEYHe.js";import{p as X}from"../chunks/SXOLhmgQ.js";import{P as ct}from"../chunks/BSbw5w3E.js";import{t as dt}from"../chunks/D2OY9xdY.js";import{e as pt,i as ft}from"../chunks/DT_Kaee1.js";import{E as ut}from"../chunks/BOPkQmE5.js";import{B as K}from"../chunks/BpOlgbFu.js";import{g as mt}from"../chunks/BsBF8I4U.js";import{i as vt}from"../chunks/Bo7JhQ2o.js";import{f as gt}from"../chunks/CsbU4aMx.js";import{f as O,e as wt}from"../chunks/F5lX1OIf.js";import{w as $t}from"../chunks/Dp52_Yis.js";var _t=Q('<div class="flex flex-col gap-2 px-8 pb-24 pt-2" data-testid="event-summary-log"><!> <table><thead></thead><tbody class="svelte-4cez6d"></tbody></table> <!></div>');function ht(E,S){L(S,!1);const[f,P]=V(),u=()=>$(X,"$page",f),i=()=>$(O,"$fullEventHistory",f),_=()=>$($t,"$workflowRun",f),g=()=>$(wt,"$eventFilterSort",f),p=r(),m=r(),v=r(),h=r(),n=r(),d=r(),z=r(),F=r(),x=r(),T=r(),y=r(),H=r(),q=r();var b=r();const Y=()=>{J(O,[])},Z=async(e,o,a)=>{i().length||(Y(),J(O,await gt({namespace:e,workflowId:o,runId:a})))},tt=()=>{const e=parseInt(t(n)[0]),o=[],a=e-10;for(let l=0;l<10;l++)a+l>0&&o.push((a+l).toString());s(n,[...o,...t(n)])},et=()=>{const e=parseInt(t(n)[t(n).length-1]),o=[],a=e+1;for(let l=0;l<10;l++)a+l<=i().length&&o.push((a+l).toString());s(n,[...t(n),...o])};c(()=>(t(p),t(m),t(v),t(h),u()),()=>{(e=>(s(p,e.id),s(m,e.namespace),s(v,e.workflow),s(h,e.run)))(u().params)}),c(()=>t(p),()=>{s(n,[t(p)])}),c(()=>(t(m),t(v),t(h)),()=>{Z(t(m),t(v),t(h))}),c(()=>(t(d),_()),()=>{(e=>s(d,e.workflow))(_())}),c(()=>t(d),()=>{s(z,t(d)===null||t(d)===void 0?void 0:t(d).pendingActivities)}),c(()=>t(d),()=>{s(F,t(d)===null||t(d)===void 0?void 0:t(d).pendingNexusOperations)}),c(()=>(i(),t(z),t(F)),()=>{s(x,mt(i(),"ascending",t(z),t(F)))}),c(()=>(g(),t(x)),()=>{s(T,g()==="ascending"?t(x):[...t(x)].reverse())}),c(()=>(i(),t(n)),()=>{s(y,i().filter(e=>t(n).includes(e.id)))}),c(()=>t(y),()=>{s(H,!t(y).length)}),c(()=>(R(b),i()),()=>{s(q,s(b,i()[i().length-1])===null||R(b)===void 0?void 0:R(b).id)}),it(),U();var N=_t(),G=j(N);const st=w(()=>t(n)[0]==="1"||t(H));K(G,{variant:"secondary",size:"xs",leadingIcon:"arrow-up",get disabled(){return t(st)},"data-testid":"load-previous",$$events:{click:tt},children:(e,o)=>{C();var a=D("Show Previous 10");I(e,a)},$$slots:{default:!0}});var A=k(G,2),W=k(j(A));pt(W,5,()=>t(y),ft,(e,o,a)=>{const l=w(()=>t(o).id===t(p)),nt=w(()=>t(T).find(at=>vt(t(o))&&at.eventIds.has(t(o).id)));ut(e,{get event(){return t(o)},index:a,get expanded(){return t(l)},get group(){return t(nt)},get initialItem(){return i()[0]}})}),B(W),B(A);var ot=k(A,2);const rt=w(()=>t(n)[t(n).length-1]===t(q)||t(H));K(ot,{variant:"secondary",size:"xs",leadingIcon:"arrow-down",get disabled(){return t(rt)},"data-testid":"load-next",$$events:{click:et},children:(e,o)=>{C();var a=D("Show Next 10");I(e,a)},$$slots:{default:!0}}),B(N),I(E,N),M(),P()}var xt=Q("<!> <!>",1);function Gt(E,S){L(S,!1);const[f,P]=V(),u=()=>$(X,"$page",f),i=u().params.workflow,_=u().params.id;U();var g=xt(),p=lt(g);const m=w(()=>`${dt("workflows.workflow-history")} | ${i} | Event ${_}`);ct(p,{get title(){return t(m)},get url(){return u().url.href}});var v=k(p,2);ht(v,{}),I(E,g),M(),P()}export{Gt as component};
