import{s as Ee,v as P,d as f,o as M,i as re,h as s,j as v,k as p,l as u,m as E,e as b,n as m,t as k,f as g,c as Ie,r as nt,L as it,a1 as ge,G as xe,w as et}from"../chunks/scheduler.gES7FyoG.js";import{S as we,i as Pe,d as X,t as F,a as j,g as rt,e as lt,m as Y,c as Z,b as x}from"../chunks/index.DpnGbpCk.js";import{p as ct}from"../chunks/stores.DNIlqTA7.js";import{P as ft}from"../chunks/page-title.ClCB4mI7.js";import{t as V}from"../chunks/translate.DzDeFYDI.js";import{h as pt,u as ut}from"../chunks/await_block.DZqQ62ob.js";import{f as Re,t as mt,r as dt}from"../chunks/time-format.D51GACyM.js";import{B as ht}from"../chunks/badge.CaNx3HvD.js";import{T as vt}from"../chunks/toggle-switch.RudSEM5G.js";import{T as _t}from"../chunks/tooltip.BwIPcgk-.js";import{a as ye,d as $t}from"../chunks/batch-operations.D8_8nQps.js";import{C as tt}from"../chunks/card.B8kKqjal.js";import{L as bt}from"../chunks/link.BJBjrbgF.js";import{s as at}from"../chunks/route-for.D8R1TGjB.js";function gt(o){let e,a,t=V("batch.details")+"",n,r,c,l,i=V("batch.operation-type")+"",d,h,O,z=o[0].operationType+"",B,U,_,$,D=V("batch.identity")+"",S,A,T,H=o[0].identity+"",q,G,y,K,me=V("common.reason")+"",de,J,Q,ee=o[0].reason+"",fe,W,R,te,ae=V("common.start-time")+"",C,w,le,oe=Re(o[0].startTime,o[1],{relative:o[2]})+"",ne,ve,L,ie,he=V("common.close-time")+"",pe,_e,ce,se=Re(o[0].closeTime,o[1],{relative:o[2]})+"",De,Ne,ue,$e,Be=V("batch.total-operations")+"",Fe,Ae,be,ke=Intl.NumberFormat("en-US").format(o[0].totalOperationCount)+"",Ve;return{c(){e=m("div"),a=m("p"),n=k(t),r=g(),c=m("div"),l=m("p"),d=k(i),h=g(),O=m("p"),B=k(z),U=g(),_=m("div"),$=m("p"),S=k(D),A=g(),T=m("p"),q=k(H),G=g(),y=m("div"),K=m("p"),de=k(me),J=g(),Q=m("p"),fe=k(ee),W=g(),R=m("div"),te=m("p"),C=k(ae),w=g(),le=m("p"),ne=k(oe),ve=g(),L=m("div"),ie=m("p"),pe=k(he),_e=g(),ce=m("p"),De=k(se),Ne=g(),ue=m("div"),$e=m("p"),Fe=k(Be),Ae=g(),be=m("p"),Ve=k(ke),this.h()},l(N){e=p(N,"DIV",{class:!0});var I=u(e);a=p(I,"P",{});var Ue=u(a);n=E(Ue,t),Ue.forEach(f),r=b(I),c=p(I,"DIV",{class:!0});var ze=u(c);l=p(ze,"P",{class:!0});var Le=u(l);d=E(Le,i),Le.forEach(f),h=b(ze),O=p(ze,"P",{class:!0});var Me=u(O);B=E(Me,z),Me.forEach(f),ze.forEach(f),U=b(I),_=p(I,"DIV",{class:!0});var Ce=u(_);$=p(Ce,"P",{class:!0});var He=u($);S=E(He,D),He.forEach(f),A=b(Ce),T=p(Ce,"P",{class:!0});var qe=u(T);q=E(qe,H),qe.forEach(f),Ce.forEach(f),G=b(I),y=p(I,"DIV",{class:!0});var Te=u(y);K=p(Te,"P",{class:!0});var Ge=u(K);de=E(Ge,me),Ge.forEach(f),J=b(Te),Q=p(Te,"P",{class:!0});var Ke=u(Q);fe=E(Ke,ee),Ke.forEach(f),Te.forEach(f),W=b(I),R=p(I,"DIV",{class:!0});var je=u(R);te=p(je,"P",{class:!0});var Je=u(te);C=E(Je,ae),Je.forEach(f),w=b(je),le=p(je,"P",{class:!0});var Qe=u(le);ne=E(Qe,oe),Qe.forEach(f),je.forEach(f),ve=b(I),L=p(I,"DIV",{class:!0});var Oe=u(L);ie=p(Oe,"P",{class:!0});var We=u(ie);pe=E(We,he),We.forEach(f),_e=b(Oe),ce=p(Oe,"P",{class:!0});var Xe=u(ce);De=E(Xe,se),Xe.forEach(f),Oe.forEach(f),Ne=b(I),ue=p(I,"DIV",{class:!0});var Se=u(ue);$e=p(Se,"P",{class:!0});var Ye=u($e);Fe=E(Ye,Be),Ye.forEach(f),Ae=b(Se),be=p(Se,"P",{class:!0});var Ze=u(be);Ve=E(Ze,ke),Ze.forEach(f),Se.forEach(f),I.forEach(f),this.h()},h(){v(l,"class","batch-operation-key svelte-z5po3c"),v(O,"class","batch-operation-value svelte-z5po3c"),v(c,"class","batch-operation-detail svelte-z5po3c"),v($,"class","batch-operation-key svelte-z5po3c"),v(T,"class","batch-operation-value svelte-z5po3c"),v(_,"class","batch-operation-detail svelte-z5po3c"),v(K,"class","batch-operation-key svelte-z5po3c"),v(Q,"class","batch-operation-value svelte-z5po3c"),v(y,"class","batch-operation-detail svelte-z5po3c"),v(te,"class","batch-operation-key svelte-z5po3c"),v(le,"class","batch-operation-value svelte-z5po3c"),v(R,"class","batch-operation-detail svelte-z5po3c"),v(ie,"class","batch-operation-key svelte-z5po3c"),v(ce,"class","batch-operation-value svelte-z5po3c"),v(L,"class","batch-operation-detail svelte-z5po3c"),v($e,"class","batch-operation-key svelte-z5po3c"),v(be,"class","batch-operation-value svelte-z5po3c"),v(ue,"class","batch-operation-detail svelte-z5po3c"),v(e,"class","flex flex-col gap-2")},m(N,I){re(N,e,I),s(e,a),s(a,n),s(e,r),s(e,c),s(c,l),s(l,d),s(c,h),s(c,O),s(O,B),s(e,U),s(e,_),s(_,$),s($,S),s(_,A),s(_,T),s(T,q),s(e,G),s(e,y),s(y,K),s(K,de),s(y,J),s(y,Q),s(Q,fe),s(e,W),s(e,R),s(R,te),s(te,C),s(R,w),s(R,le),s(le,ne),s(e,ve),s(e,L),s(L,ie),s(ie,pe),s(L,_e),s(L,ce),s(ce,De),s(e,Ne),s(e,ue),s(ue,$e),s($e,Fe),s(ue,Ae),s(ue,be),s(be,Ve)},p(N,[I]){I&1&&z!==(z=N[0].operationType+"")&&M(B,z),I&1&&H!==(H=N[0].identity+"")&&M(q,H),I&1&&ee!==(ee=N[0].reason+"")&&M(fe,ee),I&7&&oe!==(oe=Re(N[0].startTime,N[1],{relative:N[2]})+"")&&M(ne,oe),I&7&&se!==(se=Re(N[0].closeTime,N[1],{relative:N[2]})+"")&&M(De,se),I&1&&ke!==(ke=Intl.NumberFormat("en-US").format(N[0].totalOperationCount)+"")&&M(Ve,ke)},i:P,o:P,d(N){N&&f(e)}}}function Et(o,e,a){let t,n;Ie(o,mt,c=>a(1,t=c)),Ie(o,dt,c=>a(2,n=c));let{operation:r}=e;return o.$$set=c=>{"operation"in c&&a(0,r=c.operation)},[r,t,n]}class kt extends we{constructor(e){super(),Pe(this,e,Et,gt,Ee,{operation:0})}}function It(o){let e=o[0].state+"",a;return{c(){a=k(e)},l(t){a=E(t,e)},m(t,n){re(t,a,n)},p(t,n){n&1&&e!==(e=t[0].state+"")&&M(a,e)},d(t){t&&f(a)}}}function ot(o){let e,a;return e=new _t({props:{top:!0,text:V("common.auto-refresh-tooltip",{interval:"5"}),$$slots:{default:[wt]},$$scope:{ctx:o}}}),{c(){x(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,n){Y(e,t,n),a=!0},p(t,n){const r={};n&34&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){a||(j(e.$$.fragment,t),a=!0)},o(t){F(e.$$.fragment,t),a=!1},d(t){X(e,t)}}}function wt(o){let e,a;return e=new vt({props:{id:"batch-operation-auto-refresh",label:V("common.auto-refresh"),labelPosition:"left",checked:o[1]}}),e.$on("change",o[2]),{c(){x(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,n){Y(e,t,n),a=!0},p(t,n){const r={};n&2&&(r.checked=t[1]),e.$set(r)},i(t){a||(j(e.$$.fragment,t),a=!0)},o(t){F(e.$$.fragment,t),a=!1},d(t){X(e,t)}}}function Pt(o){let e,a,t,n,r=V("batch.describe-page-title")+"",c,l,i,d,h,O=o[0].jobId+"",z,B,U;i=new ht({props:{type:o[3][o[0].state],$$slots:{default:[It]},$$scope:{ctx:o}}});let _=o[0].state==="Running"&&ot(o);return{c(){e=m("div"),a=m("div"),t=m("div"),n=m("h1"),c=k(r),l=g(),x(i.$$.fragment),d=g(),h=m("p"),z=k(O),B=g(),_&&_.c(),this.h()},l($){e=p($,"DIV",{class:!0});var D=u(e);a=p(D,"DIV",{class:!0});var S=u(a);t=p(S,"DIV",{class:!0});var A=u(t);n=p(A,"H1",{});var T=u(n);c=E(T,r),T.forEach(f),l=b(A),Z(i.$$.fragment,A),A.forEach(f),d=b(S),h=p(S,"P",{});var H=u(h);z=E(H,O),H.forEach(f),S.forEach(f),B=b(D),_&&_.l(D),D.forEach(f),this.h()},h(){v(t,"class","flex flex-row items-center gap-2 max-sm:flex-col"),v(a,"class","flex flex-col gap-2"),v(e,"class","flex items-center justify-between")},m($,D){re($,e,D),s(e,a),s(a,t),s(t,n),s(n,c),s(t,l),Y(i,t,null),s(a,d),s(a,h),s(h,z),s(e,B),_&&_.m(e,null),U=!0},p($,[D]){const S={};D&1&&(S.type=$[3][$[0].state]),D&33&&(S.$$scope={dirty:D,ctx:$}),i.$set(S),(!U||D&1)&&O!==(O=$[0].jobId+"")&&M(z,O),$[0].state==="Running"?_?(_.p($,D),D&1&&j(_,1)):(_=ot($),_.c(),j(_,1),_.m(e,null)):_&&(rt(),F(_,1,1,()=>{_=null}),lt())},i($){U||(j(i.$$.fragment,$),j(_),U=!0)},o($){F(i.$$.fragment,$),F(_),U=!1},d($){$&&f(e),X(i),_&&_.d()}}}function Dt(o,e,a){let t;Ie(o,ye,i=>a(1,t=i));let{operation:n}=e;const r=nt(),c=i=>{const{checked:d}=i.target;r("toggleAutoRefresh",{checked:d}),it(ye,t=d,t)},l={Completed:"success",Running:"primary",Failed:"danger",Unspecified:void 0};return o.$$set=i=>{"operation"in i&&a(0,n=i.operation)},[n,t,c,l]}class Vt extends we{constructor(e){super(),Pe(this,e,Dt,Pt,Ee,{operation:0})}}function zt(o){let e,a,t=V("batch.results")+"",n,r,c,l,i,d=V("batch.operations-progress",{percent:o[3]})+"",h,O,z,B=Intl.NumberFormat("en-US").format(o[0].completeOperationCount)+"",U,_,$=Intl.NumberFormat("en-US").format(o[0].totalOperationCount)+"",D,S,A,T,H,q,G,y,K=V("batch.operations-succeeded",{count:o[0].completeOperationCount})+"",me,de,J,Q=V("batch.operations-failed",{count:o[0].failureOperationCount})+"",ee,fe,W,R,te,ae;return{c(){e=m("div"),a=m("p"),n=k(t),r=g(),c=m("div"),l=m("div"),i=m("span"),h=k(d),O=g(),z=m("span"),U=k(B),_=k(" / "),D=k($),S=g(),A=m("div"),T=m("div"),H=g(),q=m("div"),G=m("div"),y=m("span"),me=k(K),de=g(),J=m("span"),ee=k(Q),fe=g(),W=m("div"),R=m("div"),te=g(),ae=m("div"),this.h()},l(C){e=p(C,"DIV",{class:!0});var w=u(e);a=p(w,"P",{});var le=u(a);n=E(le,t),le.forEach(f),r=b(w),c=p(w,"DIV",{});var oe=u(c);l=p(oe,"DIV",{class:!0});var ne=u(l);i=p(ne,"SPAN",{class:!0});var ve=u(i);h=E(ve,d),ve.forEach(f),O=b(ne),z=p(ne,"SPAN",{class:!0});var L=u(z);U=E(L,B),_=E(L," / "),D=E(L,$),L.forEach(f),ne.forEach(f),S=b(oe),A=p(oe,"DIV",{class:!0});var ie=u(A);T=p(ie,"DIV",{class:!0,style:!0}),u(T).forEach(f),ie.forEach(f),oe.forEach(f),H=b(w),q=p(w,"DIV",{});var he=u(q);G=p(he,"DIV",{class:!0});var pe=u(G);y=p(pe,"SPAN",{class:!0});var _e=u(y);me=E(_e,K),_e.forEach(f),de=b(pe),J=p(pe,"SPAN",{class:!0});var ce=u(J);ee=E(ce,Q),ce.forEach(f),pe.forEach(f),fe=b(he),W=p(he,"DIV",{class:!0});var se=u(W);R=p(se,"DIV",{style:!0,class:!0}),u(R).forEach(f),te=b(se),ae=p(se,"DIV",{style:!0,class:!0}),u(ae).forEach(f),se.forEach(f),he.forEach(f),w.forEach(f),this.h()},h(){v(i,"class","text-xs font-semibold"),v(z,"class","text-xs font-semibold"),v(l,"class","flex justify-between"),v(T,"class","absolute left-0 flex h-full items-center bg-indigo-600"),ge(T,"width",o[3]+"%"),v(A,"class","relative h-2 w-full overflow-hidden rounded bg-indigo-100"),v(y,"class","text-xs font-semibold text-green-700"),v(J,"class","text-xs font-semibold"),xe(J,"text-red-700",o[2]>0),v(G,"class","flex justify-between"),ge(R,"width",o[1]+"%"),v(R,"class","absolute left-0 flex h-full items-center bg-green-200"),ge(ae,"width",o[2]+"%"),v(ae,"class","absolute right-0 flex h-full items-center justify-end bg-red-200"),v(W,"class","relative h-2 w-full overflow-hidden rounded"),v(e,"class","flex flex-col gap-4")},m(C,w){re(C,e,w),s(e,a),s(a,n),s(e,r),s(e,c),s(c,l),s(l,i),s(i,h),s(l,O),s(l,z),s(z,U),s(z,_),s(z,D),s(c,S),s(c,A),s(A,T),s(e,H),s(e,q),s(q,G),s(G,y),s(y,me),s(G,de),s(G,J),s(J,ee),s(q,fe),s(q,W),s(W,R),s(W,te),s(W,ae)},p(C,[w]){w&8&&d!==(d=V("batch.operations-progress",{percent:C[3]})+"")&&M(h,d),w&1&&B!==(B=Intl.NumberFormat("en-US").format(C[0].completeOperationCount)+"")&&M(U,B),w&1&&$!==($=Intl.NumberFormat("en-US").format(C[0].totalOperationCount)+"")&&M(D,$),w&8&&ge(T,"width",C[3]+"%"),w&1&&K!==(K=V("batch.operations-succeeded",{count:C[0].completeOperationCount})+"")&&M(me,K),w&1&&Q!==(Q=V("batch.operations-failed",{count:C[0].failureOperationCount})+"")&&M(ee,Q),w&4&&xe(J,"text-red-700",C[2]>0),w&2&&ge(R,"width",C[1]+"%"),w&4&&ge(ae,"width",C[2]+"%")},i:P,o:P,d(C){C&&f(e)}}}function Ct(o,e,a){let{operation:t}=e,n,r,c;return o.$$set=l=>{"operation"in l&&a(0,t=l.operation)},o.$$.update=()=>{if(o.$$.dirty&1){const{completeOperationCount:l,failureOperationCount:i,totalOperationCount:d}=t;a(1,n=Math.round(l/d*100)),a(2,r=Math.round(i/d*100)),a(3,c=Math.round((l+i)/d*100))}},[t,n,r,c]}class Tt extends we{constructor(e){super(),Pe(this,e,Ct,zt,Ee,{operation:0})}}function jt(o){let e=V("batch.back-link")+"",a;return{c(){a=k(e)},l(t){a=E(t,e)},m(t,n){re(t,a,n)},p:P,d(t){t&&f(a)}}}function Ot(o){return{c:P,l:P,m:P,p:P,i:P,o:P,d:P}}function St(o){let e,a,t,n,r,c;return e=new Vt({props:{operation:o[7]}}),e.$on("toggleAutoRefresh",o[2]),t=new tt({props:{$$slots:{default:[Rt]},$$scope:{ctx:o}}}),r=new tt({props:{$$slots:{default:[Nt]},$$scope:{ctx:o}}}),{c(){x(e.$$.fragment),a=g(),x(t.$$.fragment),n=g(),x(r.$$.fragment)},l(l){Z(e.$$.fragment,l),a=b(l),Z(t.$$.fragment,l),n=b(l),Z(r.$$.fragment,l)},m(l,i){Y(e,l,i),re(l,a,i),Y(t,l,i),re(l,n,i),Y(r,l,i),c=!0},p(l,i){const d={};i&256&&(d.$$scope={dirty:i,ctx:l}),t.$set(d);const h={};i&256&&(h.$$scope={dirty:i,ctx:l}),r.$set(h)},i(l){c||(j(e.$$.fragment,l),j(t.$$.fragment,l),j(r.$$.fragment,l),c=!0)},o(l){F(e.$$.fragment,l),F(t.$$.fragment,l),F(r.$$.fragment,l),c=!1},d(l){l&&(f(a),f(n)),X(e,l),X(t,l),X(r,l)}}}function Rt(o){let e,a;return e=new kt({props:{operation:o[7]}}),{c(){x(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,n){Y(e,t,n),a=!0},p:P,i(t){a||(j(e.$$.fragment,t),a=!0)},o(t){F(e.$$.fragment,t),a=!1},d(t){X(e,t)}}}function Nt(o){let e,a;return e=new Tt({props:{operation:o[7]}}),{c(){x(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,n){Y(e,t,n),a=!0},p:P,i(t){a||(j(e.$$.fragment,t),a=!0)},o(t){F(e.$$.fragment,t),a=!1},d(t){X(e,t)}}}function Ft(o){return{c:P,l:P,m:P,p:P,i:P,o:P,d:P}}function st(o){let e,a,t={ctx:o,current:null,token:null,hasCatch:!1,pending:Ft,then:St,catch:Ot,value:7,blocks:[,,,]};return pt(o[3](),t),{c(){e=et(),t.block.c()},l(n){e=et(),t.block.l(n)},m(n,r){re(n,e,r),t.block.m(n,t.anchor=r),t.mount=()=>e.parentNode,t.anchor=e,a=!0},p(n,r){o=n,ut(t,o,r)},i(n){a||(j(t.block),a=!0)},o(n){for(let r=0;r<3;r+=1){const c=t.blocks[r];F(c)}a=!1},d(n){n&&f(e),t.block.d(n),t.token=null,t=null}}}function At(o){let e,a,t,n,r=o[1],c;t=new bt({props:{href:at({namespace:o[0]}),icon:"chevron-left",$$slots:{default:[jt]},$$scope:{ctx:o}}});let l=st(o);return{c(){e=m("div"),a=m("div"),x(t.$$.fragment),n=g(),l.c(),this.h()},l(i){e=p(i,"DIV",{class:!0});var d=u(e);a=p(d,"DIV",{class:!0});var h=u(a);Z(t.$$.fragment,h),h.forEach(f),n=b(d),l.l(d),d.forEach(f),this.h()},h(){v(a,"class","flex flex-row"),v(e,"class","flex flex-col gap-4")},m(i,d){re(i,e,d),s(e,a),Y(t,a,null),s(e,n),l.m(e,null),c=!0},p(i,[d]){const h={};d&1&&(h.href=at({namespace:i[0]})),d&256&&(h.$$scope={dirty:d,ctx:i}),t.$set(h),d&2&&Ee(r,r=i[1])?(rt(),F(l,1,1,P),lt(),l=st(i),l.c(),j(l,1),l.m(e,null)):l.p(i,d)},i(i){c||(j(t.$$.fragment,i),j(l),c=!0)},o(i){F(t.$$.fragment,i),F(l),c=!1},d(i){i&&f(e),X(t),l.d(i)}}}function yt(o,e,a){let t;Ie(o,ye,h=>a(6,t=h));let{namespace:n}=e,{jobId:r}=e,c=0,l;const i=h=>{h.detail.checked?a(1,c+=1):l&&window.clearTimeout(l)},d=()=>$t({jobId:r,namespace:n}).then(h=>(t&&h.state==="Running"&&(l=window.setTimeout(()=>{a(1,c+=1)},5e3)),h));return o.$$set=h=>{"namespace"in h&&a(0,n=h.namespace),"jobId"in h&&a(4,r=h.jobId)},[n,c,i,d,r]}class Bt extends we{constructor(e){super(),Pe(this,e,yt,At,Ee,{namespace:0,jobId:4})}}function Ut(o){let e,a,t,n;return e=new ft({props:{title:V("batch.describe-page-title")+" | "+o[0]}}),t=new Bt({props:{jobId:o[0],namespace:o[1]}}),{c(){x(e.$$.fragment),a=g(),x(t.$$.fragment)},l(r){Z(e.$$.fragment,r),a=b(r),Z(t.$$.fragment,r)},m(r,c){Y(e,r,c),re(r,a,c),Y(t,r,c),n=!0},p(r,[c]){const l={};c&1&&(l.title=V("batch.describe-page-title")+" | "+r[0]),e.$set(l);const i={};c&1&&(i.jobId=r[0]),c&2&&(i.namespace=r[1]),t.$set(i)},i(r){n||(j(e.$$.fragment,r),j(t.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),F(t.$$.fragment,r),n=!1},d(r){r&&f(a),X(e,r),X(t,r)}}}function Lt(o,e,a){let t,n,r;return Ie(o,ct,c=>a(2,r=c)),o.$$.update=()=>{o.$$.dirty&4&&a(1,t=r.params.namespace),o.$$.dirty&4&&a(0,n=r.params.jobId)},[n,t,r]}class aa extends we{constructor(e){super(),Pe(this,e,Lt,Ut,Ee,{})}}export{aa as component};
