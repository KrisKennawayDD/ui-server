import{s as ie,d as w,a1 as A,i as C,h as L,a9 as he,p as ce,aa as te,M as pe,k as S,l as N,n as U,U as ge,a as de,u as ve,g as be,b as we,e as F,f as B,a6 as $,O as se,m as J,t as K,a3 as ke,j as z,c as ee,L as ye,o as Ee}from"../chunks/scheduler.gES7FyoG.js";import{S as ue,i as fe,t as M,a as O,g as _e,e as me,h as Te,d as Q,m as X,c as Y,b as Z}from"../chunks/index.DpnGbpCk.js";import{e as le,u as Ie,o as Le}from"../chunks/each.CDwUSmAp.js";import{g as He}from"../chunks/entry.DvysN0vy.js";import{p as Ve}from"../chunks/stores.DNIlqTA7.js";import{P as Se}from"../chunks/page-title.ClCB4mI7.js";import{E as Ne}from"../chunks/empty-state.D2QxL8QK.js";import{I as Ue}from"../chunks/input.BJGbSm4T.js";import{t as H}from"../chunks/translate.DzDeFYDI.js";import{a as ze}from"../chunks/workflows.BZSAB0Cq.js";import{l as ae,n as Me}from"../chunks/namespaces.DgRsVgYf.js";import{t as Oe}from"../chunks/toaster.-GIuh4De.js";import{e as Re}from"../chunks/route-for.D8R1TGjB.js";function ne(n,e,s){const t=n.slice();return t[23]=e[s],t}const Pe=n=>({item:n&16}),re=n=>({item:n[23].data});function Ae(n){let e;return{c(){e=K("Missing template")},l(s){e=J(s,"Missing template")},m(s,t){C(s,e,t)},d(s){s&&w(e)}}}function oe(n,e){let s,t,i;const u=e[14].default,m=de(u,e,e[13],re),c=m||Ae();return{key:n,first:null,c(){s=U("svelte-virtual-list-row"),c&&c.c(),t=B(),this.h()},l(r){s=S(r,"SVELTE-VIRTUAL-LIST-ROW",{class:!0});var f=N(s);c&&c.l(f),t=F(f),f.forEach(w),this.h()},h(){te(s,"class","svelte-1kdxoed"),this.first=s},m(r,f){C(r,s,f),c&&c.m(s,null),L(s,t),i=!0},p(r,f){e=r,m&&m.p&&(!i||f&8208)&&ve(m,u,e,e[13],i?we(u,e[13],f,Pe):be(e[13]),re)},i(r){i||(O(c,r),i=!0)},o(r){M(c,r),i=!1},d(r){r&&w(s),c&&c.d(r)}}}function Ce(n){let e,s,t=[],i=new Map,u,m,c,r,f=le(n[4]);const v=o=>o[23].index;for(let o=0;o<f.length;o+=1){let l=ne(n,f,o),_=v(l);i.set(_,t[o]=oe(_,l))}return{c(){e=U("svelte-virtual-list-viewport"),s=U("svelte-virtual-list-contents");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=S(o,"SVELTE-VIRTUAL-LIST-VIEWPORT",{style:!0,class:!0});var l=N(e);s=S(l,"SVELTE-VIRTUAL-LIST-CONTENTS",{style:!0,class:!0});var _=N(s);for(let y=0;y<t.length;y+=1)t[y].l(_);_.forEach(w),l.forEach(w),this.h()},h(){A(s,"padding-top",n[5]+"px"),A(s,"padding-bottom",n[6]+"px"),te(s,"class","svelte-1kdxoed"),A(e,"height",n[0]),te(e,"class","svelte-1kdxoed"),pe(()=>n[17].call(e))},m(o,l){C(o,e,l),L(e,s);for(let _=0;_<t.length;_+=1)t[_]&&t[_].m(s,null);n[15](s),n[16](e),u=he(e,n[17].bind(e)),m=!0,c||(r=ce(e,"scroll",n[7]),c=!0)},p(o,[l]){l&8208&&(f=le(o[4]),_e(),t=Ie(t,l,v,1,o,f,i,s,Le,oe,null,ne),me()),(!m||l&32)&&A(s,"padding-top",o[5]+"px"),(!m||l&64)&&A(s,"padding-bottom",o[6]+"px"),(!m||l&1)&&A(e,"height",o[0])},i(o){if(!m){for(let l=0;l<f.length;l+=1)O(t[l]);m=!0}},o(o){for(let l=0;l<t.length;l+=1)M(t[l]);m=!1},d(o){o&&w(e);for(let l=0;l<t.length;l+=1)t[l].d();n[15](null),n[16](null),u(),c=!1,r()}}}function We(n,e,s){let{$$slots:t={},$$scope:i}=e,{items:u}=e,{height:m="100%"}=e,{itemHeight:c=void 0}=e,{start:r=0}=e,{end:f=0}=e,v=[],o,l,_,y=0,P,E,d=0,b=0,T;async function x(a,h,g){const{scrollTop:k}=l;await $();let I=d-k,p=r;for(;I<h&&p<a.length;){let W=o[p-r];W||(s(9,f=p+1),await $(),W=o[p-r]);const R=v[p]=g||W.offsetHeight;I+=R,p+=1}s(9,f=p);const G=a.length-f;T=(d+I)/f,s(6,b=G*T),v.length=a.length}async function D(){const{scrollTop:a}=l,h=r;for(let p=0;p<o.length;p+=1)v[r+p]=c||o[p].offsetHeight;let g=0,k=0;for(;g<u.length;){const p=v[g]||T;if(k+p>a){s(8,r=g),s(5,d=k);break}k+=p,g+=1}for(;g<u.length&&(k+=v[g]||T,g+=1,!(k>a+y)););s(9,f=g);const I=u.length-f;for(T=k/f;g<u.length;)v[g++]=T;if(s(6,b=I*T),r<h){await $();let p=0,G=0;for(let R=r;R<h;R+=1)o[R-r]&&(p+=v[R],G+=c||o[R-r].offsetHeight);const W=G-p;l.scrollTo(0,a+W)}}ge(()=>{o=_.getElementsByTagName("svelte-virtual-list-row"),s(12,E=!0)});function j(a){se[a?"unshift":"push"](()=>{_=a,s(3,_)})}function V(a){se[a?"unshift":"push"](()=>{l=a,s(2,l)})}function q(){y=this.offsetHeight,s(1,y)}return n.$$set=a=>{"items"in a&&s(10,u=a.items),"height"in a&&s(0,m=a.height),"itemHeight"in a&&s(11,c=a.itemHeight),"start"in a&&s(8,r=a.start),"end"in a&&s(9,f=a.end),"$$scope"in a&&s(13,i=a.$$scope)},n.$$.update=()=>{n.$$.dirty&1792&&s(4,P=u.slice(r,f).map((a,h)=>({index:h+r,data:a}))),n.$$.dirty&7170&&E&&x(u,y,c)},[m,y,l,_,P,d,b,D,r,f,u,c,E,i,t,j,V,q]}class Fe extends ue{constructor(e){super(),fe(this,e,We,Ce,ie,{items:10,height:0,itemHeight:11,start:8,end:9})}}function Be(n){let e,s;return e=new Ne({props:{title:n[1].length?H("common.no-results"):H("namespaces.select-namespace-empty-state")}}),{c(){Z(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){X(e,t,i),s=!0},p(t,i){const u={};i&2&&(u.title=t[1].length?H("common.no-results"):H("namespaces.select-namespace-empty-state")),e.$set(u)},i(t){s||(O(e.$$.fragment,t),s=!0)},o(t){M(e.$$.fragment,t),s=!1},d(t){Q(e,t)}}}function De(n){let e,s;return e=new Fe({props:{items:n[2],itemHeight:50,$$slots:{default:[je,({item:t})=>({9:t}),({item:t})=>t?512:0]},$$scope:{ctx:n}}}),{c(){Z(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,i){X(e,t,i),s=!0},p(t,i){const u={};i&4&&(u.items=t[2]),i&1536&&(u.$$scope={dirty:i,ctx:t}),e.$set(u)},i(t){s||(O(e.$$.fragment,t),s=!0)},o(t){M(e.$$.fragment,t),s=!1},d(t){Q(e,t)}}}function je(n){let e,s=n[9].namespace+"",t,i,u;function m(){return n[7](n[9])}return{c(){e=U("button"),t=K(s),this.h()},l(c){e=S(c,"BUTTON",{class:!0});var r=N(e);t=J(r,s),r.forEach(w),this.h()},h(){z(e,"class","surface-primary flex w-full cursor-pointer gap-2 truncate border-b p-3 text-left outline-none hover:bg-interactive-secondary-hover focus-visible:bg-interactive-secondary-hover")},m(c,r){C(c,e,r),L(e,t),i||(u=ce(e,"click",m),i=!0)},p(c,r){n=c,r&512&&s!==(s=n[9].namespace+"")&&Ee(t,s)},d(c){c&&w(e),i=!1,u()}}}function qe(n){let e,s,t,i,u=H("namespaces.select-namespace-welcome")+"",m,c,r,f=H("namespaces.select-namespace")+"",v,o,l,_,y,P,E,d,b,T;e=new Se({props:{title:H("namespaces.namespace-select-header"),url:n[3].url.href}});function x(a){n[6](a)}let D={id:"search-namespaces",type:"search",label:H("common.search"),labelHidden:!0,placeholder:H("common.search"),icon:"search"};n[0]!==void 0&&(D.value=n[0]),_=new Ue({props:D}),se.push(()=>Te(_,"value",x));const j=[De,Be],V=[];function q(a,h){return a[2].length?0:1}return d=q(n),b=V[d]=j[d](n),{c(){Z(e.$$.fragment),s=B(),t=U("div"),i=U("h1"),m=K(u),c=B(),r=U("p"),v=K(f),o=B(),l=U("form"),Z(_.$$.fragment),P=B(),E=U("div"),b.c(),this.h()},l(a){Y(e.$$.fragment,a),s=F(a),t=S(a,"DIV",{class:!0});var h=N(t);i=S(h,"H1",{class:!0});var g=N(i);m=J(g,u),g.forEach(w),c=F(h),r=S(h,"P",{class:!0});var k=N(r);v=J(k,f),k.forEach(w),o=F(h),l=S(h,"FORM",{class:!0,role:!0});var I=N(l);Y(_.$$.fragment,I),I.forEach(w),P=F(h),E=S(h,"DIV",{class:!0,"aria-label":!0});var p=N(E);b.l(p),p.forEach(w),h.forEach(w),this.h()},h(){z(i,"class","my-4"),z(r,"class","mb-8"),z(l,"class","mb-5"),z(l,"role","search"),z(E,"class","h-96 w-full overflow-hidden border"),z(E,"aria-label",H("common.namespaces")),z(t,"class","w-full p-8 xl:w-1/2")},m(a,h){X(e,a,h),C(a,s,h),C(a,t,h),L(t,i),L(i,m),L(t,c),L(t,r),L(r,v),L(t,o),L(t,l),X(_,l,null),L(t,P),L(t,E),V[d].m(E,null),T=!0},p(a,[h]){const g={};h&8&&(g.url=a[3].url.href),e.$set(g);const k={};!y&&h&1&&(y=!0,k.value=a[0],ke(()=>y=!1)),_.$set(k);let I=d;d=q(a),d===I?V[d].p(a,h):(_e(),M(V[I],1,1,()=>{V[I]=null}),me(),b=V[d],b?b.p(a,h):(b=V[d]=j[d](a),b.c()),O(b,1),b.m(E,null))},i(a){T||(O(e.$$.fragment,a),O(_.$$.fragment,a),O(b),T=!0)},o(a){M(e.$$.fragment,a),M(_.$$.fragment,a),M(b),T=!1},d(a){a&&(w(s),w(t)),Q(e,a),Q(_),V[d].d()}}}function Ge(n,e,s){let t,i,u,m,c;ee(n,Me,l=>s(1,u=l)),ee(n,ae,l=>s(8,m=l)),ee(n,Ve,l=>s(3,c=l));let r="";const f=async l=>{const{authorized:_}=await ze(l);_?(ye(ae,m=l,m),He(Re({namespace:l}))):Oe.push({variant:"error",message:H("namespaces.unauthorized-namespace-error")})};function v(l){r=l,s(0,r)}const o=l=>f(l.namespace);return n.$$.update=()=>{n.$$.dirty&3&&s(5,t=u.filter(l=>l.namespaceInfo.name.toLowerCase().includes(r.toLowerCase()))),n.$$.dirty&32&&s(2,i=t.map((l,_)=>({namespace:l.namespaceInfo.name,index:_})))},[r,u,i,c,f,t,v,o]}class nt extends ue{constructor(e){super(),fe(this,e,Ge,qe,ie,{})}}export{nt as component};
