import{s as Ee,h as p,t as E,b,j as u,k as m,l as k,f,d as g,m as v,i as re,n as s,q as M,v as P,c as Ie,r as nt,w as it,a3 as ge,H as xe,x as et}from"../chunks/scheduler.D6mQsyhd.js";import{S as we,i as Pe,c as X,a as Y,m as Z,t as j,g as rt,b as F,e as lt,d as x}from"../chunks/index.CDeUyeTp.js";import{p as ct}from"../chunks/stores.BojrgQJp.js";import{P as ft}from"../chunks/page-title.h9prjCqF.js";import{t as V}from"../chunks/translate.BBe5dcco.js";import{h as pt,u as ut}from"../chunks/await_block.84Q0hgOp.js";import{f as Re,t as mt,r as dt}from"../chunks/time-format.Cl4ff6Ut.js";import{B as ht}from"../chunks/badge.BRSKsVh1.js";import{T as vt}from"../chunks/toggle-switch.G6tkUv9E.js";import{T as _t}from"../chunks/tooltip.Pfwiu_V0.js";import{a as ye,d as $t}from"../chunks/batch-operations.CkPSLjt5.js";import{C as tt}from"../chunks/card.Dif23109.js";import{L as bt}from"../chunks/link.D6erU1er.js";import{n as at}from"../chunks/route-for.DQpq352r.js";function gt(o){let e,a,t=V("batch.details")+"",n,r,c,l,i=V("batch.operation-type")+"",d,h,O,z=o[0].operationType+"",B,U,_,$,D=V("batch.identity")+"",S,A,T,q=o[0].identity+"",L,K,y,G,me=V("common.reason")+"",de,J,Q,ee=o[0].reason+"",fe,W,R,te,ae=V("common.start-time")+"",C,w,le,oe=Re(o[0].startTime,o[1],{relative:o[2]})+"",ne,ve,H,ie,he=V("common.close-time")+"",pe,_e,ce,se=Re(o[0].closeTime,o[1],{relative:o[2]})+"",De,Ne,ue,$e,Be=V("batch.total-operations")+"",Fe,Ae,be,ke=Intl.NumberFormat("en-US").format(o[0].totalOperationCount)+"",Ve;return{c(){e=p("div"),a=p("p"),n=E(t),r=b(),c=p("div"),l=p("p"),d=E(i),h=b(),O=p("p"),B=E(z),U=b(),_=p("div"),$=p("p"),S=E(D),A=b(),T=p("p"),L=E(q),K=b(),y=p("div"),G=p("p"),de=E(me),J=b(),Q=p("p"),fe=E(ee),W=b(),R=p("div"),te=p("p"),C=E(ae),w=b(),le=p("p"),ne=E(oe),ve=b(),H=p("div"),ie=p("p"),pe=E(he),_e=b(),ce=p("p"),De=E(se),Ne=b(),ue=p("div"),$e=p("p"),Fe=E(Be),Ae=b(),be=p("p"),Ve=E(ke),this.h()},l(N){e=u(N,"DIV",{class:!0});var I=m(e);a=u(I,"P",{});var Ue=m(a);n=k(Ue,t),Ue.forEach(f),r=g(I),c=u(I,"DIV",{class:!0});var ze=m(c);l=u(ze,"P",{class:!0});var He=m(l);d=k(He,i),He.forEach(f),h=g(ze),O=u(ze,"P",{class:!0});var Me=m(O);B=k(Me,z),Me.forEach(f),ze.forEach(f),U=g(I),_=u(I,"DIV",{class:!0});var Ce=m(_);$=u(Ce,"P",{class:!0});var qe=m($);S=k(qe,D),qe.forEach(f),A=g(Ce),T=u(Ce,"P",{class:!0});var Le=m(T);L=k(Le,q),Le.forEach(f),Ce.forEach(f),K=g(I),y=u(I,"DIV",{class:!0});var Te=m(y);G=u(Te,"P",{class:!0});var Ke=m(G);de=k(Ke,me),Ke.forEach(f),J=g(Te),Q=u(Te,"P",{class:!0});var Ge=m(Q);fe=k(Ge,ee),Ge.forEach(f),Te.forEach(f),W=g(I),R=u(I,"DIV",{class:!0});var je=m(R);te=u(je,"P",{class:!0});var Je=m(te);C=k(Je,ae),Je.forEach(f),w=g(je),le=u(je,"P",{class:!0});var Qe=m(le);ne=k(Qe,oe),Qe.forEach(f),je.forEach(f),ve=g(I),H=u(I,"DIV",{class:!0});var Oe=m(H);ie=u(Oe,"P",{class:!0});var We=m(ie);pe=k(We,he),We.forEach(f),_e=g(Oe),ce=u(Oe,"P",{class:!0});var Xe=m(ce);De=k(Xe,se),Xe.forEach(f),Oe.forEach(f),Ne=g(I),ue=u(I,"DIV",{class:!0});var Se=m(ue);$e=u(Se,"P",{class:!0});var Ye=m($e);Fe=k(Ye,Be),Ye.forEach(f),Ae=g(Se),be=u(Se,"P",{class:!0});var Ze=m(be);Ve=k(Ze,ke),Ze.forEach(f),Se.forEach(f),I.forEach(f),this.h()},h(){v(l,"class","batch-operation-key svelte-z5po3c"),v(O,"class","batch-operation-value svelte-z5po3c"),v(c,"class","batch-operation-detail svelte-z5po3c"),v($,"class","batch-operation-key svelte-z5po3c"),v(T,"class","batch-operation-value svelte-z5po3c"),v(_,"class","batch-operation-detail svelte-z5po3c"),v(G,"class","batch-operation-key svelte-z5po3c"),v(Q,"class","batch-operation-value svelte-z5po3c"),v(y,"class","batch-operation-detail svelte-z5po3c"),v(te,"class","batch-operation-key svelte-z5po3c"),v(le,"class","batch-operation-value svelte-z5po3c"),v(R,"class","batch-operation-detail svelte-z5po3c"),v(ie,"class","batch-operation-key svelte-z5po3c"),v(ce,"class","batch-operation-value svelte-z5po3c"),v(H,"class","batch-operation-detail svelte-z5po3c"),v($e,"class","batch-operation-key svelte-z5po3c"),v(be,"class","batch-operation-value svelte-z5po3c"),v(ue,"class","batch-operation-detail svelte-z5po3c"),v(e,"class","flex flex-col gap-2")},m(N,I){re(N,e,I),s(e,a),s(a,n),s(e,r),s(e,c),s(c,l),s(l,d),s(c,h),s(c,O),s(O,B),s(e,U),s(e,_),s(_,$),s($,S),s(_,A),s(_,T),s(T,L),s(e,K),s(e,y),s(y,G),s(G,de),s(y,J),s(y,Q),s(Q,fe),s(e,W),s(e,R),s(R,te),s(te,C),s(R,w),s(R,le),s(le,ne),s(e,ve),s(e,H),s(H,ie),s(ie,pe),s(H,_e),s(H,ce),s(ce,De),s(e,Ne),s(e,ue),s(ue,$e),s($e,Fe),s(ue,Ae),s(ue,be),s(be,Ve)},p(N,[I]){I&1&&z!==(z=N[0].operationType+"")&&M(B,z),I&1&&q!==(q=N[0].identity+"")&&M(L,q),I&1&&ee!==(ee=N[0].reason+"")&&M(fe,ee),I&7&&oe!==(oe=Re(N[0].startTime,N[1],{relative:N[2]})+"")&&M(ne,oe),I&7&&se!==(se=Re(N[0].closeTime,N[1],{relative:N[2]})+"")&&M(De,se),I&1&&ke!==(ke=Intl.NumberFormat("en-US").format(N[0].totalOperationCount)+"")&&M(Ve,ke)},i:P,o:P,d(N){N&&f(e)}}}function Et(o,e,a){let t,n;Ie(o,mt,c=>a(1,t=c)),Ie(o,dt,c=>a(2,n=c));let{operation:r}=e;return o.$$set=c=>{"operation"in c&&a(0,r=c.operation)},[r,t,n]}class kt extends we{constructor(e){super(),Pe(this,e,Et,gt,Ee,{operation:0})}}function It(o){let e=o[0].state+"",a;return{c(){a=E(e)},l(t){a=k(t,e)},m(t,n){re(t,a,n)},p(t,n){n&1&&e!==(e=t[0].state+"")&&M(a,e)},d(t){t&&f(a)}}}function ot(o){let e,a;return e=new _t({props:{top:!0,text:V("common.auto-refresh-tooltip",{interval:"5"}),$$slots:{default:[wt]},$$scope:{ctx:o}}}),{c(){X(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,n){Z(e,t,n),a=!0},p(t,n){const r={};n&34&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){a||(j(e.$$.fragment,t),a=!0)},o(t){F(e.$$.fragment,t),a=!1},d(t){x(e,t)}}}function wt(o){let e,a;return e=new vt({props:{id:"batch-operation-auto-refresh",label:V("common.auto-refresh"),labelPosition:"left",checked:o[1]}}),e.$on("change",o[2]),{c(){X(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,n){Z(e,t,n),a=!0},p(t,n){const r={};n&2&&(r.checked=t[1]),e.$set(r)},i(t){a||(j(e.$$.fragment,t),a=!0)},o(t){F(e.$$.fragment,t),a=!1},d(t){x(e,t)}}}function Pt(o){let e,a,t,n,r=V("batch.describe-page-title")+"",c,l,i,d,h,O=o[0].jobId+"",z,B,U;i=new ht({props:{type:o[3][o[0].state],$$slots:{default:[It]},$$scope:{ctx:o}}});let _=o[0].state==="Running"&&ot(o);return{c(){e=p("div"),a=p("div"),t=p("div"),n=p("h1"),c=E(r),l=b(),X(i.$$.fragment),d=b(),h=p("p"),z=E(O),B=b(),_&&_.c(),this.h()},l($){e=u($,"DIV",{class:!0});var D=m(e);a=u(D,"DIV",{class:!0});var S=m(a);t=u(S,"DIV",{class:!0});var A=m(t);n=u(A,"H1",{});var T=m(n);c=k(T,r),T.forEach(f),l=g(A),Y(i.$$.fragment,A),A.forEach(f),d=g(S),h=u(S,"P",{});var q=m(h);z=k(q,O),q.forEach(f),S.forEach(f),B=g(D),_&&_.l(D),D.forEach(f),this.h()},h(){v(t,"class","flex flex-row items-center gap-2 max-sm:flex-col"),v(a,"class","flex flex-col gap-2"),v(e,"class","flex items-center justify-between")},m($,D){re($,e,D),s(e,a),s(a,t),s(t,n),s(n,c),s(t,l),Z(i,t,null),s(a,d),s(a,h),s(h,z),s(e,B),_&&_.m(e,null),U=!0},p($,[D]){const S={};D&1&&(S.type=$[3][$[0].state]),D&33&&(S.$$scope={dirty:D,ctx:$}),i.$set(S),(!U||D&1)&&O!==(O=$[0].jobId+"")&&M(z,O),$[0].state==="Running"?_?(_.p($,D),D&1&&j(_,1)):(_=ot($),_.c(),j(_,1),_.m(e,null)):_&&(rt(),F(_,1,1,()=>{_=null}),lt())},i($){U||(j(i.$$.fragment,$),j(_),U=!0)},o($){F(i.$$.fragment,$),F(_),U=!1},d($){$&&f(e),x(i),_&&_.d()}}}function Dt(o,e,a){let t;Ie(o,ye,i=>a(1,t=i));let{operation:n}=e;const r=nt(),c=i=>{const{checked:d}=i.target;r("toggleAutoRefresh",{checked:d}),it(ye,t=d,t)},l={Completed:"success",Running:"primary",Failed:"danger",Unspecified:void 0};return o.$$set=i=>{"operation"in i&&a(0,n=i.operation)},[n,t,c,l]}class Vt extends we{constructor(e){super(),Pe(this,e,Dt,Pt,Ee,{operation:0})}}function zt(o){let e,a,t=V("batch.results")+"",n,r,c,l,i,d=V("batch.operations-progress",{percent:o[3]})+"",h,O,z,B=Intl.NumberFormat("en-US").format(o[0].completeOperationCount)+"",U,_,$=Intl.NumberFormat("en-US").format(o[0].totalOperationCount)+"",D,S,A,T,q,L,K,y,G=V("batch.operations-succeeded",{count:o[0].completeOperationCount})+"",me,de,J,Q=V("batch.operations-failed",{count:o[0].failureOperationCount})+"",ee,fe,W,R,te,ae;return{c(){e=p("div"),a=p("p"),n=E(t),r=b(),c=p("div"),l=p("div"),i=p("span"),h=E(d),O=b(),z=p("span"),U=E(B),_=E(" / "),D=E($),S=b(),A=p("div"),T=p("div"),q=b(),L=p("div"),K=p("div"),y=p("span"),me=E(G),de=b(),J=p("span"),ee=E(Q),fe=b(),W=p("div"),R=p("div"),te=b(),ae=p("div"),this.h()},l(C){e=u(C,"DIV",{class:!0});var w=m(e);a=u(w,"P",{});var le=m(a);n=k(le,t),le.forEach(f),r=g(w),c=u(w,"DIV",{});var oe=m(c);l=u(oe,"DIV",{class:!0});var ne=m(l);i=u(ne,"SPAN",{class:!0});var ve=m(i);h=k(ve,d),ve.forEach(f),O=g(ne),z=u(ne,"SPAN",{class:!0});var H=m(z);U=k(H,B),_=k(H," / "),D=k(H,$),H.forEach(f),ne.forEach(f),S=g(oe),A=u(oe,"DIV",{class:!0});var ie=m(A);T=u(ie,"DIV",{class:!0,style:!0}),m(T).forEach(f),ie.forEach(f),oe.forEach(f),q=g(w),L=u(w,"DIV",{});var he=m(L);K=u(he,"DIV",{class:!0});var pe=m(K);y=u(pe,"SPAN",{class:!0});var _e=m(y);me=k(_e,G),_e.forEach(f),de=g(pe),J=u(pe,"SPAN",{class:!0});var ce=m(J);ee=k(ce,Q),ce.forEach(f),pe.forEach(f),fe=g(he),W=u(he,"DIV",{class:!0});var se=m(W);R=u(se,"DIV",{style:!0,class:!0}),m(R).forEach(f),te=g(se),ae=u(se,"DIV",{style:!0,class:!0}),m(ae).forEach(f),se.forEach(f),he.forEach(f),w.forEach(f),this.h()},h(){v(i,"class","text-xs font-semibold"),v(z,"class","text-xs font-semibold"),v(l,"class","flex justify-between"),v(T,"class","absolute left-0 flex h-full items-center bg-indigo-600"),ge(T,"width",o[3]+"%"),v(A,"class","relative h-2 w-full overflow-hidden rounded bg-indigo-100"),v(y,"class","text-xs font-semibold text-green-700"),v(J,"class","text-xs font-semibold"),xe(J,"text-red-700",o[2]>0),v(K,"class","flex justify-between"),ge(R,"width",o[1]+"%"),v(R,"class","absolute left-0 flex h-full items-center bg-green-200"),ge(ae,"width",o[2]+"%"),v(ae,"class","absolute right-0 flex h-full items-center justify-end bg-red-200"),v(W,"class","relative h-2 w-full overflow-hidden rounded"),v(e,"class","flex flex-col gap-4")},m(C,w){re(C,e,w),s(e,a),s(a,n),s(e,r),s(e,c),s(c,l),s(l,i),s(i,h),s(l,O),s(l,z),s(z,U),s(z,_),s(z,D),s(c,S),s(c,A),s(A,T),s(e,q),s(e,L),s(L,K),s(K,y),s(y,me),s(K,de),s(K,J),s(J,ee),s(L,fe),s(L,W),s(W,R),s(W,te),s(W,ae)},p(C,[w]){w&8&&d!==(d=V("batch.operations-progress",{percent:C[3]})+"")&&M(h,d),w&1&&B!==(B=Intl.NumberFormat("en-US").format(C[0].completeOperationCount)+"")&&M(U,B),w&1&&$!==($=Intl.NumberFormat("en-US").format(C[0].totalOperationCount)+"")&&M(D,$),w&8&&ge(T,"width",C[3]+"%"),w&1&&G!==(G=V("batch.operations-succeeded",{count:C[0].completeOperationCount})+"")&&M(me,G),w&1&&Q!==(Q=V("batch.operations-failed",{count:C[0].failureOperationCount})+"")&&M(ee,Q),w&4&&xe(J,"text-red-700",C[2]>0),w&2&&ge(R,"width",C[1]+"%"),w&4&&ge(ae,"width",C[2]+"%")},i:P,o:P,d(C){C&&f(e)}}}function Ct(o,e,a){let{operation:t}=e,n,r,c;return o.$$set=l=>{"operation"in l&&a(0,t=l.operation)},o.$$.update=()=>{if(o.$$.dirty&1){const{completeOperationCount:l,failureOperationCount:i,totalOperationCount:d}=t;a(1,n=Math.round(l/d*100)),a(2,r=Math.round(i/d*100)),a(3,c=Math.round((l+i)/d*100))}},[t,n,r,c]}class Tt extends we{constructor(e){super(),Pe(this,e,Ct,zt,Ee,{operation:0})}}function jt(o){let e=V("batch.back-link")+"",a;return{c(){a=E(e)},l(t){a=k(t,e)},m(t,n){re(t,a,n)},p:P,d(t){t&&f(a)}}}function Ot(o){return{c:P,l:P,m:P,p:P,i:P,o:P,d:P}}function St(o){let e,a,t,n,r,c;return e=new Vt({props:{operation:o[7]}}),e.$on("toggleAutoRefresh",o[2]),t=new tt({props:{$$slots:{default:[Rt]},$$scope:{ctx:o}}}),r=new tt({props:{$$slots:{default:[Nt]},$$scope:{ctx:o}}}),{c(){X(e.$$.fragment),a=b(),X(t.$$.fragment),n=b(),X(r.$$.fragment)},l(l){Y(e.$$.fragment,l),a=g(l),Y(t.$$.fragment,l),n=g(l),Y(r.$$.fragment,l)},m(l,i){Z(e,l,i),re(l,a,i),Z(t,l,i),re(l,n,i),Z(r,l,i),c=!0},p(l,i){const d={};i&256&&(d.$$scope={dirty:i,ctx:l}),t.$set(d);const h={};i&256&&(h.$$scope={dirty:i,ctx:l}),r.$set(h)},i(l){c||(j(e.$$.fragment,l),j(t.$$.fragment,l),j(r.$$.fragment,l),c=!0)},o(l){F(e.$$.fragment,l),F(t.$$.fragment,l),F(r.$$.fragment,l),c=!1},d(l){l&&(f(a),f(n)),x(e,l),x(t,l),x(r,l)}}}function Rt(o){let e,a;return e=new kt({props:{operation:o[7]}}),{c(){X(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,n){Z(e,t,n),a=!0},p:P,i(t){a||(j(e.$$.fragment,t),a=!0)},o(t){F(e.$$.fragment,t),a=!1},d(t){x(e,t)}}}function Nt(o){let e,a;return e=new Tt({props:{operation:o[7]}}),{c(){X(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,n){Z(e,t,n),a=!0},p:P,i(t){a||(j(e.$$.fragment,t),a=!0)},o(t){F(e.$$.fragment,t),a=!1},d(t){x(e,t)}}}function Ft(o){return{c:P,l:P,m:P,p:P,i:P,o:P,d:P}}function st(o){let e,a,t={ctx:o,current:null,token:null,hasCatch:!1,pending:Ft,then:St,catch:Ot,value:7,blocks:[,,,]};return pt(o[3](),t),{c(){e=et(),t.block.c()},l(n){e=et(),t.block.l(n)},m(n,r){re(n,e,r),t.block.m(n,t.anchor=r),t.mount=()=>e.parentNode,t.anchor=e,a=!0},p(n,r){o=n,ut(t,o,r)},i(n){a||(j(t.block),a=!0)},o(n){for(let r=0;r<3;r+=1){const c=t.blocks[r];F(c)}a=!1},d(n){n&&f(e),t.block.d(n),t.token=null,t=null}}}function At(o){let e,a,t,n,r=o[1],c;t=new bt({props:{href:at({namespace:o[0]}),icon:"chevron-left",$$slots:{default:[jt]},$$scope:{ctx:o}}});let l=st(o);return{c(){e=p("div"),a=p("div"),X(t.$$.fragment),n=b(),l.c(),this.h()},l(i){e=u(i,"DIV",{class:!0});var d=m(e);a=u(d,"DIV",{class:!0});var h=m(a);Y(t.$$.fragment,h),h.forEach(f),n=g(d),l.l(d),d.forEach(f),this.h()},h(){v(a,"class","flex flex-row"),v(e,"class","flex flex-col gap-4")},m(i,d){re(i,e,d),s(e,a),Z(t,a,null),s(e,n),l.m(e,null),c=!0},p(i,[d]){const h={};d&1&&(h.href=at({namespace:i[0]})),d&256&&(h.$$scope={dirty:d,ctx:i}),t.$set(h),d&2&&Ee(r,r=i[1])?(rt(),F(l,1,1,P),lt(),l=st(i),l.c(),j(l,1),l.m(e,null)):l.p(i,d)},i(i){c||(j(t.$$.fragment,i),j(l),c=!0)},o(i){F(t.$$.fragment,i),F(l),c=!1},d(i){i&&f(e),x(t),l.d(i)}}}function yt(o,e,a){let t;Ie(o,ye,h=>a(6,t=h));let{namespace:n}=e,{jobId:r}=e,c=0,l;const i=h=>{h.detail.checked?a(1,c+=1):l&&window.clearTimeout(l)},d=()=>$t({jobId:r,namespace:n}).then(h=>(t&&h.state==="Running"&&(l=window.setTimeout(()=>{a(1,c+=1)},5e3)),h));return o.$$set=h=>{"namespace"in h&&a(0,n=h.namespace),"jobId"in h&&a(4,r=h.jobId)},[n,c,i,d,r]}class Bt extends we{constructor(e){super(),Pe(this,e,yt,At,Ee,{namespace:0,jobId:4})}}function Ut(o){let e,a,t,n;return e=new ft({props:{title:V("batch.describe-page-title")+" | "+o[0]}}),t=new Bt({props:{jobId:o[0],namespace:o[1]}}),{c(){X(e.$$.fragment),a=b(),X(t.$$.fragment)},l(r){Y(e.$$.fragment,r),a=g(r),Y(t.$$.fragment,r)},m(r,c){Z(e,r,c),re(r,a,c),Z(t,r,c),n=!0},p(r,[c]){const l={};c&1&&(l.title=V("batch.describe-page-title")+" | "+r[0]),e.$set(l);const i={};c&1&&(i.jobId=r[0]),c&2&&(i.namespace=r[1]),t.$set(i)},i(r){n||(j(e.$$.fragment,r),j(t.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),F(t.$$.fragment,r),n=!1},d(r){r&&f(a),x(e,r),x(t,r)}}}function Ht(o,e,a){let t,n,r;return Ie(o,ct,c=>a(2,r=c)),o.$$.update=()=>{o.$$.dirty&4&&a(1,t=r.params.namespace),o.$$.dirty&4&&a(0,n=r.params.jobId)},[n,t,r]}class aa extends we{constructor(e){super(),Pe(this,e,Ht,Ut,Ee,{})}}export{aa as component};
