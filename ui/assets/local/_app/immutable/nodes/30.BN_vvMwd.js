import{s as M,d as u,i as _,k as $,l as y,n as k,c as S,w as L,j as b,h as g,e as W,f as I,v as N,o as H,m as P,t as F,x as ae}from"../chunks/scheduler.gES7FyoG.js";import{S as z,i as O,t as p,a as m,g as B,e as R,d as D,m as C,c as T,b as V}from"../chunks/index.DpnGbpCk.js";import{p as Q}from"../chunks/stores.ClnLBmXs.js";import{P as ie}from"../chunks/page-title.ClCB4mI7.js";import{e as A,u as fe,o as ce}from"../chunks/each.CDwUSmAp.js";import{L as G}from"../chunks/link.B8EmwYu7.js";import{t as h}from"../chunks/translate.DzDeFYDI.js";import{t as ue,r as me,f as q}from"../chunks/time-format.gvwCw1oe.js";import{n as K,o as U}from"../chunks/route-for.BzgD1cZh.js";import{D as se,f as pe}from"../chunks/deployments-service.CIqozVxn.js";import{A as _e}from"../chunks/alert.B7mQa_SE.js";import{B as he}from"../chunks/badge.CaNx3HvD.js";import{E as ge}from"../chunks/empty-state.D2QxL8QK.js";import{A as de}from"../chunks/api-paginated.DzGoVwUM.js";function X(i,e,l){const t=i.slice();return t[5]=e[l].label,t}function $e(i){let e,l,t,r,o;return t=new G({props:{icon:"external-link",href:U({namespace:i[2].params.namespace,query:`TemporalWorkerDeployment="${i[0].name}"`})}}),{c(){e=k("td"),l=k("p"),V(t.$$.fragment),r=I(),this.h()},l(s){e=$(s,"TD",{class:!0});var a=y(e);l=$(a,"P",{});var n=y(l);T(t.$$.fragment,n),r=W(n),n.forEach(u),a.forEach(u),this.h()},h(){b(e,"class","truncate p-2 text-center")},m(s,a){_(s,e,a),g(e,l),C(t,l,null),g(l,r),o=!0},p(s,a){const n={};a&5&&(n.href=U({namespace:s[2].params.namespace,query:`TemporalWorkerDeployment="${s[0].name}"`})),t.$set(n)},i(s){o||(m(t.$$.fragment,s),o=!0)},o(s){p(t.$$.fragment,s),o=!1},d(s){s&&u(e),D(t)}}}function ye(i){let e,l,t,r,o=q(i[0].createTime,i[3],{relative:i[4]})+"",s,a,n=i[0].routingConfig.rampingVersionChangedTime&&Y(i);return{c(){e=k("td"),l=k("div"),n&&n.c(),t=I(),r=k("p"),s=F(o),a=I(),this.h()},l(f){e=$(f,"TD",{class:!0});var c=y(e);l=$(c,"DIV",{class:!0});var d=y(l);n&&n.l(d),t=W(d),r=$(d,"P",{});var w=y(r);s=P(w,o),w.forEach(u),d.forEach(u),a=W(c),c.forEach(u),this.h()},h(){b(l,"class","flex flex-col gap-1"),b(e,"class","truncate p-2 text-left")},m(f,c){_(f,e,c),g(e,l),n&&n.m(l,null),g(l,t),g(l,r),g(r,s),g(e,a)},p(f,c){f[0].routingConfig.rampingVersionChangedTime?n?n.p(f,c):(n=Y(f),n.c(),n.m(l,t)):n&&(n.d(1),n=null),c&25&&o!==(o=q(f[0].createTime,f[3],{relative:f[4]})+"")&&H(s,o)},i:N,o:N,d(f){f&&u(e),n&&n.d()}}}function ke(i){let e,l,t,r,o,s,a=i[0].routingConfig.rampingVersion&&Z(i);return r=new se({props:{status:"Current",version:i[0].routingConfig.currentVersion,label:h("deployments.current")}}),{c(){e=k("td"),l=k("div"),a&&a.c(),t=I(),V(r.$$.fragment),o=I(),this.h()},l(n){e=$(n,"TD",{class:!0});var f=y(e);l=$(f,"DIV",{class:!0});var c=y(l);a&&a.l(c),t=W(c),T(r.$$.fragment,c),c.forEach(u),o=W(f),f.forEach(u),this.h()},h(){b(l,"class","flex flex-col gap-1"),b(e,"class","whitespace-pre-line break-words p-2 text-left")},m(n,f){_(n,e,f),g(e,l),a&&a.m(l,null),g(l,t),C(r,l,null),g(e,o),s=!0},p(n,f){n[0].routingConfig.rampingVersion?a?(a.p(n,f),f&1&&m(a,1)):(a=Z(n),a.c(),m(a,1),a.m(l,t)):a&&(B(),p(a,1,1,()=>{a=null}),R());const c={};f&1&&(c.version=n[0].routingConfig.currentVersion),r.$set(c)},i(n){s||(m(a),m(r.$$.fragment,n),s=!0)},o(n){p(a),p(r.$$.fragment,n),s=!1},d(n){n&&u(e),a&&a.d(),D(r)}}}function ve(i){let e,l,t;return l=new G({props:{href:K({namespace:i[2].params.namespace,deployment:i[0].name}),$$slots:{default:[be]},$$scope:{ctx:i}}}),{c(){e=k("td"),V(l.$$.fragment),this.h()},l(r){e=$(r,"TD",{class:!0});var o=y(e);T(l.$$.fragment,o),o.forEach(u),this.h()},h(){b(e,"class","p-2 text-left")},m(r,o){_(r,e,o),C(l,e,null),t=!0},p(r,o){const s={};o&5&&(s.href=K({namespace:r[2].params.namespace,deployment:r[0].name})),o&257&&(s.$$scope={dirty:o,ctx:r}),l.$set(s)},i(r){t||(m(l.$$.fragment,r),t=!0)},o(r){p(l.$$.fragment,r),t=!1},d(r){r&&u(e),D(l)}}}function Y(i){let e,l=q(i[0].routingConfig.rampingVersionChangedTime,i[3],{relative:i[4]})+"",t;return{c(){e=k("p"),t=F(l)},l(r){e=$(r,"P",{});var o=y(e);t=P(o,l),o.forEach(u)},m(r,o){_(r,e,o),g(e,t)},p(r,o){o&25&&l!==(l=q(r[0].routingConfig.rampingVersionChangedTime,r[3],{relative:r[4]})+"")&&H(t,l)},d(r){r&&u(e)}}}function Z(i){let e,l;return e=new se({props:{status:"Ramping",version:i[0].routingConfig.rampingVersion,label:h("deployments.ramping-percentage",{percentage:i[0].routingConfig.rampingVersionPercentage})}}),{c(){V(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){C(e,t,r),l=!0},p(t,r){const o={};r&1&&(o.version=t[0].routingConfig.rampingVersion),r&1&&(o.label=h("deployments.ramping-percentage",{percentage:t[0].routingConfig.rampingVersionPercentage})),e.$set(o)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){p(e.$$.fragment,t),l=!1},d(t){D(e,t)}}}function be(i){let e=i[0].name+"",l;return{c(){l=F(e)},l(t){l=P(t,e)},m(t,r){_(t,l,r)},p(t,r){r&1&&e!==(e=t[0].name+"")&&H(l,e)},d(t){t&&u(l)}}}function x(i,e){let l,t,r,o,s,a,n,f,c;const d=[ve,ke,ye,$e],w=[];function J(v,E){return E&2&&(t=null),E&2&&(r=null),E&2&&(o=null),E&2&&(s=null),t==null&&(t=v[5]===h("deployments.name")),t?0:(r==null&&(r=v[5]===h("deployments.deployment-version")),r?1:(o==null&&(o=v[5]===h("deployments.deployed")),o?2:(s==null&&(s=v[5]===h("deployments.workflows")),s?3:-1)))}return~(a=J(e,-1))&&(n=w[a]=d[a](e)),{key:i,first:null,c(){l=L(),n&&n.c(),f=L(),this.h()},l(v){l=L(),n&&n.l(v),f=L(),this.h()},h(){this.first=l},m(v,E){_(v,l,E),~a&&w[a].m(v,E),_(v,f,E),c=!0},p(v,E){e=v;let j=a;a=J(e,E),a===j?~a&&w[a].p(e,E):(n&&(B(),p(w[j],1,1,()=>{w[j]=null}),R()),~a?(n=w[a],n?n.p(e,E):(n=w[a]=d[a](e),n.c()),m(n,1),n.m(f.parentNode,f)):n=null)},i(v){c||(m(n),c=!0)},o(v){p(n),c=!1},d(v){v&&(u(l),u(f)),~a&&w[a].d(v)}}}function we(i){let e,l=[],t=new Map,r,o=A(i[1]);const s=a=>a[5];for(let a=0;a<o.length;a+=1){let n=X(i,o,a),f=s(n);t.set(f,l[a]=x(f,n))}return{c(){e=k("tr");for(let a=0;a<l.length;a+=1)l[a].c()},l(a){e=$(a,"TR",{});var n=y(e);for(let f=0;f<l.length;f+=1)l[f].l(n);n.forEach(u)},m(a,n){_(a,e,n);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(e,null);r=!0},p(a,[n]){n&31&&(o=A(a[1]),B(),l=fe(l,n,s,1,a,o,t,e,ce,x,null,X),R())},i(a){if(!r){for(let n=0;n<o.length;n+=1)m(l[n]);r=!0}},o(a){for(let n=0;n<l.length;n+=1)p(l[n]);r=!1},d(a){a&&u(e);for(let n=0;n<l.length;n+=1)l[n].d()}}}function Ee(i,e,l){let t,r,o;S(i,Q,n=>l(2,t=n)),S(i,ue,n=>l(3,r=n)),S(i,me,n=>l(4,o=n));let{deployment:s}=e,{columns:a}=e;return i.$$set=n=>{"deployment"in n&&l(0,s=n.deployment),"columns"in n&&l(1,a=n.columns)},[s,a,t,r,o]}class De extends z{constructor(e){super(),O(this,e,Ee,we,M,{deployment:0,columns:1})}}function ee(i,e,l){const t=i.slice();return t[10]=e[l],t}function te(i,e,l){const t=i.slice();return t[6]=e[l].label,t[8]=l,t}function le(i){let e,l;return e=new De({props:{deployment:i[10],columns:i[4]}}),{c(){V(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){C(e,t,r),l=!0},p(t,r){const o={};r&512&&(o.deployment=t[10]),e.$set(o)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){p(e.$$.fragment,t),l=!1},d(t){D(e,t)}}}function Ce(i){let e,l,t=A(i[9]),r=[];for(let s=0;s<t.length;s+=1)r[s]=le(ee(i,t,s));const o=s=>p(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=L()},l(s){for(let a=0;a<r.length;a+=1)r[a].l(s);e=L()},m(s,a){for(let n=0;n<r.length;n+=1)r[n]&&r[n].m(s,a);_(s,e,a),l=!0},p(s,a){if(a&528){t=A(s[9]);let n;for(n=0;n<t.length;n+=1){const f=ee(s,t,n);r[n]?(r[n].p(f,a),m(r[n],1)):(r[n]=le(f),r[n].c(),m(r[n],1),r[n].m(e.parentNode,e))}for(B(),n=t.length;n<r.length;n+=1)o(n);R()}},i(s){if(!l){for(let a=0;a<t.length;a+=1)m(r[a]);l=!0}},o(s){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)p(r[a]);l=!1},d(s){s&&u(e),ae(r,s)}}}function Te(i){let e,l=h("deployments.deployments")+"",t;return{c(){e=k("caption"),t=F(l),this.h()},l(r){e=$(r,"CAPTION",{class:!0,slot:!0});var o=y(e);t=P(o,l),o.forEach(u),this.h()},h(){b(e,"class","sr-only"),b(e,"slot","caption")},m(r,o){_(r,e,o),g(e,t)},p:N,d(r){r&&u(e)}}}function Ve(i){let e;return{c(){e=F("Pre-Release")},l(l){e=P(l,"Pre-Release")},m(l,t){_(l,e,t)},d(l){l&&u(e)}}}function Pe(i){let e,l,t,r=h("deployments.worker-deployments")+"",o,s,a,n;return a=new he({props:{class:"shrink-0",$$slots:{default:[Ve]},$$scope:{ctx:i}}}),{c(){e=k("div"),l=k("div"),t=k("h1"),o=F(r),s=I(),V(a.$$.fragment),this.h()},l(f){e=$(f,"DIV",{class:!0,slot:!0});var c=y(e);l=$(c,"DIV",{class:!0});var d=y(l);t=$(d,"H1",{});var w=y(t);o=P(w,r),w.forEach(u),s=W(d),T(a.$$.fragment,d),d.forEach(u),c.forEach(u),this.h()},h(){b(l,"class","flex flex-wrap items-center gap-2"),b(e,"class","flex flex-col gap-4"),b(e,"slot","header")},m(f,c){_(f,e,c),g(e,l),g(l,t),g(t,o),g(l,s),C(a,l,null),n=!0},p(f,c){const d={};c&8192&&(d.$$scope={dirty:c,ctx:f}),a.$set(d)},i(f){n||(m(a.$$.fragment,f),n=!0)},o(f){p(a.$$.fragment,f),n=!1},d(f){f&&u(e),D(a)}}}function re(i){let e,l=i[6]+"",t;return{c(){e=k("th"),t=F(l),this.h()},l(r){e=$(r,"TH",{class:!0});var o=y(e);t=P(o,l),o.forEach(u),this.h()},h(){b(e,"class",i[8]===0&&"w-full")},m(r,o){_(r,e,o),g(e,t)},p:N,d(r){r&&u(e)}}}function Fe(i){let e,l=A(i[4]),t=[];for(let r=0;r<l.length;r+=1)t[r]=re(te(i,l,r));return{c(){e=k("tr");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=$(r,"TR",{slot:!0,class:!0});var o=y(e);for(let s=0;s<t.length;s+=1)t[s].l(o);o.forEach(u),this.h()},h(){b(e,"slot","headers"),b(e,"class","text-left")},m(r,o){_(r,e,o);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p(r,o){if(o&16){l=A(r[4]);let s;for(s=0;s<l.length;s+=1){const a=te(r,l,s);t[s]?t[s].p(a,o):(t[s]=re(a),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=l.length}},d(r){r&&u(e),ae(t,r)}}}function Le(i){let e;return{c(){e=F("Learn more")},l(l){e=P(l,"Learn more")},m(l,t){_(l,e,t)},d(l){l&&u(e)}}}function ne(i){let e,l;return e=new _e({props:{intent:"warning",icon:"warning",class:"px-12",$$slots:{default:[We]},$$scope:{ctx:i}}}),{c(){V(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){C(e,t,r),l=!0},p(t,r){const o={};r&8194&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){p(e.$$.fragment,t),l=!1},d(t){D(e,t)}}}function We(i){let e;return{c(){e=F(i[1])},l(l){e=P(l,i[1])},m(l,t){_(l,e,t)},p(l,t){t&2&&H(e,l[1])},d(l){l&&u(e)}}}function Ie(i){let e,l,t,r,o,s,a;t=new G({props:{href:"https://docs.temporal.io/worker-deployments",newTab:!0,$$slots:{default:[Le]},$$scope:{ctx:i}}});let n=i[1]&&ne(i);return{c(){e=k("p"),l=F("Enable Worker Deployments to manage your workers more effectively. "),V(t.$$.fragment),r=F("."),o=I(),n&&n.c(),s=L(),this.h()},l(f){e=$(f,"P",{class:!0});var c=y(e);l=P(c,"Enable Worker Deployments to manage your workers more effectively. "),T(t.$$.fragment,c),r=P(c,"."),c.forEach(u),o=W(f),n&&n.l(f),s=L(),this.h()},h(){b(e,"class","text-center")},m(f,c){_(f,e,c),g(e,l),C(t,e,null),g(e,r),_(f,o,c),n&&n.m(f,c),_(f,s,c),a=!0},p(f,c){const d={};c&8192&&(d.$$scope={dirty:c,ctx:f}),t.$set(d),f[1]?n?(n.p(f,c),c&2&&m(n,1)):(n=ne(f),n.c(),m(n,1),n.m(s.parentNode,s)):n&&(B(),p(n,1,1,()=>{n=null}),R())},i(f){a||(m(t.$$.fragment,f),m(n),a=!0)},o(f){p(t.$$.fragment,f),p(n),a=!1},d(f){f&&(u(e),u(o),u(s)),D(t),n&&n.d(f)}}}function Ae(i){let e,l;return e=new ge({props:{title:h("deployments.empty-state-title"),class:"px-4",$$slots:{default:[Ie]},$$scope:{ctx:i}}}),{c(){V(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){C(e,t,r),l=!0},p(t,r){const o={};r&8194&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){p(e.$$.fragment,t),l=!1},d(t){D(e,t)}}}function oe(i){let e,l;return e=new de({props:{onFetch:i[2],onError:i[3],"aria-label":h("deployments.deployments"),pageSizeSelectLabel:h("common.per-page"),nextButtonLabel:h("common.next"),previousButtonLabel:h("common.previous"),emptyStateMessage:h("deployments.empty-state-title"),errorMessage:h("deployments.error-message-fetching"),$$slots:{empty:[Ae],headers:[Fe],header:[Pe],caption:[Te],default:[Ce,({visibleItems:t})=>({9:t}),({visibleItems:t})=>t?512:0]},$$scope:{ctx:i}}}),{c(){V(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){C(e,t,r),l=!0},p(t,r){const o={};r&4&&(o.onFetch=t[2]),r&8706&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){p(e.$$.fragment,t),l=!1},d(t){D(e,t)}}}function Be(i){let e,l=[i[0]],t,r=oe(i);return{c(){e=k("div"),r.c(),this.h()},l(o){e=$(o,"DIV",{class:!0});var s=y(e);r.l(s),s.forEach(u),this.h()},h(){b(e,"class","flex flex-col gap-4")},m(o,s){_(o,e,s),r.m(e,null),t=!0},p(o,[s]){s&1&&M(l,l=[o[0]])?(B(),p(r,1,1,N),R(),r=oe(o),r.c(),m(r,1),r.m(e,null)):r.p(o,s)},i(o){t||(m(r),t=!0)},o(o){p(r),t=!1},d(o){o&&u(e),r.d(o)}}}function Re(i,e,l){let t,r,o;S(i,Q,f=>l(5,o=f));let s="";const a=f=>{var c;l(1,s=((c=f==null?void 0:f.body)===null||c===void 0?void 0:c.message)||h("deployments.error-message-fetching"))},n=[{label:h("deployments.name"),pinned:!0},{label:h("deployments.deployment-version"),pinned:!0},{label:h("deployments.deployed"),pinned:!0},{label:h("deployments.workflows"),pinned:!0}];return i.$$.update=()=>{i.$$.dirty&32&&l(0,t=o.params.namespace),i.$$.dirty&1&&l(2,r=()=>(l(1,s=""),pe(t,"",a)))},[t,s,r,a,n,o]}class Se extends z{constructor(e){super(),O(this,e,Re,Be,M,{})}}function Ne(i){let e,l,t,r;return e=new ie({props:{title:"Deployments",url:i[0].url.href}}),t=new Se({}),{c(){V(e.$$.fragment),l=I(),V(t.$$.fragment)},l(o){T(e.$$.fragment,o),l=W(o),T(t.$$.fragment,o)},m(o,s){C(e,o,s),_(o,l,s),C(t,o,s),r=!0},p(o,[s]){const a={};s&1&&(a.url=o[0].url.href),e.$set(a)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){p(e.$$.fragment,o),p(t.$$.fragment,o),r=!1},d(o){o&&u(l),D(e,o),D(t,o)}}}function qe(i,e,l){let t;return S(i,Q,r=>l(0,t=r)),[t]}class et extends z{constructor(e){super(),O(this,e,qe,Ne,M,{})}}export{et as component};
