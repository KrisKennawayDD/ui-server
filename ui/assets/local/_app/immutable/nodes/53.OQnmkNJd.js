import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as X,g as t,m as g,s as h,l as A,ag as C,a as Y,e as H,r as x,t as O,b as Z,aP as G,f as se,d as L,c as q,i as re}from"../chunks/BZ1i_Yzi.js";import{s as J}from"../chunks/BtIgVYD3.js";import{i as oe}from"../chunks/Pfo2U1_a.js";import{t as B,b as ie,a as M}from"../chunks/B11KKQxI.js";import{s as K,d as Q,a as le}from"../chunks/BqyZnqh5.js";import{e as ee}from"../chunks/D5cC3u49.js";import{i as te}from"../chunks/EXou6kTq.js";import{s as ne,a as R,b as me}from"../chunks/nHCSEYHe.js";import{e as ce}from"../chunks/DT_Kaee1.js";import{s as pe}from"../chunks/DBXxAZ3D.js";import{b as fe}from"../chunks/Bau-bgtj.js";import{b as S}from"../chunks/ByJhdzoF.js";import{p as F}from"../chunks/DQFlnzBt.js";import{o as he}from"../chunks/Dm8LSs3h.js";import{g as ve}from"../chunks/C5M6r3MG.js";import{p as ue}from"../chunks/NCZwgcbC.js";import{P as ge}from"../chunks/BSbw5w3E.js";import{E as de}from"../chunks/BH5Z54-t.js";import{I as _e}from"../chunks/DAFd4Pbd.js";import{t as b}from"../chunks/D2OY9xdY.js";import{a as we}from"../chunks/BbEJoEX_.js";import{n as be,l as xe}from"../chunks/D6bk2mRZ.js";import{t as ye}from"../chunks/v9Rk8zds.js";import{e as ke}from"../chunks/B6jZHxZ6.js";var He=B("<svelte-virtual-list-row><!></svelte-virtual-list-row>",2),Te=B("<svelte-virtual-list-viewport><svelte-virtual-list-contents></svelte-virtual-list-contents></svelte-virtual-list-viewport>",2);function ze(U,d){X(d,!1);let c=F(d,"items",8),j=F(d,"height",8,"100%"),y=F(d,"itemHeight",8,void 0),r=F(d,"start",12,0),i=F(d,"end",12,0),p=[],l,T=g(),N=g(),z=g(0),V=g(),E=g(),k=g(0),P=g(0),f;async function D(a,n,s){const{scrollTop:m}=t(T);await G();let _=t(k)-m,e=r();for(;_<n&&e<a.length;){let w=l[e-r()];w||(i(e+1),await G(),w=l[e-r()]);const u=p[e]=s||w.offsetHeight;_+=u,e+=1}i(e);const o=a.length-i();f=(t(k)+_)/i(),h(P,o*f),p.length=a.length}async function $(){const{scrollTop:a}=t(T),n=r();for(let e=0;e<l.length;e+=1)p[r()+e]=y()||l[e].offsetHeight;let s=0,m=0;for(;s<c().length;){const e=p[s]||f;if(m+e>a){r(s),h(k,m);break}m+=e,s+=1}for(;s<c().length&&(m+=p[s]||f,s+=1,!(m>a+t(z))););i(s);const _=c().length-i();for(f=m/i();s<c().length;)p[s++]=f;if(h(P,_*f),r()<n){await G();let e=0,o=0;for(let u=r();u<n;u+=1)l[u-r()]&&(e+=p[u],o+=y()||l[u-r()].offsetHeight);const w=o-e;t(T).scrollTo(0,a+w)}}he(()=>{l=t(N).getElementsByTagName("svelte-virtual-list-row"),h(E,!0)}),A(()=>(C(c()),C(r()),C(i())),()=>{h(V,c().slice(r(),i()).map((a,n)=>({index:n+r(),data:a})))}),A(()=>(t(E),C(c()),t(z),C(y())),()=>{t(E)&&D(c(),t(z),y())}),Y(),te();var v=Te();K(v,1,"svelte-1kdxoed");var I=H(v);K(I,1,"svelte-1kdxoed"),ce(I,5,()=>t(V),a=>a.index,(a,n)=>{var s=He();K(s,1,"svelte-1kdxoed");var m=H(s);pe(m,d,"default",{get item(){return t(n).data}},_=>{var e=ie("Missing template");M(_,e)}),x(s),M(a,s)}),x(I),S(I,a=>h(N,a),()=>t(N)),x(v),S(v,a=>h(T,a),()=>t(T)),O(()=>{Q(v,`height: ${j()??""};`),Q(I,`padding-top: ${t(k)??""}px; padding-bottom: ${t(P)??""}px;`)}),fe(v,"offsetHeight",a=>h(z,a)),ee("scroll",v,$),M(U,v),Z()}var Ie=B('<button class="surface-primary flex w-full cursor-pointer gap-2 truncate border-b p-3 text-left outline-none hover:bg-interactive-secondary-hover focus-visible:bg-interactive-secondary-hover"> </button>'),Ne=B('<!> <div class="w-full p-8 xl:w-1/2"><h1 class="my-4"> </h1> <p class="mb-8"> </p> <form class="mb-5" role="search"><!></form> <div class="h-96 w-full overflow-hidden border"><!></div></div>',1);function tt(U,d){X(d,!1);const[c,j]=ne(),y=()=>R(be,"$namespaces",c),r=()=>R(ue,"$page",c),i=g(),p=g();let l=g("");const T=async e=>{const{authorized:o}=await we(e);o?(me(xe,e),ve(ke({namespace:e}))):ye.push({variant:"error",message:b("namespaces.unauthorized-namespace-error")})};A(()=>(y(),t(l)),()=>{h(i,y().filter(e=>e.namespaceInfo.name.toLowerCase().includes(t(l).toLowerCase())))}),A(()=>t(i),()=>{h(p,t(i).map((e,o)=>({namespace:e.namespaceInfo.name,index:o})))}),Y(),te();var N=Ne(),z=se(N);const V=L(()=>b("namespaces.namespace-select-header"));ge(z,{get title(){return t(V)},get url(){return r().url.href}});var E=q(z,2),k=H(E),P=H(k,!0);x(k);var f=q(k,2),D=H(f,!0);x(f);var $=q(f,2),v=H($);const I=L(()=>b("common.search")),a=L(()=>b("common.search"));_e(v,{id:"search-namespaces",type:"search",get label(){return t(I)},labelHidden:!0,get placeholder(){return t(a)},icon:"search",get value(){return t(l)},set value(e){h(l,e)},$$legacy:!0}),x($);var n=q($,2),s=H(n);{var m=e=>{ze(e,{get items(){return t(p)},itemHeight:50,children:re,$$slots:{default:(o,w)=>{const u=L(()=>w.item);var W=Ie(),ae=H(W,!0);x(W),O(()=>J(ae,t(u).namespace)),ee("click",W,()=>T(t(u).namespace)),M(o,W)}}})},_=e=>{const o=L(()=>y().length?b("common.no-results"):b("namespaces.select-namespace-empty-state"));de(e,{get title(){return t(o)}})};oe(s,e=>{t(p).length?e(m):e(_,!1)})}x(n),x(E),O((e,o,w)=>{J(P,e),J(D,o),le(n,"aria-label",w)},[()=>b("namespaces.select-namespace-welcome"),()=>b("namespaces.select-namespace"),()=>b("common.namespaces")],L),M(U,N),Z(),j()}export{tt as component};
