import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as we,l as T,s as l,m as c,g as e,a as Me,e as b,r as m,t as R,d as r,b as ye,f as oe,az as $,ag as Be,n as re,c as Z,i as et}from"../chunks/BZ1i_Yzi.js";import{t as _,a as t,c as qe,b as ce}from"../chunks/B11KKQxI.js";import{i as ke}from"../chunks/EXou6kTq.js";import{a as F,s as Le,b as Ve,m as tt}from"../chunks/nHCSEYHe.js";import{p as Re}from"../chunks/BVnKkDQB.js";import{P as st}from"../chunks/BSbw5w3E.js";import{s as q}from"../chunks/BtIgVYD3.js";import{i as O}from"../chunks/Pfo2U1_a.js";import{k as Xe}from"../chunks/DKCxbUKs.js";import{e as xe,i as Ee}from"../chunks/DT_Kaee1.js";import{o as rt}from"../chunks/Dm8LSs3h.js";import{g as ot}from"../chunks/Br_5kUzv.js";import{t as a}from"../chunks/D2OY9xdY.js";import{i as at,j as Ge}from"../chunks/BM3j6n3q.js";import{b as He,h as lt,c as nt}from"../chunks/D-59HNTq.js";import{l as it,p as De}from"../chunks/DQFlnzBt.js";import{W as ct}from"../chunks/ASPrLBMs.js";import{L as ze}from"../chunks/W8fNd3J-.js";import{f as Je,r as ut,t as dt}from"../chunks/iju4fhDV.js";import{d as mt}from"../chunks/DE-UUXRz.js";import{o as vt,b as pt,u as Qe}from"../chunks/L6rBFISd.js";import{s as ft}from"../chunks/BqyZnqh5.js";import{s as _t}from"../chunks/CTBtQUu0.js";import{C as ht,a as gt,S as $t,T as bt,c as xt}from"../chunks/X4Emwmej.js";import{A as wt}from"../chunks/CR4vVWSJ.js";import{B as Ue}from"../chunks/CuHSugC7.js";import{E as je}from"../chunks/BH5Z54-t.js";import{I as yt}from"../chunks/DrUA5UyL.js";import{A as kt}from"../chunks/B3RPZBpv.js";import{T as Ct}from"../chunks/Cx2hZcFR.js";import{i as Tt}from"../chunks/DICjq-EM.js";import{c as At}from"../chunks/CgbhQxMf.js";import{s as Oe}from"../chunks/DQej5oI3.js";import{s as St,b as Pt}from"../chunks/BAHlwUGp.js";import{t as It}from"../chunks/5mT-kVMF.js";import{S as Ft}from"../chunks/o0kI7_oM.js";import{a as qt}from"../chunks/BOA8zpL7.js";import{m as Et}from"../chunks/HVeMsM_a.js";var Dt=_('<div class="flex flex-wrap items-center gap-2"> </div>');function zt(Y,E){we(E,!1);const[v,V]=Le(),A=()=>F(Re,"$page",v),w=()=>F(He,"$schedulesCount",v),S=c(),d=async()=>{try{Ve(He,await at({namespace:e(S)}))}catch(W){console.error("Fetching schedules count failed: ",W==null?void 0:W.message)}};console.log("schedulesCount",w()),T(()=>A(),()=>{l(S,A().params.namespace)}),T(()=>e(S),()=>{e(S),d()}),Me(),ke();var y=Dt(),H=b(y,!0);m(y),R(W=>q(H,W),[()=>a("common.schedules-plural",{count:Number(w())})],r),t(Y,y),ye(),V()}var Lt=_("<div><code><pre> </pre></code></div>");function Rt(Y,E){const v=it(E,["children","$$slots","$$events","$$legacy"]);we(E,!1);let V=De(E,"calendar",8,void 0),A=De(E,"interval",8,void 0);ke();var w=qe(),S=oe(w);Xe(S,()=>[V(),A()],d=>{var y=Lt(),H=b(y),W=b(H),ae=b(W,!0);m(W),m(H),m(y),R(ue=>{ft(y,1,`frequency ${v.class??""}`,"svelte-egff5j"),q(ae,ue)},[()=>_t(V()||A(),void 0,2)],r),t(d,y)}),t(Y,w),ye()}var Wt=_('<td class="cell svelte-tyvqki"><!></td>'),Bt=_('<td class="cell whitespace-pre-line break-words svelte-tyvqki"><!></td>'),Ut=_('<td class="cell whitespace-pre-line break-words svelte-tyvqki"> </td>'),jt=_("<p><!></p>"),Ot=_('<td class="cell truncate svelte-tyvqki"></td>'),Vt=_("<div> </div>"),Ht=_('<td class="cell truncate svelte-tyvqki"></td>'),Mt=_('<td class="cell svelte-tyvqki"><p><!></p> <!></td>'),Nt=_('<td class="cell svelte-tyvqki"> </td>'),Yt=_("<tr></tr>");function Kt(Y,E){we(E,!1);const[v,V]=Le(),A=()=>F(Re,"$page",v),w=()=>F(dt,"$timeFormat",v),S=()=>F(ut,"$relativeTime",v),d=c(),y=c(),H=c(),W=c(),ae=c(),ue=c(),P=c();var ee=c(),te=c(),le=c(),B=c();let{namespace:_e}=A().params,p=De(E,"schedule",8),de=De(E,"columns",8);const me=K=>{var G;return(G=K==null?void 0:K.sort((D,pe)=>new Date(pe.actualTime).getTime()-new Date(D.actualTime).getTime()).slice(0,5))!==null&&G!==void 0?G:[]};T(()=>($(ee),Be(p())),()=>{l(d,l(ee,p()===null||p()===void 0?void 0:p().info)===null||$(ee)===void 0?void 0:$(ee).spec)}),T(()=>($(te),e(d)),()=>{l(y,l(te,e(d)===null||e(d)===void 0?void 0:e(d).structuredCalendar)===null||$(te)===void 0?void 0:$(te)[0])}),T(()=>($(le),e(d)),()=>{l(H,l(le,e(d)===null||e(d)===void 0?void 0:e(d).interval)===null||$(le)===void 0?void 0:$(le)[0])}),T(()=>e(d),()=>{l(W,(e(d)===null||e(d)===void 0?void 0:e(d).timezoneName)||"UTC")}),T(()=>($(B),Be(p())),()=>{l(ae,l(B,p()===null||p()===void 0?void 0:p().searchAttributes)!==null&&$(B)!==void 0?$(B):{})}),T(()=>e(ae),()=>{l(ue,mt({searchAttributes:e(ae)}))}),T(()=>Be(p()),()=>{l(P,vt({namespace:_e,scheduleId:p()===null||p()===void 0?void 0:p().scheduleId}))}),Me(),ke();var ve=Yt();xe(ve,5,de,({label:K})=>K,(K,G)=>{let D=()=>e(G).label;var pe=qe(),Ce=oe(pe);{var Te=se=>{var ne=Wt(),he=b(ne);const z=r(()=>{var x,M;return(M=(x=p())==null?void 0:x.info)!=null&&M.paused?"Paused":"Running"});ct(he,{get status(){return e(z)}}),m(ne),t(se,ne)},Ae=(se,ne)=>{{var he=x=>{var M=Bt(),ge=b(M);ze(ge,{get href(){return e(P)},children:($e,J)=>{re();var N=ce();R(()=>q(N,p().scheduleId)),t($e,N)},$$slots:{default:!0}}),m(M),t(x,M)},z=(x,M)=>{{var ge=J=>{var N=Ut(),I=b(N,!0);m(N),R(()=>{var U,o,f;return q(I,((f=(o=(U=p())==null?void 0:U.info)==null?void 0:o.workflowType)==null?void 0:f.name)??"")}),t(J,N)},$e=(J,N)=>{{var I=o=>{var f=Ot();xe(f,5,()=>{var g,h;return me((h=(g=p())==null?void 0:g.info)==null?void 0:h.recentActions)},Ee,(g,h)=>{var n=jt(),k=b(n);const L=r(()=>{var C,s,u,i;return pt({namespace:_e,workflow:(s=(C=e(h))==null?void 0:C.startWorkflowResult)==null?void 0:s.workflowId,run:(i=(u=e(h))==null?void 0:u.startWorkflowResult)==null?void 0:i.runId})});ze(k,{get href(){return e(L)},children:(C,s)=>{re();var u=ce();R(i=>q(u,i),[()=>{var i;return Je((i=e(h))==null?void 0:i.actualTime,w(),{relative:S()})}],r),t(C,u)},$$slots:{default:!0}}),m(n),t(g,n)}),m(f),t(o,f)},U=(o,f)=>{{var g=n=>{var k=Ht();xe(k,5,()=>{var L,C,s;return((s=(C=(L=p())==null?void 0:L.info)==null?void 0:C.futureActionTimes)==null?void 0:s.slice(0,5))??[]},Ee,(L,C)=>{var s=Vt(),u=b(s,!0);m(s),R(i=>q(u,i),[()=>Je(e(C),w(),{relative:S(),relativeLabel:a("common.from-now")})],r),t(L,s)}),m(k),t(n,k)},h=(n,k)=>{{var L=s=>{var u=Mt(),i=b(u),ie=b(i);lt(ie,()=>a("common.timezone",{timezone:e(W)})),m(i);var Q=Z(i,2);Rt(Q,{get calendar(){return e(y)},get interval(){return e(H)}}),m(u),t(s,u)},C=s=>{var u=Nt(),i=b(u,!0);m(u),R(()=>{var ie,Q,j;return q(i,((j=(Q=(ie=e(ue))==null?void 0:ie.searchAttributes)==null?void 0:Q.indexedFields)==null?void 0:j[D()])??"")}),t(s,u)};O(n,s=>{D()===a("schedules.schedule-spec")?s(L):s(C,!1)},k)}};O(o,n=>{D()===a("schedules.upcoming-runs")?n(g):n(h,!1)},f)}};O(J,o=>{D()===a("schedules.recent-runs")?o(I):o(U,!1)},N)}};O(x,J=>{D()===a("common.workflow-type")?J(ge):J($e,!1)},M)}};O(se,x=>{D()===a("schedules.id")?x(he):x(z,!1)},ne)}};O(Ce,se=>{D()===a("common.status")?se(Te):se(Ae,!1)})}t(K,pe)}),m(ve),t(Y,ve),ye(),V()}var Gt=_('<caption class="sr-only" slot="caption"> </caption>'),Jt=_("<!> <!>",1),Qt=_('<div class="flex flex-col gap-4" slot="header"><h1 class="flex flex-col gap-0 md:flex-row md:items-center md:gap-2"><!></h1> <div class="flex flex-col justify-between gap-2 md:flex-row"><!></div></div>'),Xt=_("<th> </th>"),Zt=_('<tr slot="headers" class="text-left"></tr>'),es=_("<p> <!> <!>.</p> <!>",1),ts=_("<!> <!>",1);function ss(Y,E){we(E,!1);const[v,V]=Le(),A=()=>F(Re,"$page",v),w=()=>F(xt,"$configurableTableColumns",v),S=()=>F(K,"$coreUser",v),d=()=>F(Tt,"$isCloud",v),y=()=>F(It,"$temporalVersion",v),H=()=>F(Pt,"$customSearchAttributes",v),W=()=>F(Oe,"$scheduleFilters",v),ae=()=>F(St,"$searchAttributes",v),ue=()=>F(He,"$schedulesCount",v),P=c(),ee=c(),te=c(),le=c(),B=c(),_e=c(),p=c();var de=c(),me=c();let ve=c(Date.now()),K=At(),G=c(!1),D=c("");const pe=()=>{l(G,!0)};rt(()=>{e(B)&&Ve(Oe,qt(e(B),ae()))});const Ce=z=>{var x;l(D,((x=z==null?void 0:z.body)===null||x===void 0?void 0:x.message)||a("schedules.error-message-fetching"))};T(()=>A(),()=>{l(P,A().params.namespace)}),T(()=>($(me),$(de),w(),e(P)),()=>{l(ee,l(me,l(de,w()===null||w()===void 0?void 0:w()[e(P)])===null||$(de)===void 0?void 0:$(de).schedules)!==null&&$(me)!==void 0?$(me):[])}),T(()=>(S(),e(P)),()=>{l(te,S().namespaceWriteDisabled(e(P)))}),T(()=>(d(),y(),H()),()=>{l(le,Object.entries({...(d()||Et("1.25.0",y()))&&{ScheduleId:Ft.KEYWORD},...H()}).map(([z,x])=>({label:z,value:z,type:x})))}),T(()=>A(),()=>{l(B,A().url.searchParams.get("query"))}),T(()=>(e(P),e(B)),()=>{l(_e,()=>(l(D,""),nt(e(P),e(B),Ce)))}),T(()=>e(P),()=>{l(p,gt(e(P)))}),Me(),ke();var Te=ts(),Ae=oe(Te);Xe(Ae,()=>[e(P),e(B),e(ve)],z=>{const x=r(()=>a("common.schedules")),M=r(()=>a("common.per-page")),ge=r(()=>a("common.next")),$e=r(()=>a("common.previous")),J=r(()=>a("schedules.empty-state-title")),N=r(()=>a("schedules.error-message-fetching"));kt(z,{get onFetch(){return e(_e)},onError:Ce,get total(){return ue()},get"aria-label"(){return e(x)},get pageSizeSelectLabel(){return e(M)},get nextButtonLabel(){return e(ge)},get previousButtonLabel(){return e($e)},get emptyStateMessage(){return e(J)},get errorMessage(){return e(N)},children:et,$$slots:{default:(I,U)=>{const o=r(()=>U.visibleItems);var f=qe(),g=oe(f);xe(g,1,()=>e(o),Ee,(h,n)=>{Kt(h,{get schedule(){return e(n)},get columns(){return e(ee)}})}),t(I,f)},caption:(I,U)=>{var o=Gt(),f=b(o,!0);m(o),R(g=>q(f,g),[()=>a("common.schedules")],r),t(I,o)},header:(I,U)=>{var o=Qt();const f=r(()=>U.visibleItems),g=r(()=>e(f).length||e(B));var h=b(o),n=b(h);zt(n,{}),m(h);var k=Z(h,2),L=b(k);{var C=s=>{var u=Jt(),i=oe(u);$t(i,{get options(){return e(le)},refresh:()=>{l(ve,Date.now())},get filters(){return tt(),W()},set filters(j){Ve(Oe,j)},$$legacy:!0});var ie=Z(i,2);{var Q=j=>{const Se=r(()=>Qe({namespace:e(P)})),Pe=r(()=>!Ge());Ue(j,{"data-testid":"create-schedule",get href(){return e(Se)},get disabled(){return e(Pe)},children:(Ie,Ne)=>{re();var Fe=ce();R(We=>q(Fe,We),[()=>a("schedules.create")],r),t(Ie,Fe)},$$slots:{default:!0}})};O(ie,j=>{e(te)||j(Q)})}t(s,u)};O(L,s=>{e(g)&&s(C)})}m(k),m(o),t(I,o)},headers:(I,U)=>{var o=Zt();xe(o,5,()=>e(ee),Ee,(f,g)=>{let h=()=>e(g).label;var n=Xt(),k=b(n,!0);m(n),R(()=>q(k,h())),t(f,n)}),m(o),t(I,o)},empty:(I,U)=>{var o=qe(),f=oe(o);{var g=n=>{const k=r(()=>a("schedules.empty-state-title"));je(n,{get title(){return e(k)},children:(L,C)=>{wt(L,{intent:"warning",icon:"warning",class:"mx-12",children:(s,u)=>{re();var i=ce();R(()=>q(i,e(D))),t(s,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},h=(n,k)=>{{var L=s=>{const u=r(()=>a("schedules.empty-state-title")),i=r(()=>a("schedules.empty-state-description"));je(s,{get title(){return e(u)},get content(){return e(i)}})},C=s=>{const u=r(()=>a("schedules.empty-state-title"));je(s,{get title(){return e(u)},children:(i,ie)=>{var Q=es(),j=oe(Q),Se=b(j),Pe=Z(Se);ze(Pe,{newTab:!0,href:"https://docs.temporal.io/workflows/#schedule",children:(X,be)=>{re();var fe=ce();R(Ye=>q(fe,Ye),[()=>a("schedules.getting-started-docs-link")],r),t(X,fe)},$$slots:{default:!0}});var Ie=Z(Pe),Ne=Z(Ie);ze(Ne,{newTab:!0,href:"https://docs.temporal.io/cli/schedule",children:(X,be)=>{re();var fe=ce("Temporal CLI");t(X,fe)},$$slots:{default:!0}}),re(),m(j);var Fe=Z(j,2);{var We=X=>{const be=r(()=>!Ge());Ue(X,{"data-testid":"create-schedule",get disabled(){return e(be)},$$events:{click:()=>ot(Qe({namespace:e(P)}))},children:(fe,Ye)=>{re();var Ke=ce();R(Ze=>q(Ke,Ze),[()=>a("schedules.create")],r),t(fe,Ke)},$$slots:{default:!0}})};O(Fe,X=>{e(te)||X(We)})}R((X,be)=>{q(Se,`${X??""} `),q(Ie,` ${be??""} `)},[()=>a("schedules.getting-started-docs-link-preface"),()=>a("schedules.getting-started-cli-link-preface")],r),t(i,Q)},$$slots:{default:!0}})};O(n,s=>{e(B)?s(L):s(C,!1)},k)}};O(f,n=>{e(D)?n(g):n(h,!1)})}t(I,o)},"actions-end-additional":(I,U)=>{Ct(I,{text:"Configure Columns",top:!0,children:(o,f)=>{Ue(o,{"data-testid":"workflows-summary-table-configuration-button",size:"xs",variant:"ghost",$$events:{click:pe},children:(g,h)=>{yt(g,{name:"settings"})},$$slots:{default:!0}})},$$slots:{default:!0}})}}})});var se=Z(Ae,2);const ne=r(()=>a("common.columns")),he=r(()=>a("common.schedules-table"));ht(se,{get availableColumns(){return e(p)},get table(){return bt.SCHEDULES},get type(){return e(ne)},get title(){return e(he)},get open(){return e(G)},set open(z){l(G,z)},$$legacy:!0}),t(Y,Te),ye(),V()}var rs=_("<!> <!>",1);function Hs(Y,E){we(E,!1);const[v,V]=Le(),A=()=>F(Re,"$page",v);ke();var w=rs(),S=oe(w);const d=r(()=>`Schedules | ${A().params.namespace}`);st(S,{get title(){return e(d)},get url(){return A().url.href}});var y=Z(S,2);ss(y,{}),t(Y,w),ye(),V()}export{Hs as component};
