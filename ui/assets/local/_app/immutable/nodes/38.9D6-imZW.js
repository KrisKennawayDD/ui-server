import{s as R,h as b,b as T,j as y,k as E,d as U,f as p,m as $,i as w,n as q,c as k,L as A,t as V,l as W,q as j,v as I}from"../chunks/scheduler.CnYDgCRb.js";import{S as G,i as P,c as L,a as H,m as F,t as c,g as z,b as _,e as B,d as N}from"../chunks/index.DW7Zsqzm.js";import{p as X}from"../chunks/stores.DOBhxhBc.js";import{E as Y}from"../chunks/event-summary-table.DWUIq63p.js";import{L as Z}from"../chunks/link.WEFh1TX8.js";import{g as x}from"../chunks/index.r1qvqm0I.js";import{f as ee}from"../chunks/events-service.C4SjKHBv.js";import{f as v,a as te}from"../chunks/events.BEeojLBO.js";import{w as re}from"../chunks/workflow-run.DIC17ARy.js";import{i as ne}from"../chunks/get-workflow-relationships.M4kw2oYe.js";import{b as oe}from"../chunks/route-for.DZUy--PC.js";function D(l){let t,r,e,n;const f=[le,se],o=[];function i(s,a){return s[2]?0:1}return r=i(l),e=o[r]=f[r](l),{c(){t=b("h2"),e.c(),this.h()},l(s){t=y(s,"H2",{class:!0});var a=E(t);e.l(a),a.forEach(p),this.h()},h(){$(t,"class","flex w-full items-center")},m(s,a){w(s,t,a),o[r].m(t,null),n=!0},p(s,a){let m=r;r=i(s),r===m?o[r].p(s,a):(z(),_(o[m],1,1,()=>{o[m]=null}),B(),e=o[r],e?e.p(s,a):(e=o[r]=f[r](s),e.c()),c(e,1),e.m(t,null))},i(s){n||(c(e),n=!0)},o(s){_(e),n=!1},d(s){s&&p(t),o[r].d()}}}function se(l){let t=l[0].displayName+"",r;return{c(){r=V(t)},l(e){r=W(e,t)},m(e,n){w(e,r,n)},p(e,n){n&1&&t!==(t=e[0].displayName+"")&&j(r,t)},i:I,o:I,d(e){e&&p(r)}}}function le(l){let t,r;return t=new Z({props:{href:l[2],$$slots:{default:[ae]},$$scope:{ctx:l}}}),{c(){L(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,n){F(t,e,n),r=!0},p(e,n){const f={};n&4&&(f.href=e[2]),n&32769&&(f.$$scope={dirty:n,ctx:e}),t.$set(f)},i(e){r||(c(t.$$.fragment,e),r=!0)},o(e){_(t.$$.fragment,e),r=!1},d(e){N(t,e)}}}function ae(l){let t=l[0].displayName+"",r;return{c(){r=V(t)},l(e){r=W(e,t)},m(e,n){w(e,r,n)},p(e,n){n&1&&t!==(t=e[0].displayName+"")&&j(r,t)},d(e){e&&p(r)}}}function ie(l){let t,r,e,n,f,o=l[0]&&D(l);return n=new Y({props:{items:l[1],groups:l[1],updating:l[3],expandAll:!0}}),{c(){t=b("div"),o&&o.c(),r=T(),e=b("div"),L(n.$$.fragment),this.h()},l(i){t=y(i,"DIV",{class:!0});var s=E(t);o&&o.l(s),r=U(s),e=y(s,"DIV",{"data-testid":!0});var a=E(e);H(n.$$.fragment,a),a.forEach(p),s.forEach(p),this.h()},h(){$(e,"data-testid","event-summary-table"),$(t,"class","px-8")},m(i,s){w(i,t,s),o&&o.m(t,null),q(t,r),q(t,e),F(n,e,null),f=!0},p(i,[s]){i[0]?o?(o.p(i,s),s&1&&c(o,1)):(o=D(i),o.c(),c(o,1),o.m(t,r)):o&&(z(),_(o,1,1,()=>{o=null}),B());const a={};s&2&&(a.items=i[1]),s&2&&(a.groups=i[1]),s&8&&(a.updating=i[3]),n.$set(a)},i(i){f||(c(o),c(n.$$.fragment,i),f=!0)},o(i){_(o),_(n.$$.fragment,i),f=!1},d(i){i&&p(t),o&&o.d(),N(n)}}}function fe(l,t,r){let e,n,f,o,i,s,a,m,S,h;k(l,v,u=>r(7,a=u)),k(l,te,u=>r(10,m=u)),k(l,re,u=>r(11,S=u)),k(l,X,u=>r(8,h=u));let g,C=[];const J=()=>{A(v,a=[],a)},K=async(u,d,O)=>{(S.workflow.id!==d||!a.length)&&(J(),A(v,a=await ee({namespace:u,workflowId:d,runId:O,sort:m}),a)),r(0,g=x(a,m).find(Q=>Q.id===o)),g&&r(1,C=[g])};function M(u){const d=u==null?void 0:u.eventList.find(ne);return d?oe({namespace:e,workflow:d.attributes.workflowExecution.workflowId,run:d.attributes.workflowExecution.runId}):""}return l.$$.update=()=>{l.$$.dirty&256&&r(4,{namespace:e,workflow:n,run:f,id:o}=h.params,e,(r(6,n),r(8,h)),(r(5,f),r(8,h))),l.$$.dirty&112&&K(e,n,f),l.$$.dirty&128&&r(3,i=!a.length),l.$$.dirty&1&&r(2,s=M(g))},[g,C,s,i,e,f,n,a,h]}class ue extends G{constructor(t){super(),P(this,t,fe,ie,R,{})}}function ce(l){let t,r;return t=new ue({}),{c(){L(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,n){F(t,e,n),r=!0},p:I,i(e){r||(c(t.$$.fragment,e),r=!0)},o(e){_(t.$$.fragment,e),r=!1},d(e){N(t,e)}}}class Ee extends G{constructor(t){super(),P(this,t,null,ce,R,{})}}export{Ee as component};
