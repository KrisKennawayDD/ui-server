import{s as J,h as w,j as D,k as E,f as m,i as b,c as U,w as j,b as N,d as R,m as C,n as k,t as A,l as M,q as G,v as _,x as ue}from"../chunks/scheduler.CnYDgCRb.js";import{S as K,i as X,g as Y,e as Z,t as v,b as y,c as V,a as P,m as S,d as L}from"../chunks/index.DW7Zsqzm.js";import{p as x}from"../chunks/stores.E7ifrCEl.js";import{P as he}from"../chunks/page-title.DEkRIe-Y.js";import{h as re,u as _e}from"../chunks/await_block.riFHw7oM.js";import{e as Q,u as ge,o as de}from"../chunks/each.rY6XwTBs.js";import{L as pe}from"../chunks/link.CAfdmPUu.js";import{t as g}from"../chunks/translate.BBe5dcco.js";import{t as $e,r as be,f as ne}from"../chunks/time-format.VScMb3hN.js";import{n as z,p as le}from"../chunks/route-for.Df1QX8uF.js";import{f as oe}from"../chunks/screaming-enums.UO4RgiCl.js";import{D as ke,a as ve}from"../chunks/deployments-service.CB7iU2Fq.js";import{B as ye}from"../chunks/button.Jmg3d2rs.js";import{I as we}from"../chunks/icon.BLtYHMSM.js";import{P as De}from"../chunks/paginated.D1ZeCdDL.js";import{d as Ee}from"../chunks/encode-uri.BOkQ1rrX.js";function ae(s,e,l){const t=s.slice();return t[11]=e[l].label,t}function Te(s){let e,l,t,r,o;return t=new pe({props:{icon:"external-link",href:z({namespace:s[6].params.namespace,query:`TemporalWorkerDeploymentVersion="${s[0].version}"`})}}),{c(){e=w("td"),l=w("p"),V(t.$$.fragment),r=N(),this.h()},l(n){e=D(n,"TD",{class:!0});var a=E(e);l=D(a,"P",{});var i=E(l);P(t.$$.fragment,i),r=R(i),i.forEach(m),a.forEach(m),this.h()},h(){C(e,"class","whitespace-pre-line break-words p-2 text-center")},m(n,a){b(n,e,a),k(e,l),S(t,l,null),k(l,r),o=!0},p(n,a){const i={};a&65&&(i.href=z({namespace:n[6].params.namespace,query:`TemporalWorkerDeploymentVersion="${n[0].version}"`})),t.$set(i)},i(n){o||(v(t.$$.fragment,n),o=!0)},o(n){y(t.$$.fragment,n),o=!1},d(n){n&&m(e),L(t)}}}function Ce(s){var r;let e,l=ne((r=s[0])==null?void 0:r.createTime,s[4],{relative:s[5]})+"",t;return{c(){e=w("td"),t=A(l),this.h()},l(o){e=D(o,"TD",{class:!0});var n=E(e);t=M(n,l),n.forEach(m),this.h()},h(){C(e,"class","whitespace-pre-line break-words p-2 text-left")},m(o,n){b(o,e,n),k(e,t)},p(o,n){var a;n&49&&l!==(l=ne((a=o[0])==null?void 0:a.createTime,o[4],{relative:o[5]})+"")&&G(t,l)},i:_,o:_,d(o){o&&m(e)}}}function Ie(s){let e,l,t,r;return l=new ke({props:{status:s[3],version:s[0].version,label:s[2]}}),{c(){e=w("td"),V(l.$$.fragment),t=N(),this.h()},l(o){e=D(o,"TD",{class:!0});var n=E(e);P(l.$$.fragment,n),t=R(n),n.forEach(m),this.h()},h(){C(e,"class","p-2 text-left")},m(o,n){b(o,e,n),S(l,e,null),k(e,t),r=!0},p(o,n){const a={};n&8&&(a.status=o[3]),n&1&&(a.version=o[0].version),n&4&&(a.label=o[2]),l.$set(a)},i(o){r||(v(l.$$.fragment,o),r=!0)},o(o){y(l.$$.fragment,o),r=!1},d(o){o&&m(e),L(l)}}}function se(s,e){let l,t,r,o,n,a,i,u;const d=[Ie,Ce,Te],h=[];function T(p,f){return f&2&&(t=null),f&2&&(r=null),f&2&&(o=null),t==null&&(t=p[11]===g("deployments.version")),t?0:(r==null&&(r=p[11]===g("deployments.deployed")),r?1:(o==null&&(o=p[11]===g("deployments.workflows")),o?2:-1))}return~(n=T(e,-1))&&(a=h[n]=d[n](e)),{key:s,first:null,c(){l=j(),a&&a.c(),i=j(),this.h()},l(p){l=j(),a&&a.l(p),i=j(),this.h()},h(){this.first=l},m(p,f){b(p,l,f),~n&&h[n].m(p,f),b(p,i,f),u=!0},p(p,f){e=p;let W=n;n=T(e,f),n===W?~n&&h[n].p(e,f):(a&&(Y(),y(h[W],1,1,()=>{h[W]=null}),Z()),~n?(a=h[n],a?a.p(e,f):(a=h[n]=d[n](e),a.c()),v(a,1),a.m(i.parentNode,i)):a=null)},i(p){u||(v(a),u=!0)},o(p){y(a),u=!1},d(p){p&&(m(l),m(i)),~n&&h[n].d(p)}}}function Ve(s){let e,l=[],t=new Map,r,o=Q(s[1]);const n=a=>a[11];for(let a=0;a<o.length;a+=1){let i=ae(s,o,a),u=n(i);t.set(u,l[a]=se(u,i))}return{c(){e=w("tr");for(let a=0;a<l.length;a+=1)l[a].c()},l(a){e=D(a,"TR",{});var i=E(e);for(let u=0;u<l.length;u+=1)l[u].l(i);i.forEach(m)},m(a,i){b(a,e,i);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(e,null);r=!0},p(a,[i]){i&127&&(o=Q(a[1]),Y(),l=ge(l,i,n,1,a,o,t,e,de,se,null,ae),Z())},i(a){if(!r){for(let i=0;i<o.length;i+=1)v(l[i]);r=!0}},o(a){for(let i=0;i<l.length;i+=1)y(l[i]);r=!1},d(a){a&&m(e);for(let i=0;i<l.length;i+=1)l[i].d()}}}function Pe(s,e,l){let t,r,o,n,a,i,u,d;U(s,$e,f=>l(4,i=f)),U(s,be,f=>l(5,u=f)),U(s,x,f=>l(6,d=f));let{routingConfig:h}=e,{version:T}=e,{columns:p}=e;return s.$$set=f=>{"routingConfig"in f&&l(7,h=f.routingConfig),"version"in f&&l(0,T=f.version),"columns"in f&&l(1,p=f.columns)},s.$$.update=()=>{s.$$.dirty&129&&l(10,t=T.version===h.currentVersion),s.$$.dirty&129&&l(9,r=T.version===h.rampingVersion),s.$$.dirty&1&&l(8,o=T.drainageStatus),s.$$.dirty&1792&&l(3,n=t?g("deployments.current"):r?g("deployments.ramping"):o?oe(o,"VersionDrainageStatus"):g("common.inactive")),s.$$.dirty&1920&&l(2,a=t?g("deployments.current"):r?g("deployments.ramping",{percentage:h.rampingVersionPercentage}):o?oe(o,"VersionDrainageStatus"):g("common.inactive"))},[T,p,a,n,i,u,d,h,o,r,t]}class Se extends K{constructor(e){super(),X(this,e,Pe,Ve,J,{routingConfig:7,version:0,columns:1})}}function ie(s,e,l){const t=s.slice();return t[12]=e[l],t}function fe(s,e,l){const t=s.slice();return t[8]=e[l].label,t[10]=l,t}function Le(s){return{c:_,l:_,m:_,p:_,i:_,o:_,d:_}}function We(s){let e,l,t,r,o,n,a,i,u,d,h,T,p,f,W,H,q,O;return r=new pe({props:{href:le({namespace:s[1]}),icon:"chevron-left",$$slots:{default:[qe]},$$scope:{ctx:s}}}),n=new we({props:{name:"chevron-left"}}),f=new ye({props:{href:z({namespace:s[2].params.namespace,query:`TemporalWorkerDeployment="${s[0]}"`}),$$slots:{default:[Be]},$$scope:{ctx:s}}}),q=new De({props:{"aria-label":g("deployments.deployments"),perPageLabel:g("common.per-page"),nextPageButtonLabel:g("common.next-page"),previousPageButtonLabel:g("common.previous-page"),pageButtonLabel:s[6],items:s[7].workerDeploymentInfo.versionSummaries,$$slots:{headers:[Re],caption:[Ne],default:[Fe,({visibleItems:c})=>({11:c}),({visibleItems:c})=>c?2048:0]},$$scope:{ctx:s}}}),{c(){e=w("header"),l=w("div"),t=w("div"),V(r.$$.fragment),o=N(),V(n.$$.fragment),a=N(),i=A(s[0]),u=N(),d=w("div"),h=w("h1"),T=A(s[0]),p=N(),V(f.$$.fragment),W=N(),H=w("div"),V(q.$$.fragment),this.h()},l(c){e=D(c,"HEADER",{class:!0});var $=E(e);l=D($,"DIV",{class:!0});var B=E(l);t=D(B,"DIV",{class:!0});var I=E(t);P(r.$$.fragment,I),o=R(I),P(n.$$.fragment,I),a=R(I),i=M(I,s[0]),I.forEach(m),u=R(B),d=D(B,"DIV",{class:!0});var F=E(d);h=D(F,"H1",{});var ee=E(h);T=M(ee,s[0]),ee.forEach(m),p=R(F),P(f.$$.fragment,F),F.forEach(m),B.forEach(m),$.forEach(m),W=R(c),H=D(c,"DIV",{class:!0});var te=E(H);P(q.$$.fragment,te),te.forEach(m),this.h()},h(){C(t,"class","flex items-center gap-2"),C(d,"class","flex w-full items-center justify-between"),C(l,"class","relative flex w-full flex-col gap-4"),C(e,"class","flex flex-row flex-wrap justify-between gap-8 border-b border-subtle px-4 pb-4 pt-8 md:pt-20 xl:px-8"),C(H,"class","bg-primary p-8")},m(c,$){b(c,e,$),k(e,l),k(l,t),S(r,t,null),k(t,o),S(n,t,null),k(t,a),k(t,i),k(l,u),k(l,d),k(d,h),k(h,T),k(d,p),S(f,d,null),b(c,W,$),b(c,H,$),S(q,H,null),O=!0},p(c,$){const B={};$&2&&(B.href=le({namespace:c[1]})),$&32768&&(B.$$scope={dirty:$,ctx:c}),r.$set(B),(!O||$&1)&&G(i,c[0]),(!O||$&1)&&G(T,c[0]);const I={};$&5&&(I.href=z({namespace:c[2].params.namespace,query:`TemporalWorkerDeployment="${c[0]}"`})),$&32768&&(I.$$scope={dirty:$,ctx:c}),f.$set(I);const F={};$&8&&(F.items=c[7].workerDeploymentInfo.versionSummaries),$&34824&&(F.$$scope={dirty:$,ctx:c}),q.$set(F)},i(c){O||(v(r.$$.fragment,c),v(n.$$.fragment,c),v(f.$$.fragment,c),v(q.$$.fragment,c),O=!0)},o(c){y(r.$$.fragment,c),y(n.$$.fragment,c),y(f.$$.fragment,c),y(q.$$.fragment,c),O=!1},d(c){c&&(m(e),m(W),m(H)),L(r),L(n),L(f),L(q)}}}function qe(s){let e=g("deployments.back-to-deployments")+"",l;return{c(){l=A(e)},l(t){l=M(t,e)},m(t,r){b(t,l,r)},p:_,d(t){t&&m(l)}}}function Be(s){let e=g("deployments.go-to-workflows")+"",l;return{c(){l=A(e)},l(t){l=M(t,e)},m(t,r){b(t,l,r)},p:_,d(t){t&&m(l)}}}function ce(s){let e,l;return e=new Se({props:{routingConfig:s[7].workerDeploymentInfo.routingConfig,version:s[12],columns:s[4]}}),{c(){V(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,r){S(e,t,r),l=!0},p(t,r){const o={};r&8&&(o.routingConfig=t[7].workerDeploymentInfo.routingConfig),r&2048&&(o.version=t[12]),e.$set(o)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Fe(s){let e,l,t=Q(s[11]),r=[];for(let n=0;n<t.length;n+=1)r[n]=ce(ie(s,t,n));const o=n=>y(r[n],1,1,()=>{r[n]=null});return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=j()},l(n){for(let a=0;a<r.length;a+=1)r[a].l(n);e=j()},m(n,a){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(n,a);b(n,e,a),l=!0},p(n,a){if(a&2072){t=Q(n[11]);let i;for(i=0;i<t.length;i+=1){const u=ie(n,t,i);r[i]?(r[i].p(u,a),v(r[i],1)):(r[i]=ce(u),r[i].c(),v(r[i],1),r[i].m(e.parentNode,e))}for(Y(),i=t.length;i<r.length;i+=1)o(i);Z()}},i(n){if(!l){for(let a=0;a<t.length;a+=1)v(r[a]);l=!0}},o(n){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)y(r[a]);l=!1},d(n){n&&m(e),ue(r,n)}}}function Ne(s){let e,l=g("deployments.deployments")+"",t;return{c(){e=w("caption"),t=A(l),this.h()},l(r){e=D(r,"CAPTION",{class:!0,slot:!0});var o=E(e);t=M(o,l),o.forEach(m),this.h()},h(){C(e,"class","sr-only"),C(e,"slot","caption")},m(r,o){b(r,e,o),k(e,t)},p:_,d(r){r&&m(e)}}}function me(s){let e,l=s[8]+"",t;return{c(){e=w("th"),t=A(l),this.h()},l(r){e=D(r,"TH",{class:!0});var o=E(e);t=M(o,l),o.forEach(m),this.h()},h(){C(e,"class",s[10]===0&&"w-full")},m(r,o){b(r,e,o),k(e,t)},p:_,d(r){r&&m(e)}}}function Re(s){let e,l=Q(s[4]),t=[];for(let r=0;r<l.length;r+=1)t[r]=me(fe(s,l,r));return{c(){e=w("tr");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=D(r,"TR",{slot:!0,class:!0});var o=E(e);for(let n=0;n<t.length;n+=1)t[n].l(o);o.forEach(m),this.h()},h(){C(e,"slot","headers"),C(e,"class","text-left")},m(r,o){b(r,e,o);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null)},p(r,o){if(o&16){l=Q(r[4]);let n;for(n=0;n<l.length;n+=1){const a=fe(r,l,n);t[n]?t[n].p(a,o):(t[n]=me(a),t[n].c(),t[n].m(e,null))}for(;n<t.length;n+=1)t[n].d(1);t.length=l.length}},d(r){r&&m(e),ue(t,r)}}}function je(s){return{c:_,l:_,m:_,p:_,i:_,o:_,d:_}}function He(s){let e,l,t,r={ctx:s,current:null,token:null,hasCatch:!1,pending:je,then:We,catch:Le,value:7,blocks:[,,,]};return re(l=s[3],r),{c(){e=j(),r.block.c()},l(o){e=j(),r.block.l(o)},m(o,n){b(o,e,n),r.block.m(o,r.anchor=n),r.mount=()=>e.parentNode,r.anchor=e,t=!0},p(o,[n]){s=o,r.ctx=s,n&8&&l!==(l=s[3])&&re(l,r)||_e(r,s,n)},i(o){t||(v(r.block),t=!0)},o(o){for(let n=0;n<3;n+=1){const a=r.blocks[n];y(a)}t=!1},d(o){o&&m(e),r.block.d(o),r.token=null,r=null}}}function Ae(s,e,l){let t,r,o,n,a;U(s,x,d=>l(2,a=d));const i=[{label:g("deployments.version"),pinned:!0},{label:g("deployments.deployed"),pinned:!0},{label:g("deployments.workflows"),pinned:!0}],u=d=>g("common.go-to-page",{page:d});return s.$$.update=()=>{s.$$.dirty&4&&l(1,t=a.params.namespace),s.$$.dirty&4&&l(0,r=a.params.deployment),s.$$.dirty&3&&l(5,o={namespace:t,deploymentName:Ee(r)}),s.$$.dirty&32&&l(3,n=ve(o))},[r,t,a,n,i,o,u]}class Me extends K{constructor(e){super(),X(this,e,Ae,He,J,{})}}function Oe(s){let e,l,t,r;return e=new he({props:{title:`Deployment | ${s[1]}`,url:s[0].url.href}}),t=new Me({}),{c(){V(e.$$.fragment),l=N(),V(t.$$.fragment)},l(o){P(e.$$.fragment,o),l=R(o),P(t.$$.fragment,o)},m(o,n){S(e,o,n),b(o,l,n),S(t,o,n),r=!0},p(o,[n]){const a={};n&1&&(a.url=o[0].url.href),e.$set(a)},i(o){r||(v(e.$$.fragment,o),v(t.$$.fragment,o),r=!0)},o(o){y(e.$$.fragment,o),y(t.$$.fragment,o),r=!1},d(o){o&&m(l),L(e,o),L(t,o)}}}function Qe(s,e,l){let t;U(s,x,o=>l(0,t=o));const r=t.params.deployment;return[t,r]}class st extends K{constructor(e){super(),X(this,e,Qe,Oe,J,{})}}export{st as component};
